webpackJsonp([155],{"1NHa":function(module,exports){MM.ui.FormValidator=Class.create({initialize:function(fieldId,url,options){this.fieldId=fieldId,this.url=url,this.options=options,this.observeField()},observeField:function(){mm$(this.fieldId)&&new Form.Element.EventObserver(this.fieldId,this.checkField.bind(this))},checkField:function(){var value=mm$(this.fieldId).value;new Ajax.Request(this.url,{parameters:"value="+encodeURIComponent(value),onComplete:function(transport){var response=transport.responseJSON;void 0!==response&&response&&(response.errorMessage||response.extraInfo?this.options.onErrorMessage&&this.options.onErrorMessage(response):this.options.onSuccess&&this.options.onSuccess(),this.options.onComplete&&this.options.onComplete())}.bind(this)})}})},"1V60":function(module,exports){MM.onload={FB:[],onload:function(){if(!MM.onload.done){MM.onload.done=!0;for(var x=0,al=MM.onload.f.length;x<al;x++)MM.onload.f[x]();if("undefined"!=typeof MM_onload)for(var x=0,al=MM_onload.length;x<al;x++)MM_onload[x]()}},add:function(){for(var a=arguments,x=0,al=a.length;x<al;x++)"function"==typeof a[x]&&(MM.onload.done?a[x]():MM.onload.f.push(a[x]))},listen:function(){if(/WebKit|khtml/i.test(navigator.userAgent))MM.onload.timer=setInterval(function(){/loaded|complete/.test(document.readyState)&&(clearInterval(MM.onload.timer),delete MM.onload.timer,MM.onload.onload())},10);else if(document.addEventListener)document.addEventListener("DOMContentLoaded",MM.onload.onload,!1);else if(!MM.onload.iew32)if(window.addEventListener)window.addEventListener("load",MM.onload.onload,!1);else if(window.attachEvent)return window.attachEvent("onload",MM.onload.onload)},f:[],done:!1,timer:null,iew32:!1},MM.onload.listen()},"2SyW":function(module,exports){"undefined"==typeof MM&&(MM={}),void 0===MM.utils&&(MM.utils={}),MM.utils.SHA1={translate:function(msg){function rotate_left(n,s){return n<<s|n>>>32-s}function cvt_hex(val){var i,v,str="";for(i=7;i>=0;i--)v=val>>>4*i&15,str+=v.toString(16);return str}var blockstart,i,j,A,B,C,D,E,temp,W=new Array(80),H0=1732584193,H1=4023233417,H2=2562383102,H3=271733878,H4=3285377520;msg=function(string){string=string.replace(/\r\n/g,"\n");for(var utftext="",n=0;n<string.length;n++){var c=string.charCodeAt(n);c<128?utftext+=String.fromCharCode(c):c>127&&c<2048?(utftext+=String.fromCharCode(c>>6|192),utftext+=String.fromCharCode(63&c|128)):(utftext+=String.fromCharCode(c>>12|224),utftext+=String.fromCharCode(c>>6&63|128),utftext+=String.fromCharCode(63&c|128))}return utftext}(msg);var msg_len=msg.length,word_array=new Array;for(i=0;i<msg_len-3;i+=4)j=msg.charCodeAt(i)<<24|msg.charCodeAt(i+1)<<16|msg.charCodeAt(i+2)<<8|msg.charCodeAt(i+3),word_array.push(j);switch(msg_len%4){case 0:i=2147483648;break;case 1:i=msg.charCodeAt(msg_len-1)<<24|8388608;break;case 2:i=msg.charCodeAt(msg_len-2)<<24|msg.charCodeAt(msg_len-1)<<16|32768;break;case 3:i=msg.charCodeAt(msg_len-3)<<24|msg.charCodeAt(msg_len-2)<<16|msg.charCodeAt(msg_len-1)<<8|128}for(word_array.push(i);word_array.length%16!=14;)word_array.push(0);for(word_array.push(msg_len>>>29),word_array.push(msg_len<<3&4294967295),blockstart=0;blockstart<word_array.length;blockstart+=16){for(i=0;i<16;i++)W[i]=word_array[blockstart+i];for(i=16;i<=79;i++)W[i]=rotate_left(W[i-3]^W[i-8]^W[i-14]^W[i-16],1);for(A=H0,B=H1,C=H2,D=H3,E=H4,i=0;i<=19;i++)temp=rotate_left(A,5)+(B&C|~B&D)+E+W[i]+1518500249&4294967295,E=D,D=C,C=rotate_left(B,30),B=A,A=temp;for(i=20;i<=39;i++)temp=rotate_left(A,5)+(B^C^D)+E+W[i]+1859775393&4294967295,E=D,D=C,C=rotate_left(B,30),B=A,A=temp;for(i=40;i<=59;i++)temp=rotate_left(A,5)+(B&C|B&D|C&D)+E+W[i]+2400959708&4294967295,E=D,D=C,C=rotate_left(B,30),B=A,A=temp;for(i=60;i<=79;i++)temp=rotate_left(A,5)+(B^C^D)+E+W[i]+3395469782&4294967295,E=D,D=C,C=rotate_left(B,30),B=A,A=temp;H0=H0+A&4294967295,H1=H1+B&4294967295,H2=H2+C&4294967295,H3=H3+D&4294967295,H4=H4+E&4294967295}var temp=cvt_hex(H0)+cvt_hex(H1)+cvt_hex(H2)+cvt_hex(H3)+cvt_hex(H4);return temp.toLowerCase()}}},"2nQK":function(module,exports){Effect.Scroll=Class.create(),Object.extend(Object.extend(Effect.Scroll.prototype,Effect.Base.prototype),{initialize:function(element){this.element=$(element);var options=Object.extend({x:0,y:0,mode:"absolute"},arguments[1]||{});this.start(options)},setup:function(){this.options.continuous&&!this.element._ext&&(this.element.cleanWhitespace(),this.element._ext=!0,this.element.appendChild(this.element.firstChild)),this.originalLeft=this.element.scrollLeft,this.originalTop=this.element.scrollTop,"absolute"==this.options.mode&&(this.options.x-=this.originalLeft,this.options.y-=this.originalTop)},update:function(position){this.element.scrollLeft=this.options.x*position+this.originalLeft,this.element.scrollTop=this.options.y*position+this.originalTop}})},"3oL9":function(module,exports){void 0===window.MM&&(window.MM={plugins:{}})},"46sc":function(module,exports,__webpack_require__){function webpackAsyncContext(req){var ids=map[req];return ids?__webpack_require__.e(ids[1]).then(function(){return __webpack_require__(ids[0])}):Promise.reject(new Error("Cannot find module '"+req+"'."))}var map={"./account":["9uRu",13],"./account.js":["9uRu",13],"./account/ajaxForm":["utw5",50],"./account/ajaxForm.js":["utw5",50],"./account/branding":["MypR",49],"./account/branding.js":["MypR",49],"./account/integrations/driveConfiguration":["rMT2",20],"./account/integrations/driveConfiguration.js":["rMT2",20],"./account/myAccount":["9fmA",15],"./account/myAccount.js":["9fmA",15],"./account/team/filter":["jpFG",6],"./account/team/filter.js":["jpFG",6],"./account/team/group":["lDYt",12],"./account/team/group.js":["lDYt",12],"./account/team/groupList":["sdpK",10],"./account/team/groupList.js":["sdpK",10],"./account/team/header":["aOvo",19],"./account/team/header.js":["aOvo",19],"./account/team/helpers":["Aghy",27],"./account/team/helpers.js":["Aghy",27],"./account/team/inviteLink":["m9I2",48],"./account/team/inviteLink.js":["m9I2",48],"./account/team/member":["z2xN",9],"./account/team/member.js":["z2xN",9],"./account/team/memberList":["7EO5",8],"./account/team/memberList.js":["7EO5",8],"./account/team/memberListing":["ixeA",0],"./account/team/memberListing.js":["ixeA",0],"./account/team/memberPopoverItems":["8ozP",25],"./account/team/memberPopoverItems.js":["8ozP",25],"./account/team/product":["L88J",34],"./account/team/product.js":["L88J",34],"./account/team/productList":["lqqL",29],"./account/team/productList.js":["lqqL",29],"./account/team/teamMembers":["KVbW",1],"./account/team/teamMembers.js":["KVbW",1],"./account/themesListing":["s4EN",11],"./account/themesListing.js":["s4EN",11],"./account/turboHelpers":["DIoc",47],"./account/turboHelpers.js":["DIoc",47],"./admin/newsletter/nlOption":["PMpj",24],"./admin/newsletter/nlOption.js":["PMpj",24],"./admin/newsletter/sendForm":["GhO3",18],"./admin/newsletter/sendForm.js":["GhO3",18],"./avatar":["uY1s",46],"./avatar.js":["uY1s",46],"./avatarCropper":["UQf7",45],"./avatarCropper.js":["UQf7",45],"./billing/billingCycleTile":["2mJM",44],"./billing/billingCycleTile.js":["2mJM",44],"./billing/bundle/checkout":["2Shy",3],"./billing/bundle/checkout.js":["2Shy",3],"./billing/bundle/orderDetails":["a6mJ",5],"./billing/bundle/orderDetails.js":["a6mJ",5],"./billing/checkout":["DtVI",2],"./billing/checkout.js":["DtVI",2],"./billing/currentCreditRow":["rk2h",43],"./billing/currentCreditRow.js":["rk2h",43],"./billing/licenseUserCountSelect":["rP1n",14],"./billing/licenseUserCountSelect.js":["rP1n",14],"./billing/orderDetails":["13Gf",4],"./billing/orderDetails.js":["13Gf",4],"./billing/payingNowRow":["2li0",33],"./billing/payingNowRow.js":["2li0",33],"./billing/promotionDiscountRow":["Bd6S",42],"./billing/promotionDiscountRow.js":["Bd6S",42],"./embed":["pfuu",41],"./embed.js":["pfuu",41],"./export":["QoM4",40],"./export.js":["QoM4",40],"./home/welcome":["CU91",17],"./home/welcome.js":["CU91",17],"./import":["tGn0",39],"./import.js":["tGn0",39],"./partials/clipboard":["gZtH",21],"./partials/clipboard.js":["gZtH",21],"./partials/disqus":["zKj7",23],"./partials/disqus.js":["zKj7",23],"./partials/listing":["1I6g",32],"./partials/listing.js":["1I6g",32],"./passwordStrength":["MbHN",22],"./passwordStrength.js":["MbHN",22],"./sharing/publish":["eujK",31],"./sharing/publish.js":["eujK",31],"./sharing/share":["b+Rw",38],"./sharing/share.js":["b+Rw",38],"./sharing/skoletube":["niBU",37],"./sharing/skoletube.js":["niBU",37],"./socialButtons":["yPx3",28],"./socialButtons.js":["yPx3",28],"./teamStyles":["xWId",7],"./teamStyles.js":["xWId",7],"./training/course":["DWYK",26],"./training/course.js":["DWYK",26],"./training/course_content":["+0Nd",36],"./training/course_content.js":["+0Nd",36],"./training/course_menu":["5jMb",35],"./training/course_menu.js":["5jMb",35],"./training/course_navigation":["2aj7",30],"./training/course_navigation.js":["2aj7",30],"./training/training":["HGQt",16],"./training/training.js":["HGQt",16]};webpackAsyncContext.keys=function(){return Object.keys(map)},webpackAsyncContext.id="46sc",module.exports=webpackAsyncContext},"5cS7":function(module,exports){var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};MM.utils.Url={getHashParams:function(){var hash=window.location.hash;return hash=hash.replace("#",""),hash.toQueryParams()},getOldHashParams:function(){return MM.utils.Url.oldHash?(MM.utils.Url.oldHash=MM.utils.Url.oldHash.replace("#",""),MM.utils.Url.oldHash.toQueryParams()):{}},toHashParams:function(object){return(void 0===object?"undefined":_typeof(object))!=Hash&&(object=new Hash(object)),object.toQueryString()},add:function(property,value){var params=this.getHashParams();params[property]=value,window.location.hash=this.toHashParams(params)},remove:function(property){var params=this.getHashParams();delete params[property],window.location.hash=this.toHashParams(params)}},MM.utils.siteLocation={current:null,setLoc:function(location){MM.utils.siteLocation.current!=location&&(MM.utils.siteLocation.reset(),MM.utils.Url.add(location),MM.utils.siteLocation.current=location)},getLoc:function(){return MM.utils.siteLocation.current},reset:function(){MM.utils.siteLocation.current&&MM.utils.Url.remove(MM.utils.siteLocation.current),MM.utils.siteLocation.current=null}}},"8Dr6":function(module,__webpack_exports__,__webpack_require__){"use strict";(function(ReactDOM,React){var __WEBPACK_IMPORTED_MODULE_0_ui_components_popovers_accountPopover__=__webpack_require__("QTEg"),__WEBPACK_IMPORTED_MODULE_1_app_utils_constants__=__webpack_require__("67vC"),__WEBPACK_IMPORTED_MODULE_2__popover__=__webpack_require__("SZxL");MM.ui={initPageSize:function(){if(mm$("canvas_container")){var parent=mm$("canvas_container").parentNode;MM.ui.page={width:parent.offsetWidth,height:parent.offsetHeight}}else MM.ui.page=document.viewport.getDimensions()},onLoad:function(){Event.observe(window,"resize",MM.ui.onResize),MM.ui.pageTitle=document.title,MM.ui.onResize(),MM.ui.retinize()},onResize:function(event){MM.ui.initPageSize(),0===MM.ui.page.width&&0===MM.ui.page.height&&(MM.ui.page={width:parseInt(MM.status.params.width)||800,height:parseInt(MM.status.params.height)||600});var footer=$("footer"),content=$$("section")[0];if(footer&&footer.getHeight()>0&&content){var diff=MM.ui.page.height-footer.offsetTop-footer.getHeight();diff>0&&content.setStyle({marginBottom:diff+"px"})}"undefined"!=typeof UI&&UI.Registry.onResize()},retinize:function(){window.windowHasLoaded=!0,!__WEBPACK_IMPORTED_MODULE_1_app_utils_constants__.isRetina&&"1"!=MM.status.params.retina||"0"==MM.status.params.retina||MM.utils.getCookie("retina")||MM.utils.setCookie("retina",1,99),"0"==MM.status.params.retina&&MM.utils.setCookie("retina",null)},getScrollBarWidth:function(){var origOverflow=document.body.style.overflow||"";document.body.style.overflow="hidden";var width=document.body.clientWidth;return document.body.style.overflow="scroll",width-=document.body.clientWidth,document.body.style.overflow=origOverflow||"",width},fieldEnable:function(){for(var elements=$A(arguments),i=elements.length;i>0;)mm$(elements[--i]).disabled=!1,Element.removeClassName(elements[i],"disabled")},fieldDisable:function(){for(var elements=$A(arguments),i=elements.length;i>0;)mm$(elements[--i]).disabled=!0,Element.addClassName(elements[i],"disabled")},disableButton:function(){for(var i=0,len=arguments.length;i<len;i++){var elem=arguments[i],element=Object.isElement(elem)?elem:mm$(elem);element&&(element.disabled=!0,element.href&&(element.href_old=element.href,element.removeAttribute?element.removeAttribute("href"):element.href="#"),element.onclick&&(element.onclick_old=element.onclick,element.onclick=null),$(element).observe("ajax:before",Event.stop),addClassName(element,"disabled o-50 h-cd"))}},enableButton:function(){for(var i=0,len=arguments.length;i<len;i++){var elem=arguments[i],element=Object.isElement(elem)?elem:mm$(elem);element&&(element.disabled=!1,element.href_old&&(element.href=element.href_old),element.onclick_old&&(element.onclick=element.onclick_old),$(element).stopObserving("ajax:before",Event.stop),removeClassName(element,"disabled o-50 h-cd"))}},addDisabledOverlay:function(el){el=$(el);var overlay=new Element("div",{style:"position:absolute; z-index:9999; top: 0; left: 0; width:"+el.clientWidth+"px; height:"+el.clientHeight+"px;"});el.parentNode.setStyle({position:"relative"}),el.parentNode.insert(overlay,{before:el})},buttonUnselect:function(){for(var elements=$A(arguments),i=elements.length;i>0;)Element.removeClassName(elements[--i],"selected")},buttonSelect:function(){for(var elements=$A(arguments),i=elements.length;i>0;)Element.addClassName(elements[--i],"selected")},positionPopover:function(popover,options){options=options||{};var correction=options.correction||[0,0],offset=options.offset||popover.options.offset||[0,0],opener=options.opener||popover.opener,arrowSize=[popover.arrow.offsetWidth,popover.arrow.offsetHeight],offsetParent=Element.getOffsetParent(popover.parent),bodyOffset=offsetParent===document.body?Element.viewportOffset(offsetParent):{top:0,left:0},factor=1;"undefined"!=typeof canvas&&canvas&&hasAncestor(opener,canvas.el)&&(factor=App.ui.Zoom.getZoomFactor());var offsetTop,width=popover.parent.clientWidth,height=popover.parent.clientHeight,offsetLeft=(opener.getWidth()*factor-width)/2+correction[0]+offset[0]-bodyOffset.left,position=popover.parent.classNames().detect(function(c){return["above","below","onleft","onright"].indexOf(c)>=0});switch(position){case"onleft":arrowSize.reverse(),offsetLeft=-width-arrowSize[0]+correction[0]+offset[0]-bodyOffset.left,offsetTop=-opener.getHeight()/2+correction[1]+offset[1]-bodyOffset.top,popover.arrow.style.top=-offsetTop+(popover.arrow.getHeight()/2-2)+"px";break;case"onright":arrowSize.reverse(),offsetLeft=opener.getWidth()*factor+arrowSize[0]+correction[0]+offset[0]-bodyOffset.left,offsetTop=-opener.getHeight()/2+correction[1]+offset[1]-bodyOffset.top,popover.arrow.style.top=-offsetTop+(popover.arrow.getHeight()/2-2)+"px";break;case"above":popover.arrow.style.left=(width-arrowSize[0])/2-correction[0]+"px",offsetTop=-height+offset[1]-arrowSize[1]-bodyOffset.top;break;case"below":default:popover.arrow.style.left=(width-arrowSize[0])/2-correction[0]+"px",popover.arrow.style.top="",offsetTop=opener.getHeight()*factor+arrowSize[1]+offset[1]-bodyOffset.top}Element.clonePosition(popover.parent,opener,{offsetTop:offsetTop,offsetLeft:offsetLeft,setWidth:!1,setHeight:!1});var viewportOffset=Element.viewportOffset(popover.parent);viewportOffset!=[0,0]&&(viewportOffset[0]<0?MM.ui.positionPopover(popover,{correction:[correction[0]+10,correction[1]]}):viewportOffset[0]>MM.ui.page.width-width?MM.ui.positionPopover(popover,{correction:[correction[0]-10,correction[1]]}):!hasClassName(popover.parent,"above")&&viewportOffset[1]>MM.ui.page.height-UI.Registry.viewportOffset.bottom-height&&height<viewportOffset[1]?(addClassName(popover.parent,"above"),popover.parent._clearAbove=!0,MM.ui.positionPopover(popover,{correction:correction})):popover.parent.hasClassName("menu")&&"above"===position&&0===popover.parent.select(".subitem").length&&viewportOffset[1]<UI.Registry.viewportOffset.top+20&&(popover.popover.list.setStyle({height:height+viewportOffset[1]-UI.Registry.viewportOffset.top-20+"px",overflow:"auto"}),addClassName(popover.popover.listContainer,"h-overflow"),MM.ui.positionPopover(popover,{correction:correction})))},smartSelect:function(btn,parent,selector){$(parent).select(selector||"a").each(function(el){el.removeClassName("selected")}),$(btn).addClassName("selected")},smartShow:function(element,parent,selector){$(parent).select(selector||"div").each(function(el){el.hide()}),$(element).show()},onSmartClick:function(tab){tab=$(tab),MM.ui.smartSelect(tab,"tab_btns","li"),MM.ui.smartShow("tab_content_"+tab.id.substring(8),"tab_contents",".tabcontent")},bindSmartTabs:function(){$("tab_btns").select("li").each(function(tab){Element.bindOnClick(tab,MM.ui.onSmartClick.bind(this,tab))})},centerAndShow:function(el,effect){var param={top:(MM.ui.page.height-el.getHeight())/2+"px",left:(MM.ui.page.width-el.getWidth())/2+"px"};effect?param.opacity=1:param.visibility="visible",el.setStyle(param)},showBusy:function(msg){MM.ui._activity=new MM.ui.Activity(msg)},hideBusy:function(){MM.ui._activity.close()},getZoomScale:function(dim,options){options=Object.extend({paddingX:0,paddingY:0},options);var containerSize=canvas.getContainerSize(),hScale=containerSize.height/(dim.height+2*options.paddingY),wScale=containerSize.width/(dim.width+2*options.paddingX),scale=hScale>wScale?wScale:hScale;return options.maxScale&&scale>options.maxScale&&(scale=options.maxScale),options.minScale&&scale<options.minScale&&(scale=options.minScale),scale},getColorWithAlpha:function(hexcolor,alpha){return"rgba("+MM.ui.getRGB(hexcolor).join(",")+","+alpha+")"},getRGB:function(hex){return hex=hex.toLowerCase(),[parseInt(hex.slice(0,2),16),parseInt(hex.slice(2,4),16),parseInt(hex.slice(4),16)]},getHEX:function(rgb){return("0"+rgb[0].toString(16)).slice(-2)+("0"+rgb[1].toString(16)).slice(-2)+("0"+rgb[2].toString(16)).slice(-2)},lightenColor:function(hexColor,delta){return this._shadeColor(hexColor,delta,1)},darkenColor:function(hexColor,delta){return this._shadeColor(hexColor,delta,-1)},_shadeColor:function(color,delta,operand){if(6!=color.length)return color;color=this.getRGB(color);for(var i=0;i<3;i++)color[i]+=operand*Math.round(color[i]*delta),color[i]>255&&(color[i]=255),color[i]<0&&(color[i]=0);return this.getHEX(color)},showFlashMessage:function(message,options){options=Object.extend({type:"notice",duration:15},options);var container=mm$("site-flash-messages");container&&(container.innerHTML='<div class="ui-message-bar"><div row class="ui-message '+options.type+'"><div class="ui-icon"></div><div grow><span>'+message+"</span></div></div></div>",removeClassName(container,"h-hidden"),setTimeout(MM.ui.hideFlashMessage,1e3*options.duration))},hideFlashMessage:function(){var container=mm$("site-flash-messages");addClassName(container,"h-hidden")},openHelp:function(topic,subpath){var path="https://support.mindmeister.com/hc/en-us";return subpath&&subpath.length||(subpath="articles"),topic&&(path+="/"+subpath+"/"+topic),window.open(path,"_blank"),!1},buildAccountPopover:function(products,hideLogout){var accountPopover=new __WEBPACK_IMPORTED_MODULE_2__popover__.c("account",{onBeforeShow:function(){if(ServerData.user.anonymous)return MM.ui.dialogs.dialogLogin(user),!1},onShow:function(){ReactDOM.render(React.createElement(__WEBPACK_IMPORTED_MODULE_0_ui_components_popovers_accountPopover__.a,{user:ServerData.user,products:products,hideLogout:hideLogout}),accountPopover.widgetContainer)},onHide:function(){return ReactDOM.unmountComponentAtNode(accountPopover.widgetContainer)}})}},MM.onload.add(MM.ui.onLoad)}).call(__webpack_exports__,__webpack_require__("x9tB"),__webpack_require__("nakD"))},AhJ9:function(module,__webpack_exports__,__webpack_require__){"use strict";Object.defineProperty(__webpack_exports__,"__esModule",{value:!0});var CSS_PREFIXES=(__webpack_require__("3oL9"),__webpack_require__("Fp8Z"),__webpack_require__("s/GO"),__webpack_require__("lxx2"),__webpack_require__("OqGN"),__webpack_require__("VWie"),__webpack_require__("NSIb"),__webpack_require__("5cS7"),__webpack_require__("2SyW"),__webpack_require__("jGtj"),__webpack_require__("uLj8"),__webpack_require__("mH1P"),__webpack_require__("1V60"),__webpack_require__("wcf2"),__webpack_require__("AkyC"),__webpack_require__("HtoY"),__webpack_require__("8Dr6"),__webpack_require__("szEV"),__webpack_require__("s7LD"),__webpack_require__("hV6h"),__webpack_require__("t9BA"),__webpack_require__("oCUf"),__webpack_require__("Myjp"),__webpack_require__("jtks"),__webpack_require__("VkG4"),__webpack_require__("Q1hZ"),__webpack_require__("ZQgP"),__webpack_require__("tCJk"),__webpack_require__("1NHa"),__webpack_require__("2nQK"),{filter:Prototype.Browser.WebKit?"WebkitFilter":"MozFilter"}),CSS_EASE={_default:"ease",in:"ease-in",out:"ease-out","in-out":"ease-in-out",snap:"cubic-bezier(0,1,.5,1)",easeOutExpo:"cubic-bezier(.19,1,.22,1)"},CSS={prefix:function(){var style=document.createElement("dummy").style,prefixes="Webkit Moz O ms Khtml".split(" "),memory=CSS_PREFIXES;return function(prop){if(void 0===memory[prop]){var ucProp=prop.charAt(0).toUpperCase()+prop.substr(1),props=(prop+" "+prefixes.join(ucProp+" ")+ucProp).split(" ");memory[prop]=null;for(var i in props)if(void 0!==style[props[i]]){memory[prop]=props[i];break}}return memory[prop]}}(),set:function(el,props){var key,pkey,pval;for(key in props)props.hasOwnProperty(key)&&(pkey=CSS.prefix(key),pval=props[key],CSS_EASE[pval]&&(pval=CSS_EASE[pval]),null!==pkey&&(el.style[pkey]=props[key]));return el},remove:function(el,props){var pkey;return props.each(function(key){pkey=CSS.prefix(key),removeStyle(el,pkey)}),el},translate:function(t,use3d){for(var key in Object.keys(t)){var keyName=Object.keys(t)[key],value=String(t[keyName]);-1===value.indexOf("%")&&-1===value.indexOf("px")&&(t[keyName]=value+"px")}return use3d?" translate3d("+t.x+","+t.y+","+t.z+") ":" translate("+t.x+","+t.y+")"},rotate:function(r,revert,use3d){var rX=" rotateX("+r.x+"deg) ",rY=" rotateY("+r.y+"deg) ",rZ=" rotateZ("+r.z+"deg) ";return use3d||(rZ=""),revert?rZ+rY+rX:rX+rY+rZ},scale:function(s){return" scale("+s+") "},perspective:function(p,use3d){return use3d?" perspective("+p+"px) ":""},visible:function(element){return"none"!=$(element).style.display&&"0"!=$(element).style.opacity},whichTransitionEvent:function(){var t,el=document.createElement("fakeelement"),transitions={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(t in transitions)if(void 0!==el.style[t])return transitions[t]},Effect:{Appear:function(el){$(el).setStyle({display:"block",opacity:1})},Fade:function(el){$(el).setStyle({opacity:0})},BlindUp:function(el){CSS.set(el,{transform:"scaleY(0)"}),setTimeout(function(){el.hide()},500)},Morph:function(el,options){options=options||{},CSS.set(el,Object.extend(options.style,{transition:"all "+(options.duration||"0.5")+"s ease-in-out"}))}}},css=CSS,core_window=__webpack_require__("TjA0"),popover=__webpack_require__("SZxL");window.GeneralPopover=popover.a,window.Popover=popover.b,window.Window=core_window.b,window.Windows=core_window.c,window.Dialog=core_window.a,window.CSS=css},AkyC:function(module,exports){MM.onfocus=[],MM.onblur=[],MM.onload.add(function(){addClassName(document.body,"visible")}),function(){function onchange(evt){evt=evt||window.event,"focus"==evt.type||"focusin"==evt.type?_onFocus():"blur"==evt.type||"focusout"==evt.type?_onBlur():this[hidden]?_onBlur():_onFocus()}function _onFocus(){removeClassName(document.body,"hidden"),addClassName(document.body,"visible");for(var i=0;i<MM.onfocus.length;i++)MM.onfocus[i]()}function _onBlur(){removeClassName(document.body,"visible"),addClassName(document.body,"hidden");for(var i=0;i<MM.onblur.length;i++)MM.onblur[i]()}var hidden,change,vis={hidden:"visibilitychange",mozHidden:"mozvisibilitychange",webkitHidden:"webkitvisibilitychange",msHidden:"msvisibilitychange",oHidden:"ovisibilitychange"};for(hidden in vis)if(vis.hasOwnProperty(hidden)&&hidden in document){change=vis[hidden];break}change?document.addEventListener(change,onchange):window.onfocus=window.onblur=onchange}()},Fp8Z:function(module,exports){function mm$(id){return document.getElementById(id)}function getStyle(element,style){var value=element.style[style];if(!value||"auto"==value){var css=document.defaultView?document.defaultView.getComputedStyle(element,null):null;value=css?css[style]:null}return"opacity"==style?value?parseFloat(value):1:"auto"==value?null:value}function childElements(element,iterator){var childElements=[];if(!element.hasChildNodes())return[];for(var children=element.childNodes,i=0,len=children.length;i<len;i++){var el=children[i];iterator?1==el.nodeType&&iterator.call(null,el)&&childElements.push(el):1==el.nodeType&&childElements.push(el)}return childElements}function isVisible(element){if(element.style&&"none"==element.style.display)return!1;for(var parent=element.parentNode;parent&&parent!=document;){if(parent.style&&parent.style.display&&"none"==parent.style.display)return!1;parent=parent.parentNode}return!0}function descendants(element,iterator){var desc=[];if(!element.hasChildNodes())return[];for(var children=element.childNodes,i=0,len=children.length;i<len;i++){var el=children[i];1==el.nodeType&&iterator&&iterator.call(null,el)&&desc.push(el),el.hasChildNodes()&&(desc=desc.concat(descendants(el,iterator)))}return desc}function hasAncestor(element,ancestor){for(var found=!1;element&&!found;)found=element.parentNode==ancestor,element=element.parentNode;return found}function nextSibling(element,iterator){var el=element.nextSibling;if(!el)return null;if(iterator){if(1==el.nodeType&&iterator.call(null,el))return el}else if(1==el.nodeType)return el;return nextSibling(el,iterator)}function previousSibling(element,iterator){var el=element.previousSibling;if(!el)return null;if(iterator){if(1==el.nodeType&&iterator.call(null,el))return el}else if(1==el.nodeType)return el;return previousSibling(el,iterator)}function nextTwin(element){return nextSibling(element,function(el){return el.tagName==element.tagName})}function previousTwin(element){return previousSibling(element,function(el){return el.tagName==element.tagName})}function siblings(element,iterator){return descendants(element.parentNode,function(el){return iterator.call(null,el)&&el!=element})}function getDimensionsAsArray(element){return[element.offsetWidth,element.offsetHeight]}function addClassName(element,className){element&&className&&updateClassName(element,className,function(classes,newClass){-1===classes.indexOf(newClass)&&classes.push(newClass)})}function removeClassName(element,className){element&&className&&updateClassName(element,className,function(classes,newClass){var index=classes.indexOf(newClass);index>=0&&classes.splice(index,1)})}function toggleClassName(element,className){hasClassName(element,className)?removeClassName(element,className):addClassName(element,className)}function hasClassName(element,className){return!(!element||!className)&&getClasses(element).indexOf(className)>=0}function hide(element){element.style.display="none"}function show(element){element.style.display=""}function remove(element){element.parentNode.removeChild(element)}function getDataSet(element,key){return void 0===element.dataset?element.getAttribute("data-"+key):element.dataset[key.replace(/-+(.)?/g,function(match,chr){return chr?chr.toUpperCase():""})]}var getClassArray=function(className){return className.split(/\s+/g)},getClasses=function(element){var className=element.getAttribute("class");return className?getClassArray(className):[]},updateClassName=function(element,className,iterator){var classes=getClasses(element);getClassArray(className).forEach(function(newClass){iterator(classes,newClass)}),element.className=classes.join(" ")};window.mm$=mm$,window.getStyle=getStyle,window.childElements=childElements,window.isVisible=isVisible,window.descendants=descendants,window.hasAncestor=hasAncestor,window.nextSibling=nextSibling,window.previousSibling=previousSibling,window.nextTwin=nextTwin,window.previousTwin=previousTwin,window.siblings=siblings,window.getDimensionsAsArray=getDimensionsAsArray,window.addClassName=addClassName,window.removeClassName=removeClassName,window.toggleClassName=toggleClassName,window.hasClassName=hasClassName,window.hide=hide,window.show=show,window.remove=remove,window.getDataSet=getDataSet},HtoY:function(module,exports){window.UI={},window.UI.Registry={elements:[],mode:null,viewportOffset:{top:0,right:0,bottom:0,left:0},add:function(object,options){this.elements.push(object),Object.extend(object,UI.Element),object.properties=options},remove:function(object){this.elements=this.elements.without(object)},notify:function(object,event){object[event+"Handler"]&&"function"==typeof object[event+"Handler"]&&object[event+"Handler"]()},onResize:function(){this.elements.invoke("onResizeHandler")},toggleMode:function(mode){this.mode!=mode&&(this.mode=mode,this.elements.invoke("toggleModeHandler",mode))},toggleFullScreen:function(fullScreen){this.fullScreen!==fullScreen&&(this.elements.invoke("toggleFullScreenHandler",fullScreen),this.fullScreen=fullScreen)},getViewportOffset:function(dim,padding){return this.viewportOffset[dim]+(padding||15)},updateViewportOffset:function(){this.viewportOffset={top:0,right:0,bottom:0,left:0},this.elements.each(function(element){element.visible&&element.viewportSpace&&["top","right","bottom","left"].each(function(p){element.viewportSpace[p]&&(this.viewportOffset[p]+=element.viewportSpace[p])}.bind(this))}.bind(this))}},UI.Element={showHandler:function(){this.visible=!0,this.onResizeHandler(),this.mode!=UI.Registry.mode&&this.toggleModeHandler(UI.Registry.mode)},hideHandler:function(){this.visible=!1,UI.Registry.updateViewportOffset()},onResizeHandler:function(){this.visible&&this.onResize&&this.onResize(),UI.Registry.updateViewportOffset()},toggleModeHandler:function(mode){this.mode=mode,this["to"+mode.capitalize()+"Mode"]&&this["to"+mode.capitalize()+"Mode"]()},toggleFullScreenHandler:function(fullScreen){fullScreen?(this.previouslyVisible=this.visible,this.visible&&"function"==typeof this.hide&&this.hide(!0)):(this.previouslyVisible&&"function"==typeof this.show&&this.show(!0),this.previouslyVisible=null)}}},Myjp:function(module,exports){var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};MM.ui.Lightbox=function(){var x,p,m,b,ic,iu,iw,ih,ia,img,f=0;return{show:function(c,u,w,h,a,t,k){f||(p=new Element("div",{id:"lightbox",class:"popover"+(k?" "+k:"")}),m=new Element("div",{id:"tinymask"}),b=new Element("div",{id:"tinycontent"}),document.body.appendChild(m),document.body.appendChild(p),p.appendChild(b),x=new Element("div",{id:"tinyclose"}).update(MM.ui.icon({name:"closer",size:20})),x.onclick=MM.ui.Lightbox.hide.bind(this),p.appendChild(x),m.onclick=MM.ui.Lightbox.hide.bind(this),window.onresize=MM.ui.Lightbox.resize,f=1),a?(b.style.display="none",p.style.width=p.style.height="100px"):(p.style.width=w?w+"px":"auto",p.style.height=h?h+"px":"auto",p.style.backgroundImage="none"),u||(b.innerHTML=c),this.mask(),ic=c,iu=u,iw=w,ih=h,ia=a,this.alpha(m,1,80,3),t&&setTimeout(function(){MM.ui.Lightbox.hide()},1e3*t),(img=$("tinybox_image"))&&(img.onload=function(event){MM.ui.Lightbox.pos()}),this.keymap=new MM.utils.KeyMap(document,"keymap_lightbox",[{key:MM.utils.KeyEvent.ESC,fn:this.hide.bind(this)}]),this.keymap.enable()},fill:function(c,u,w,h,a){u?(p.style.backgroundImage="",new Ajax.Request(c,{asynchronous:!0,evalScripts:!0,onComplete:function(x){MM.ui.Lightbox.psh(x.responseText,w,h,a)}})):this.psh(c,w,h,a)},psh:function(c,w,h,a){if(a){if(w&&h)b.innerHTML=c;else{var x=p.style.width,y=p.style.height;b.innerHTML=c,p.style.width=w?w+"px":"",p.style.height=h?h+"px":"",b.style.display="",w=parseInt(b.offsetWidth),h=parseInt(b.offsetHeight),b.style.display="none",p.style.width=x,p.style.height=y}this.size(p,w,h,4)}else p.style.backgroundImage="none",b.innerHTML=c},hide:function(){this.keymap&&(this.keymap.disable(),this.keymap=null),MM.ui.Lightbox.alpha(p,-1,0,3)},resize:function(){MM.ui.Lightbox.pos(),MM.ui.Lightbox.mask()},mask:function(){m.style.height=MM.ui.Page.theight()+"px",m.style.width="",m.style.width=MM.ui.Page.twidth()+"px"},pos:function(){var t=MM.ui.Page.height()/2-p.offsetHeight/2;t=t<10?10:t,p.style.top=t+MM.ui.Page.top()+"px",p.style.left=MM.ui.Page.width()/2-p.offsetWidth/2+"px"},alpha:function(e,d,a,s){clearInterval(e.ai),1==d&&(e.style.opacity=0,e.style.filter="alpha(opacity=0)",e.style.display="block",this.pos()),e.ai=setInterval(function(){MM.ui.Lightbox.twalpha(e,a,d,s)},10)},twalpha:function(e,a,d,s){var o=Math.round(100*e.style.opacity);if(o==a)clearInterval(e.ai),-1==d?(e.style.display="none",e==p?MM.ui.Lightbox.alpha(m,-1,0,2):b.innerHTML=p.style.backgroundImage=""):e==m?this.alpha(p,1,100,5):MM.ui.Lightbox.fill(ic,iu,iw,ih,ia);else{var n=o+Math.ceil(Math.abs(a-o)/s)*d;e.style.opacity=n/100,e.style.filter="alpha(opacity="+n+")"}},size:function(e,w,h,s){e="object"==(void 0===e?"undefined":_typeof(e))?e:$(e),clearInterval(e.si);var ow=e.offsetWidth,oh=e.offsetHeight,wo=ow-parseInt(e.style.width),ho=oh-parseInt(e.style.height),wd=ow-wo>w?-1:1,hd=oh-ho>h?-1:1;e.si=setInterval(function(){MM.ui.Lightbox.twsize(e,w,wo,wd,h,ho,hd,s)},10)},twsize:function(e,w,wo,wd,h,ho,hd,s){var ow=e.offsetWidth-wo,oh=e.offsetHeight-ho;Math.abs(w-ow)<5&&Math.abs(h-oh)<5?(clearInterval(e.si),p.style.backgroundImage="none",b.style.display="block"):(ow!=w&&(e.style.width=ow+Math.ceil(Math.abs(w-ow)/s)*wd+"px"),oh!=h&&(e.style.height=oh+Math.ceil(Math.abs(h-oh)/s)*hd+"px"),this.pos())}}}(),MM.ui.Page=function(){return{top:function(){return document.body.scrollTop||document.documentElement.scrollTop},width:function(){return self.innerWidth||document.documentElement.clientWidth},height:function(){return self.innerHeight||document.documentElement.clientHeight},theight:function(){var d=document,b=d.body,e=d.documentElement;return Math.max(Math.max(b.scrollHeight,e.scrollHeight),Math.max(b.clientHeight,e.clientHeight))},twidth:function(){var d=document,b=d.body,e=d.documentElement;return Math.max(Math.max(b.scrollWidth,e.scrollWidth),Math.max(b.clientWidth,e.clientWidth))}}}()},NSIb:function(module,exports){"undefined"==typeof MM&&(MM={}),MM.ua={supportedBrowsers:["Firefox","Safari","Chrome","Internet Explorer","Edge","Opera"],isPhone:!1,isTablet:!1,isBrowser:function(browser,options){options=Object.extend({},options);var userAgent=ServerData.ua;return options.version?userAgent.browser===browser&&userAgent.version&&userAgent.version===options.version:options.maxVersion?userAgent.browser===browser&&userAgent.version&&userAgent.version<=options.maxVersion:options.minVersion?userAgent.browser===browser&&userAgent.version&&userAgent.version>=options.minVersion:userAgent.browser===browser},isSupported:function(){var userAgent=ServerData.ua;return MM.ua.supportedBrowsers.indexOf(userAgent.browser)>=0},isPlatform:function(platform){return ServerData.ua.platform===platform},isNativeApp:function(){return!!(navigator.userAgent.match(/\(MeisterLabs (.+?)\)/)||navigator.userAgent.indexOf("Meistertask-Android")>-1)},observeTouchSafe:function(element,eventName,handler){Event.observe(element,eventName,handler),this.touchEvents()&&Event.observe(element,this.getEvent()[eventName],handler)},stopObservingTouchSafe:function(element,eventName,handler){Event.stopObserving(element,eventName,handler),this.touchEvents()&&Event.stopObserving(element,this.getEvent()[eventName],handler)},touchEvents:function(){return Modernizr.touchevents},getEvent:function(){return this.touchEvents()?{mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend",mousewheel:"gesturechange"}:{mousedown:"mousedown",mousemove:"mousemove",mouseup:"mouseup",mousewheel:"wheel"}},getDeviceType:function(){var ua=navigator.userAgent,type=ua.match(/iPad/i)||ua.match(/tablet/i)&&!ua.match(/RX-34|Windows NT 6\.3|compatible; MSIE \d\.\d/i)||ua.match(/FOLIO/i)?"tablet":ua.match(/Linux/i)&&ua.match(/Android/i)&&!ua.match(/Fennec|mobi|HTC.Magic|HTCX06HT|Nexus.One|SC-02B|fone.945/i)?"tablet":ua.match(/GT-P10|SC-01C|SHW-M180S|SGH-T849|SCH-I800|SHW-M180L|SPH-P100|SGH-I987|zt180|HTC(.Flyer|\_Flyer)|Sprint.ATP51|ViewPad7|pandigital(sprnova|nova)|Ideos.S7|Dell.Streak.7|Advent.Vega|A101IT|A70BHT|MID7015|Next2|nook/i)||ua.match(/MB511/i)&&ua.match(/RUTEM/i)?"tablet":ua.match(/BOLT|Fennec|Iris|Maemo|Minimo|Mobi|mowser|NetFront|Novarra|Prism|RX-34|Skyfire|Tear|XV6875|XV6975|Google.Wireless.Transcoder/i)?"phone":ua.match(/Opera/i)&&ua.match(/Windows.NT.5/i)&&ua.match(/HTC|Xda|Mini|Vario|SAMSUNG\-GT\-i8000|SAMSUNG\-SGH\-i9/i)?"phone":"desktop";addClassName(document.documentElement,type),this["is"+type.charAt(0).toUpperCase()+type.slice(1)]=!0,"phone"!==type&&"tablet"!==type||(addClassName(document.documentElement,"mobile"),this.isMobile=!0),MM.ua.isNativeApp()&&addClassName(document.documentElement,"native")}},MM.ua.getDeviceType()},OqGN:function(module,exports){var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};MM.utils.KeyMap=function(el,id,config,eventName){this.el=$(el),this.id=id,this.eventName=eventName||"keydown",this.bindings=[],this._usefulKeys=new Array,config&&this.addBinding(config),this._listener=this.handleKeyDown.bindAsEventListener(this),this.enable()},MM.utils.KeyMap.prototype={stopEvent:!0,addBinding:function(config){if(Object.isArray(config))for(var i=0,len=config.length;i<len;i++)this.addBinding(config[i]);else{if("string"==typeof config.key){for(var ks=[],keyString=config.key.toUpperCase(),j=0,len=keyString.length;j<len;j++)ks.push(keyString.charCodeAt(j));config.key=ks}Object.isArray(config.key)?config.key.each(function(key){var _config=Object.extend(config,{key:key});this.addSingleBinding(_config)}.bind(this)):this.addSingleBinding(config)}},addSingleBinding:function(config){var keyCode=config.key,shift=config.shift,notShift=config.notShift,ctrl=config.ctrl,notCtrl=config.notCtrl,alt=config.alt,notAlt=config.notAlt,fn=config.fn||config.handler,scope=config.scope,withEvent=config.withEvent,stopEvent=void 0!==config.stopEvent?config.stopEvent:this.stopEvent,usefulKey={code:keyCode,shift:shift,notShift:notShift,ctrl:ctrl,notCtrl:notCtrl,alt:alt,notAlt:notAlt};if(!this.hasUsefulKey(usefulKey)){this.addUsefulKey(usefulKey);var handler=function(e){if(!(shift&&!e.shiftKey||notShift&&e.shiftKey||ctrl&&!e.ctrlKey||notCtrl&&e.ctrlKey||alt&&!e.altKey||notAlt&&e.altKey)){e.getKey()===keyCode&&(stopEvent&&e.stopEvent(),withEvent?fn.call(scope||window,e):fn.call(scope||window))}};this.bindings.push(handler)}},addUsefulKey:function(key){this._usefulKeys=this._usefulKeys.concat(key)},hasUsefulKey:function(key){return this._usefulKeys.any(function(k){return key.code==k.code&&!!k.alt==!!key.alt&&!!k.shift==!!key.shift&&!!k.ctrl==!!key.ctrl&&!!k.notShift==!!key.notShift&&!!k.notCtrl==!!key.notCtrl&&!!k.notAlt==!!key.notAlt})},isUsefulEvent:function(e){var code=e.getKey();return this._usefulKeys.any(function(k){return!(code!=k.code||!!k.alt!=!!e.altKey||!!k.shift!=!!e.shiftKey||!!k.ctrl!=!!e.ctrlKey||k.notShift&&e.shiftKey||k.notCtrl&&e.ctrlKey||k.notAlt&&e.altKey)})},on:function(key,fn,scope){var keyCode,shift,ctrl,alt;"object"!=(void 0===key?"undefined":_typeof(key))||Object.isArray(key)?keyCode=key:(keyCode=key.key,shift=key.shift,key.notShift,ctrl=key.ctrl,key.notCtrl,alt=key.alt,key.notAlt),this.addBinding({key:keyCode,shift:shift,notShift:key.notShift,ctrl:ctrl,notCtrl:key.notCtrl,alt:alt,notAlt:key.notAlt,fn:fn,scope:scope})},handleKeyDown:function(e){if(e=MM.utils.KeyEvent.setEvent(e),this.enabled)for(var b=this.bindings,i=0,len=b.length;i<len;i++)b[i].call(this,e)},isEnabled:function(){return this.enabled},enable:function(){this.enabled||(this.el.observe("keydown",this._listener),this.enabled=!0)},disable:function(){this.enabled&&(this.el.stopObserving("keydown",this._listener),this.enabled=!1)}},MM.utils.KeyEvent=function(){var safariKeys={63234:37,63235:39,63232:38,63233:40,63276:33,63277:34,63272:46,63273:36,63275:35,63237:113,63243:119};return MM.utils.KeyEventImpl=function(e){e&&this.setEvent(e.browserEvent||e)},MM.utils.KeyEventImpl.prototype={browserEvent:null,button:-1,shiftKey:!1,ctrlKey:!1,altKey:!1,metaKey:!1,BACKSPACE:8,TAB:9,RETURN:13,ENTER:13,SHIFT:16,CONTROL:17,ESC:27,SPACE:32,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,F1:112,F2:113,F5:116,F6:117,F8:119,F9:120,F10:121,PLUS:[43,61,107,171,187],MINUS:[95,109,173,189],NINE_FIX:[57,221],QUESTION_MARK:191,setEvent:function(e){return e==this||e&&e.browserEvent?e:(this.browserEvent=e,this.type=e.type,this.shiftKey=e.shiftKey,this.ctrlKey=e.ctrlKey||e.metaKey,this.altKey=e.altKey,this.metaKey=e.metaKey,this.keyCode=e.keyCode,this.charCode=e.charCode,this.target=e.element(),this)},stopEvent:function(){this.browserEvent&&this.browserEvent.stop()},isNavKeyPress:function(){var k=this.keyCode;return(k=Prototype.Browser.WebKit?safariKeys[k]||k:k)>=33&&k<=40||k==this.RETURN||k==this.TAB||k==this.ESC},isSpecialKey:function(){var k=this.keyCode;return"keypress"==this.type&&this.ctrlKey||9==k||13==k||40==k||27==k||16==k||17==k||k>=18&&k<=20||k>=33&&k<=35||k>=36&&k<=39||k>=44&&k<=45},getCharCode:function(){return this.charCode||this.keyCode},getKey:function(){var k=this.keyCode||this.charCode;return Prototype.Browser.WebKit?safariKeys[k]||k:k},hasModifier:function(){return!!(this.ctrlKey||this.altKey||this.shiftKey)}},new MM.utils.KeyEventImpl}()},Q1hZ:function(module,exports){MM.ui.OnOffSlider=Class.create({initialize:function(handle,container,options){this.container=$(container),this.urlOn=options.urlOn,this.urlOff=options.urlOff,this.urlRedirect=options.urlRedirect,this.formElem=$(options.formElem),this.onChange=options.onChange,this.eventClick=this.handleChange.bindAsEventListener(this),this.container.observe("mousedown",this.eventClick),this.setValue(options.initialValue)},setValue:function(value){value?this.container.addClassName("on"):this.container.removeClassName("on"),this.on=value},handleChange:function(event){if(this.customHandler)return this.customHandler(!this.on),void this.setValue(!1);this.setValue(!this.on),this.executeAction(this.getState())},getState:function(){return this.on?"on":"off"},failedOnOff:function(){Dialog.alert('<div id="dialog_onofffailed" align="center"><h2>'+I18n.t("js.your_request_was_not_done")+'</h2></div><br /><div align="center"><h3>'+I18n.t("js.we_are_sorry_request_was_not_done")+"</h3></div>",{buttonClass:"button",okLabel:I18n.t("js.ok"),windowParameters:{width:400,height:200,effectOptions:{},showEffect:handle.show,hideEffect:handle.hide}})},executeAction:function(type){this.formElem&&this.formElem.setValue(this.on),this.onChange?this.onChange(this.on):this.urlRedirect?window.location=this.urlRedirect:"on"==type?new Ajax.Request(this.urlOn,{onFailure:this.failedOnOff.bind(this),onException:this.failedOnOff.bind(this)}):"off"==type&&new Ajax.Request(this.urlOff,{onFailure:this.failedOnOff.bind(this),onException:this.failedOnOff.bind(this)})}})},QTEg:function(module,__webpack_exports__,__webpack_require__){"use strict";(function(React){function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var __WEBPACK_IMPORTED_MODULE_0_ui_components_generic_svgIcon__=__webpack_require__("YmTu"),__WEBPACK_IMPORTED_MODULE_1_ui_components_generic_list_list__=__webpack_require__("worM"),__WEBPACK_IMPORTED_MODULE_2_ui_components_generic_skimmableList_skimmableList__=__webpack_require__("jR5l"),__WEBPACK_IMPORTED_MODULE_3_ui_components_generic_iconLabel__=__webpack_require__("9AMQ"),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),AccountPopover=function(_React$Component){function AccountPopover(){return _classCallCheck(this,AccountPopover),_possibleConstructorReturn(this,(AccountPopover.__proto__||Object.getPrototypeOf(AccountPopover)).apply(this,arguments))}return _inherits(AccountPopover,_React$Component),_createClass(AccountPopover,[{key:"_getItems",value:function(){var _this2=this,items=[{icon:React.createElement(__WEBPACK_IMPORTED_MODULE_0_ui_components_generic_svgIcon__.a,{opts:{name:"settings",size:24,parentClasses:"mr-10"}}),label:I18n.t("js.preferences"),itemClassName:"ph-20",onClick:function(){return _this2.product("mindmeister").selected?MM.ui.dialogs.dialogPreferences():window.location.href=_this2.product("meistertask").url+"/app/dialog/settings"}}];return this.product("meistertask").selected&&items.push({icon:React.createElement(__WEBPACK_IMPORTED_MODULE_0_ui_components_generic_svgIcon__.a,{opts:{name:"statistics",size:24,parentClasses:"mr-10"}}),label:I18n.t("js.statistics"),itemClassName:"ph-20",onClick:function(){return window.location.href=_this2.product("meistertask").url+"/stats/performance"}}),this.props.user.admin&&this.product("mindmeister").selected&&items.push({icon:React.createElement(__WEBPACK_IMPORTED_MODULE_0_ui_components_generic_svgIcon__.a,{opts:{name:"cogwheel",size:24,parentClasses:"mr-10"}}),label:I18n.t("js.admin"),itemClassName:"ph-20",onClick:function(){return window.location.href="/admin/index/"}}),this.props.user.partner&&items.push({icon:React.createElement(__WEBPACK_IMPORTED_MODULE_0_ui_components_generic_svgIcon__.a,{opts:{name:"handshake",size:24,parentClasses:"mr-10"}}),label:I18n.t("js.partner_portal"),itemClassName:"ph-20",onClick:function(){return window.location.href="/partner/overview"}}),items.push({icon:React.createElement(__WEBPACK_IMPORTED_MODULE_0_ui_components_generic_svgIcon__.a,{opts:{name:"help",size:24,parentClasses:"mr-10"}}),label:I18n.t("js.help"),itemClassName:"ph-20",onClick:function(){return _this2.product("mindmeister").selected?MM.ui.dialogs.dialogHelp():window.location.href=_this2.product("meistertask").url+"/app/dialog/help"}}),items.push({icon:React.createElement(__WEBPACK_IMPORTED_MODULE_0_ui_components_generic_svgIcon__.a,{opts:{name:"heart",size:24,parentClasses:"mr-10"}}),label:I18n.t("js.spread_the_love"),itemClassName:"ph-20",onClick:function(){return _this2.product("mindmeister").selected?window.location.href="/affiliate/invite/":window.location.href=_this2.product("meistertask").url+"/content/freemium"}}),this.props.hideLogout||items.push({icon:React.createElement(__WEBPACK_IMPORTED_MODULE_0_ui_components_generic_svgIcon__.a,{opts:{name:"signout",size:24,parentClasses:"mr-10"}}),label:I18n.t("js.signout"),itemClassName:"ph-20",onClick:function(){return window.location.href="/account/logout"}}),items}},{key:"_getInviteTeaser",value:function(){var isMM=this.product("mindmeister").selected,header=isMM?I18n.t("js.get_free_maps"):I18n.t("js.get_free_pro_month"),description=I18n.t("js.invite_users_description_"+(isMM?"mm":"mt")),invite=isMM?"/affiliate/invite":this.product("meistertask").url+"/app/dialog/invite";return React.createElement("div",{className:"mt-10 p-20 bt-1 bc-grey3 ta-center"},React.createElement(__WEBPACK_IMPORTED_MODULE_0_ui_components_generic_svgIcon__.a,{className:"mb-10",opts:{name:"avatars-invite",parentClasses:"h-m-center",size:48,clickable:!1}}),React.createElement("p",{className:"fw-600 mb-5"},header),React.createElement("p",{className:"c-lighter mb-5"},description),React.createElement("a",{href:invite,className:"td-underline"},I18n.t("js.invite")))}},{key:"_getTeasers",value:function(){var inviteTeaser=void 0,label=void 0,link=void 0,target="_self",currentProduct=this.currentProduct(),otherProduct=this.otherProduct(),hasOtherProduct=!!otherProduct.userPlan;return hasOtherProduct?(label=I18n.t("js.switch_to_product",{product:otherProduct.niceName}),link=otherProduct.url):(label=React.createElement("div",{className:"h-flex-row h-flex-wrap justify-sb"},React.createElement("span",{className:"ws-normal mr-10"},I18n.t("js.try_product",{product:otherProduct.niceName})),React.createElement("span",{className:"tt-uppercase fs-10 fw-600 ph-8 pv-2 rad-5 bg-orange ws-normal"},I18n.t("js.it_s_free"))),link="/account/choose?product="+otherProduct.id,target="_blank"),hasOtherProduct&&"basic"===currentProduct.userPlan&&(inviteTeaser=this._getInviteTeaser()),React.createElement("div",null,React.createElement("div",{className:"mt-10 pt-10 bt-1 bc-grey3"},React.createElement("a",{href:link,target:target,className:"widget-container list-widget"},React.createElement("div",{className:"list-widget-item p-r h-flex-row minh-32 pv-6 h-cp h-hover-bg"},React.createElement(__WEBPACK_IMPORTED_MODULE_3_ui_components_generic_iconLabel__.a,{parentClassName:"width-100%",className:"h-cp c-grey h-flex-grow",icon:React.createElement(__WEBPACK_IMPORTED_MODULE_0_ui_components_generic_svgIcon__.a,{opts:{name:"products-"+otherProduct.name,size:24,parentClasses:"mr-10"}}),label:label}),React.createElement("circle",{className:"bg-grey4 s-16 ml-10"},React.createElement(__WEBPACK_IMPORTED_MODULE_0_ui_components_generic_svgIcon__.a,{opts:{name:"arrow-link",size:9,color:"grey2"}}))))),inviteTeaser)}},{key:"product",value:function(name){for(var i=0,len=this.props.products.length;i<len;i++)if(this.props.products[i].name===name)return this.props.products[i];return null}},{key:"currentProduct",value:function(){for(var i=0,len=this.props.products.length;i<len;i++)if(this.props.products[i].selected)return this.props.products[i];return null}},{key:"otherProduct",value:function(){for(var i=0,len=this.props.products.length;i<len;i++)if(!this.props.products[i].selected)return this.props.products[i];return null}},{key:"render",value:function(){var avatar=void 0;avatar=this.props.user.avatar?React.createElement("circle",{className:"h-flex-row justify-center tooltip s-88 z-1",style:{backgroundImage:'url("'+this.props.user.avatar+'")'}}):React.createElement(__WEBPACK_IMPORTED_MODULE_0_ui_components_generic_svgIcon__.a,{opts:{name:"avatars-default",size:88}});var teasers=this._getTeasers(),planColor=this.currentProduct().planColor,planName=this.currentProduct().userPlan?I18n.t("js.plan_"+this.currentProduct().userPlan):null;return React.createElement("div",null,React.createElement("div",{className:"p-20 pt-15 h-flex-column align-items-center"},React.createElement("div",null,avatar,React.createElement("div",{className:"ta-center mb-10 p-r z-2",style:{marginTop:"-8px"}},React.createElement("span",{className:"h-iblock tt-uppercase fs-10 fw-600 ph-8 rad-5 lh-20px bg-"+(planColor||"grey2")},planName))),React.createElement("p",{className:"fs-16 fw-500 lh-140% mb-0",dangerouslySetInnerHTML:{__html:this.props.user.name}}),React.createElement("a",{href:"/account",className:"td-underline fs-14 lh-140% ws-nowrap"},I18n.t("js.myaccount"))),React.createElement(__WEBPACK_IMPORTED_MODULE_2_ui_components_generic_skimmableList_skimmableList__.a,null,React.createElement(__WEBPACK_IMPORTED_MODULE_1_ui_components_generic_list_list__.a,{items:this._getItems()})),teasers)}}]),AccountPopover}(React.Component);AccountPopover.defaultProps={name:"",userPlan:""},__webpack_exports__.a=AccountPopover}).call(__webpack_exports__,__webpack_require__("nakD"))},TjA0:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",function(){return Window}),__webpack_require__.d(__webpack_exports__,"c",function(){return Windows}),__webpack_require__.d(__webpack_exports__,"a",function(){return Dialog});var __WEBPACK_IMPORTED_MODULE_0_app_utils_constants__=__webpack_require__("67vC"),Window=Class.create();Window.keepMultiModalWindow=!1,Window.hasEffectLib="undefined"!=typeof Effect,Window.resizeEffectDuration=.4,Window.prototype={initialize:function(){var id,optionIndex=0;arguments.length>0&&("string"==typeof arguments[0]?(id=arguments[0],optionIndex=1):id=arguments[0]?arguments[0].id:null),id||(id="window_"+(new Date).getTime()),$(id)&&$(id).remove(),this.options=Object.extend({className:"dialog",blurClassName:null,minWidth:100,minHeight:20,userData:null,showEffect:Window.hasEffectLib?Effect.Appear:Element.show,hideEffect:Window.hasEffectLib?Effect.Fade:Element.hide,doNotNotifyHide:!1,showEffectOptions:{},hideEffectOptions:{afterFinish:function(){WindowUtilities.resetBodyOverflow()}},useEffects:!0,effectOptions:null,parent:document.body,title:"",url:null,onload:Prototype.emptyFunction,width:200,height:414,opacity:1,autoRecenter:!0,autoSize:!1,keymap:null,closeCallback:null,destroyOnClose:!1,gridX:1,gridY:1},arguments[optionIndex]||{}),MM.utils.loadCSS([(__WEBPACK_IMPORTED_MODULE_0_app_utils_constants__.isRetina?"x2/":"")+"site/dialogs.css"]),this.options.blurClassName&&(this.options.focusClassName=this.options.className),void 0===this.options.top&&void 0===this.options.bottom&&(this.options.top=this._round(500*Math.random(),this.options.gridY)),void 0===this.options.left&&void 0===this.options.right&&(this.options.left=this._round(500*Math.random(),this.options.gridX)),this.options.effectOptions&&(Object.extend(this.options.hideEffectOptions,this.options.effectOptions),Object.extend(this.options.showEffectOptions,this.options.effectOptions),this.options.showEffect==Element.Appear&&(this.options.showEffectOptions.to=this.options.opacity)),Window.hasEffectLib&&(this.options.showEffect==Effect.Appear&&(this.options.showEffectOptions.to=this.options.opacity),this.options.hideEffect==Effect.Fade&&(this.options.hideEffectOptions.from=this.options.opacity)),this.options.hideEffect==Element.hide&&(this.options.hideEffect=function(){Element.hide(this.element),this.options.destroyOnClose&&this.destroy()}.bind(this)),this.options.parent!=document.body&&(this.options.parent=$(this.options.parent)),this.options.keymap&&this.options.keymap.enable(),this.element=this._createWindow(id),this.element.win=this,this.eventOnLoad=this._getWindowBorderSize.bindAsEventListener(this),this.eventMouseDownContent=this.toFront.bindAsEventListener(this),this.eventResize=this._recenter.bindAsEventListener(this),this.content=$(this.element.id+"_content"),Event.observe(window,"load",this.eventOnLoad),Event.observe(window,"resize",this.eventResize),Event.observe(window,"scroll",this.eventResize),Event.observe(this.options.parent,"scroll",this.eventResize),this.setOpacity(this.options.opacity),this.options.zIndex&&this.setZIndex(this.options.zIndex),this.options.destroyOnClose&&this.setDestroyOnClose(!0),this._getWindowBorderSize(),this.width=this.options.width,this.height=this.options.height,this.visible=!1,this.constraint=!1,this.constraintPad={top:0,left:0,bottom:0,right:0},this.width&&this.height&&this.setSize(this.options.width,this.options.height,null,!0),this.setTitle(this.options.title),Windows.register(this)},destroy:function(){if(this._notify("onDestroy"),Event.stopObserving(this.content,"mousedown",this.eventMouseDownContent),Event.stopObserving(window,"load",this.eventOnLoad),Event.stopObserving(window,"resize",this.eventResize),Event.stopObserving(window,"scroll",this.eventResize),Event.stopObserving(this.content,"load",this.options.onload),this._oldParent){for(var content=this.getContent(),originalContent=null,i=0;i<content.childNodes.length&&(originalContent=content.childNodes[i],1!=originalContent.nodeType);i++)originalContent=null;originalContent&&this._oldParent.appendChild(originalContent),this._oldParent=null}this.sizer&&Event.stopObserving(this.sizer,"mousedown",this.eventMouseDown),this.options.url&&(this.content.src=null),"undefined"!=typeof canvas&&null!==canvas&&canvas.addFocus&&canvas.addFocus(),Element.remove(this.element),Windows.unregister(this)},getContent:function(){return this.content},setContent:function(id,autoresize,autoposition){var element=$(id);if(null==element)throw"Unable to find element '"+id+"' in DOM";this._oldParent=element.parentNode;autoresize&&Element.getDimensions(element),autoposition&&Position.cumulativeOffset(element);var content=this.getContent();this.setHTMLContent(""),content=this.getContent(),content.appendChild(element),element.show(),this.unfixHeight()},setHTMLContent:function(html){if(this.options&&this.options.url){this.content.src=null,this.options.url=null;var content='<div id="'+this.getId()+'_content" class="'+this.options.className.split(" ")[0]+'_content"> </div>';$(this.getId()+"_table_content").innerHTML=content,this.content=$(this.element.id+"_content")}Element.update(this.getContent(),html),this.options.autoSize&&this.updateHeight(!0),""!=html&&this.unfixHeight()},setAjaxContent:function(url,options,showCentered,showModal){this.showFunction=showCentered?"showCenter":"show",this.showModal=showModal||!1,options=options||{},this.setHTMLContent(""),this.onComplete=options.onComplete,this._onCompleteHandler||(this._onCompleteHandler=this._setAjaxContent.bind(this)),options.onComplete=this._onCompleteHandler,options.method="get",new Ajax.Request(url,options),options.onComplete=this.onComplete},_setAjaxContent:function(originalRequest){Element.update(this.getContent(),originalRequest.responseText),this.options.autoSize&&this.updateHeight(),this.onComplete&&this.onComplete(originalRequest),this.onComplete=null,this[this.showFunction](this.showModal),this.unfixHeight()},refresh:function(){this.options.url&&($(this.element.getAttribute("id")+"_content").src=this.options.url)},getId:function(){return this.element.id},setDestroyOnClose:function(){this.options.destroyOnClose=!0},_round:function(val,round){return 1==round?val:val=Math.floor(val/round)*round},_createWindow:function(id){var className=this.options.className,win=new Element("div",{id:id,class:"dialog "+className});this.wrapper=new Element("div",{className:"dialog-wrapper"}),this.inner_win=new Element("div",{class:"dialog-inner"});var content="";return this.options.url?content+='<iframe frameborder="0" name="'+id+'_content"  id="'+id+'_content" src="'+this.options.url+'"> </iframe>':content+='<div id="'+id+'_content" class="'+className.split(" ")[0]+'_content"> </div>',this.options.noHelp||(content+='<a class="p-a ab-30 al-30 help w-30px h-30px" href="#" onclick="return MM.ui.openHelp(MM.status.helpTopic)"></a>'),this.inner_win.innerHTML=content,this.wrapper.appendChild(new Element("div",{id:"dlg_flash_msg",style:"display: none"})),this.wrapper.appendChild(this.inner_win),win.appendChild(this.wrapper),Element.hide(win),this.options.parent.insertBefore(win,this.options.parent.firstChild),Event.observe($(id+"_content"),"load",this.options.onload),win},changeClassName:function(newClassName){var className=this.options.className,id=this.getId();$A(["_content"]).each(function(value){this._toggleClassName($(id+value),className+value,newClassName+value)}.bind(this)),$$("#"+id+" td").each(function(td){td.className=td.className.sub(className,newClassName)}),this.options.className=newClassName},_toggleClassName:function(element,oldClassName,newClassName){element&&(element.removeClassName(oldClassName),element.addClassName(newClassName))},setLocation:function(top,left){top=this._updateTopConstraint(top),left=this._updateLeftConstraint(left);var e=this.currentDrag||this.element;e.setStyle({top:top+"px"}),e.setStyle({left:left+"px"}),this.useLeft=!0,this.useTop=!0},getLocation:function(){var location={};return location=this.useTop?Object.extend(location,{top:this.element.getStyle("top")}):Object.extend(location,{bottom:this.element.getStyle("bottom")}),location=this.useLeft?Object.extend(location,{left:this.element.getStyle("left")}):Object.extend(location,{right:this.element.getStyle("right")})},getSize:function(){return{width:this.width,height:this.height}},setSize:function(width,height,useEffect,forceHeight){if(width=parseFloat(width),height=parseFloat(height),width<this.options.minWidth&&(width=this.options.minWidth),height<this.options.minHeight&&(height=this.options.minHeight),this.options.maxHeight&&height>this.options.maxHeight&&(height=this.options.maxHeight),this.options.maxWidth&&width>this.options.maxWidth&&(width=this.options.maxWidth),this.useTop&&this.useLeft&&Window.hasEffectLib&&Effect.ResizeWindow&&useEffect)new Effect.ResizeWindow(this,null,null,width,height,{duration:Window.resizeEffectDuration});else if(this.width=width,this.height=height,!this.currentDrag||this.currentDrag==this.element){var content=$(this.element.id+"_content");forceHeight&&content.setStyle({height:height+"px"}),content.setStyle({width:width+"px"})}},fixHeight:function(){var div=this.content.select("div")[0];div&&this.content.setStyle({height:div.clientHeight+"px"})},unfixHeight:function(){this.content.setStyle({height:"auto"}),this._recenter()},updateHeight:function(useEffect){var div=this.content.select("div")[0];div&&this.height!=div.clientHeight&&(useEffect&&CSS.set(this.element,{transition:"top 0.2s ease-in-out"}),this.setSize(this.width,div.clientHeight,useEffect),this._recenter(),useEffect&&CSS.set(this.element,{transition:"all 0s ease 0s"}))},toFront:function(){this.element.style.zIndex<Windows.maxZIndex&&this.setZIndex(Windows.maxZIndex+1)},getBounds:function(insideOnly){this.width&&this.height&&this.visible||this.computeBounds();var w=this.width,h=this.height;return insideOnly||(w+=this.widthW+this.widthE,h+=this.heightN+this.heightS),Object.extend(this.getLocation(),{width:w+"px",height:h+"px"})},computeBounds:function(){if(!this.width||!this.height){var size=WindowUtilities._computeSize(this.content.innerHTML,this.content.id,this.width,this.height,0,this.options.className);this.height?this.width=size:this.height=size}this.setSize(this.width,this.height)},show:function(modal){if(!this.visible){if(this.visible=!0,modal){if(void 0===this.overlayOpacity){var that=this;return void setTimeout(function(){that.show(modal)},10)}Windows.addModalWindow(this),this.modal=!0,this.setZIndex(Windows.maxZIndex+1),Windows.unsetOverflow(this)}else this.element.style.zIndex||this.setZIndex(Windows.maxZIndex+1);this.oldStyle&&this.getContent().setStyle({overflow:this.oldStyle}),this.computeBounds(),this._notify("onBeforeShow"),this.options.useEffects?this.options.showEffect!=Element.show&&this.options.showEffectOptions?(this.element.setStyle({opacity:"0.01",display:"block"}),this.options.showEffect(this.element,this.options.showEffectOptions)):this.options.showEffect(this.element):Element.show(this.element),window.canvas&&canvas.removeFocus&&canvas.removeFocus(),WindowUtilities.unsetBodyOverflow(),this._setWrapperWidth(),Windows.focusedWindow=this,this._notify("onShow"),this._recenter(),WindowUtilities.watch(this.inner_win,"height",this._recenter.bind(this))}},showCenter:function(modal,top,left){this.centered=!0,this.centerLeft=left,this.show(modal)},isVisible:function(){return this.visible},_recenter:function(){MM.ui.page.height-this.inner_win.getHeight()>0?CSS.set(this.wrapper,{top:"50%",transform:"translate(-50%, -50%)"}):CSS.remove(this.wrapper,["top","transform"]),this.wrapper.clientWidth!==this.inner_win.clientWidth&&this._setWrapperWidth()},_setWrapperWidth:function(){this.wrapper.setStyle({maxWidth:this.inner_win.clientWidth+"px"})},hide:function(){this.visible=!1,this.modal&&(Windows.removeModalWindow(this),Windows.resetOverflow()),this.options.useEffects?this.options.hideEffect(this.element,this.options.hideEffectOptions):(Element.hide(this.element),this.options.destroyOnClose&&this.destroy()),this.doNotNotifyHide||this._notify("onHide")},close:function(){if(this.visible){if(this.options.closeCallback&&!this.options.closeCallback(this))return;if(this.options.destroyOnClose&&this.options.useEffects){var destroyFunc=this.destroy.bind(this);if(this.options.hideEffectOptions.afterFinish){var func=this.options.hideEffectOptions.afterFinish;this.options.hideEffectOptions.afterFinish=function(){func(),destroyFunc()}}else this.options.hideEffectOptions.afterFinish=function(){destroyFunc()}}this.options.keymap&&this.options.keymap.disable(),Windows.updateFocusedWindow(),this.doNotNotifyHide=!0,this.hide(),this.doNotNotifyHide=!1,window.canvas&&canvas.addFocus&&canvas.addFocus(),this._notify("onClose"),MM.ui.dialogs.reloadOnClose&&setTimeout("window.location.reload()",500),WindowUtilities.unwatch(this.inner_win,"height")}},setOpacity:function(opacity){Element.setOpacity&&Element.setOpacity(this.element,opacity)},setZIndex:function(zindex){this.element.setStyle({zIndex:zindex}),Windows.updateZindex(zindex,this)},setTitle:function(newTitle){},getTitle:function(){return""},_getWindowBorderSize:function(event){this.heightN=20,this.heightS=85,this.widthE=this.widthW=0,this.overlayOpacity=.8},_notify:function(eventName){this.options[eventName]&&this.options[eventName](this),Windows.notify(eventName,this)}};var Windows={windows:[],modalWindows:[],observers:[],focusedWindow:null,maxZIndex:0,overlayShowEffectOptions:{duration:.3},overlayHideEffectOptions:{duration:.3},addObserver:function(observer){this.removeObserver(observer),this.observers.push(observer)},removeObserver:function(observer){this.observers=this.observers.reject(function(o){return o==observer})},notify:function(eventName,win){this.observers.each(function(o){o[eventName]&&o[eventName](eventName,win)})},getWindow:function(id){return this.windows.detect(function(d){return d.getId()==id})},getFocusedWindow:function(){return this.focusedWindow},updateFocusedWindow:function(){this.focusedWindow=this.modalWindows.length>=2?this.modalWindows[this.modalWindows.length-2]:null},addModalWindow:function(win){0==this.modalWindows.length?WindowUtilities.disableScreen(win.options.className,"overlay",win.overlayOpacity,win.getId(),win.options.parent):(Window.keepMultiModalWindow?($("overlay").style.zIndex=Windows.maxZIndex+1,Windows.maxZIndex+=1,WindowUtilities._hideSelect(this.modalWindows.last().getId())):this.modalWindows.last().element.hide(),WindowUtilities._showSelect(win.getId())),this.modalWindows.push(win)},removeModalWindow:function(win){this.modalWindows.pop(),0==this.modalWindows.length?WindowUtilities.enableScreen(win.options.className):Window.keepMultiModalWindow?(this.modalWindows.last().toFront(),WindowUtilities._showSelect(this.modalWindows.last().getId())):this.modalWindows.last().element.show()},register:function(win){this.windows.push(win)},unregister:function(win){this.windows=this.windows.reject(function(d){return d==win})},closeAll:function(){this.windows.each(function(w){Windows.close(w.getId())})},close:function(id,event){var win=this.getWindow(id);win&&win.close(),event&&Event.stop(event)},blur:function(id){var win=this.getWindow(id);win&&(win.options.blurClassName&&win.changeClassName(win.options.blurClassName),this.focusedWindow==win&&(this.focusedWindow=null),win._notify("onBlur"))},focus:function(id){var win=this.getWindow(id);win&&(this.focusedWindow&&this.blur(this.focusedWindow.getId()),win.options.focusClassName&&win.changeClassName(win.options.focusClassName),this.focusedWindow=win,win._notify("onFocus"))},unsetOverflow:function(except){},resetOverflow:function(){},updateZindex:function(zindex,win){zindex>this.maxZIndex&&(this.maxZIndex=zindex,this.focusedWindow&&this.blur(this.focusedWindow.getId())),this.focusedWindow=win,this.focusedWindow&&this.focus(this.focusedWindow.getId())}},Dialog={dialogId:null,onCompleteFunc:null,callFunc:null,parameters:null,confirm:function(){var content=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",parameters=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(content&&"string"!=typeof content)return void Dialog._runAjaxRequest(content,parameters,Dialog.confirm);var okLabel=parameters.okLabel||I18n.t("js.ok"),cancelLabel=parameters.cancelLabel||I18n.t("js.cancel");parameters=Object.extend(parameters,Object.extend(MM.ui.dialogs.defaultOptions(),parameters.windowParameters)),parameters.className=parameters.className||"alert";var okButtonClass=(parameters.okButtonClass||parameters.buttonClass||"")+" ok_button default",cancelButtonClass=(parameters.cancelButtonClass||parameters.buttonClass||"")+" cancel_button mr-10",dlgContent="<div class='"+parameters.className+"_message'>"+content+"</div><div class='"+parameters.className+"_buttons ta-right pt-25'><a href='#' onclick='return Dialog.cancelCallback()' class='"+cancelButtonClass+"'>"+cancelLabel+"</a><a href='#' onclick='return Dialog.okCallback()' class='"+okButtonClass+"'>"+okLabel+"</a></div>";return this._openDialog(dlgContent,parameters)},multipleChoice:function(content,parameters){if(content&&"string"!=typeof content)return void Dialog._runAjaxRequest(content,parameters,Dialog.multipleChoice);parameters=parameters||{},parameters=Object.extend(parameters,Object.extend(MM.ui.dialogs.defaultOptions(),parameters.windowParameters)),parameters.className=parameters.className||"alert";var container=new Element("div"),dlgContent=new Element("div",{className:parameters.className+"_message"}).update(content||""),buttons=new Element("div",{className:parameters.className+"_buttons ta-right pt-25"});return parameters.choices.each(function(choice){var el=new Element("a",{href:"#",className:choice.classes||""}).update(choice.label);el.onclick=function(){return choice.callback(),!1},buttons.insert(el)}),container.insert(dlgContent).insert(buttons),this._openDialog(container,parameters)},alert:function(content,parameters){if(content&&"string"!=typeof content)return void Dialog._runAjaxRequest(content,parameters,Dialog.alert);parameters=parameters||{};var okLabel=parameters.okLabel?parameters.okLabel:I18n.t("js.ok");parameters=Object.extend(Object.extend(MM.ui.dialogs.defaultOptions(),parameters.windowParameters),parameters),parameters.className=parameters.className||"alert";var okButtonClass="class ='"+(parameters.buttonClass?parameters.buttonClass+" ":"")+" ok_button'",content="<div class='"+parameters.className+"_message'>"+content+"</div><div class='"+parameters.className+"_buttons'><input type='button' value='"+okLabel+"' onclick='Dialog.okCallback()' "+okButtonClass+"/></div>";return this._openDialog(content,parameters)},info:function(content,parameters){if(content&&"string"!=typeof content)return void Dialog._runAjaxRequest(content,parameters,Dialog.info);content=content||"",parameters=parameters||{},parameters=Object.extend(Object.extend(MM.ui.dialogs.defaultOptions(),parameters.windowParameters),parameters),parameters.className=parameters.className||"alert";var content="<div id='modal_dialog_message' class='"+parameters.className+"_message'>"+content+"</div>";return parameters.showProgress&&(content+="<div id='modal_dialog_progress' class='"+parameters.className+"_progress'>  </div>"),parameters.ok=null,parameters.cancel=null,this._openDialog(content,parameters)},plain:function(content,parameters){return content=content||"",parameters=parameters||{},parameters=Object.extend({className:"plain",hideOnClick:!0,width:"auto"},parameters),parameters=Object.extend(Object.extend(MM.ui.dialogs.defaultOptions(),parameters.windowParameters),parameters),parameters.ok=null,parameters.cancel=null,this._openDialog(content,parameters)},closeInfo:function(){Windows.close(this.dialogId)},_openDialog:function(content,parameters){var className=parameters.className;if(parameters.height||parameters.width||(parameters.width=MM.ui.page.width/2),parameters.id)this.dialogId=parameters.id;else{var t=new Date;this.dialogId="modal_dialog_"+t.getTime(),parameters.id=this.dialogId}if(!parameters.height||!parameters.width){var size=WindowUtilities._computeSize(content,this.dialogId,parameters.width,parameters.height,5,className);parameters.height?parameters.width=size:parameters.height=size}parameters.effectOptions=parameters.effectOptions,parameters.noHelp=!0;var win=new Window(parameters);return win.getContent().update(content),win.showCenter(!0,parameters.top,parameters.left),win.setDestroyOnClose(),win.unfixHeight(),parameters.hideOnClick&&$("overlay")&&(win.element.onclick=function(){win.close()}),win.cancelCallback=parameters.onCancel||parameters.cancel,win.okCallback=parameters.onOk||parameters.ok,win.noCallback=parameters.onNo||parameters.no,win},_getAjaxContent:function(originalRequest){Dialog.callFunc(originalRequest.responseText,Dialog.parameters)},_runAjaxRequest:function(message,parameters,callFunc){null==message.options&&(message.options={}),Dialog.onCompleteFunc=message.options.onComplete,Dialog.parameters=parameters,Dialog.callFunc=callFunc,message.options.onComplete=Dialog._getAjaxContent,new Ajax.Request(message.url,message.options)},okCallback:function(){var win=Windows.focusedWindow||Windows.getFocusedWindow();return win.okCallback&&!win.okCallback(win)||($$("#"+win.getId()+" input").each(function(element){element.onclick=null}),win.close()),!1},noCallback:function(){var win=Windows.focusedWindow||Windows.getFocusedWindow();return win.noCallback&&!win.noCallback(win)||($$("#"+win.getId()+" input").each(function(element){element.onclick=null}),win.close()),!1},cancelCallback:function(){var win=Windows.focusedWindow;return $$("#"+win.getId()+" input").each(function(element){element.onclick=null}),win.close(),win.cancelCallback&&win.cancelCallback(win),!1}};if(Prototype.Browser.WebKit){var array=navigator.userAgent.match(new RegExp(/AppleWebKit\/([\d\.\+]*)/));Prototype.Browser.WebKitVersion=parseFloat(array[1])}var WindowUtilities={watch:function(el,prop,callback){el["_"+prop]=el.getStyle(prop),el["_"+prop+"_watcher"]=setInterval(function(){el.getStyle(prop)!==el["_"+prop]&&(callback(),el["_"+prop]=el.getStyle(prop))},200)},unwatch:function(el,prop){clearInterval(el["_"+prop+"_watcher"])},disableScreen:function(className,overlayId,overlayOpacity,contentId,parent){WindowUtilities.initLightbox(overlayId,className,function(){this._disableScreen(className,overlayId,overlayOpacity,contentId)}.bind(this),parent||document.body)},_disableScreen:function(className,overlayId,overlayOpacity,contentId){var objOverlay=$(overlayId);objOverlay.style.display="none",objOverlay.className="overlay_"+className;var win=Windows.getFocusedWindow();"overlay"===overlayId&&Window.hasEffectLib&&Windows.overlayShowEffectOptions&&win&&win.options.useEffects?(objOverlay.overlayOpacity=overlayOpacity,new Effect.Appear(objOverlay,Object.extend({from:0,to:overlayOpacity},Windows.overlayShowEffectOptions))):objOverlay.style.display="block"},enableScreen:function(classname,id){classname=classname||"",id=id||"overlay";var objOverlay=$(id);if(objOverlay){if(!objOverlay.hasClassName("overlay_"+classname))return;var win=Windows.getFocusedWindow();"overlay"==id&&Window.hasEffectLib&&Windows.overlayHideEffectOptions&&win&&win.options.useEffects?new Effect.Fade(objOverlay,Object.extend({from:objOverlay.overlayOpacity,to:0},Windows.overlayHideEffectOptions)):(objOverlay.style.display="none",objOverlay.parentNode.removeChild(objOverlay)),"__invisible__"!=id&&WindowUtilities._showSelect()}},_hideSelect:function(id){Prototype.Browser.IE&&(id=null==id?"":"#"+id+" ",$$(id+"select").each(function(element){WindowUtilities.isDefined(element.oldVisibility)||(element.oldVisibility=element.style.visibility?element.style.visibility:"visible",element.style.visibility="hidden")}))},_showSelect:function(id){Prototype.Browser.IE&&(id=null==id?"":"#"+id+" ",$$(id+"select").each(function(element){if(WindowUtilities.isDefined(element.oldVisibility)){try{element.style.visibility=element.oldVisibility}catch(e){element.style.visibility="visible"}element.oldVisibility=null}else element.style.visibility&&(element.style.visibility="visible")}))},isDefined:function(object){return void 0!==object&&null!=object},initLightbox:function(id,className,doneHandler,parent){if($(id))Element.setStyle(id,{zIndex:Windows.maxZIndex+1}),Windows.maxZIndex++,doneHandler();else{var objOverlay=document.createElement("div");objOverlay.setAttribute("id",id),objOverlay.className="overlay_"+className,objOverlay.style.display="none",parent.insertBefore(objOverlay,parent.firstChild),doneHandler()}},unsetBodyOverflow:function(){null==document.body.oldOverflow&&(document.body.oldOverflow=$(document.body).getStyle("overflow")||"auto"),document.body.setStyle({width:document.body.clientWidth+"px",overflow:"hidden"})},resetBodyOverflow:function(){Windows.windows.length>1||(document.body.setStyle({overflow:document.body.oldOverflow}),document.body.oldOverflow=null,setTimeout("document.body.setStyle({width: 'auto'})",100))},_computeSize:function(content,id,width,height,margin,className){var objBody=document.body,tmpObj=document.createElement("div");tmpObj.setAttribute("id",id),tmpObj.className=className+"_content",height?tmpObj.style.height=height+"px":tmpObj.style.width=width+"px",tmpObj.style.position="absolute",tmpObj.style.top="0",tmpObj.style.left="0",tmpObj.style.display="none",tmpObj.innerHTML=content,objBody.insertBefore(tmpObj,objBody.firstChild);var size;return size=height?$(tmpObj).getDimensions().width+margin:$(tmpObj).getDimensions().height+margin,objBody.removeChild(tmpObj),size}}},U1S1:function(module,__webpack_exports__,__webpack_require__){"use strict";(function(React){var __WEBPACK_IMPORTED_MODULE_0__mapListItem__=__webpack_require__("jEiH"),MapList=function(props){var _onClick=props.onClick,className=props.className,items=props.items;return React.createElement("div",{className:className},items.map(function(item,idx){return React.createElement(__WEBPACK_IMPORTED_MODULE_0__mapListItem__.a,{key:idx,title:item.title,time:item.updated_at,className:item.className,userName:item.user_name,onClick:function(id){return _onClick(id)},id:item.theme_id,imageSource:"/export/image/"+item.id+"?variable_size=1&width=192&height=128&stf=1",width:96,height:64})}))};__webpack_exports__.a=MapList}).call(__webpack_exports__,__webpack_require__("nakD"))},VWie:function(module,exports){var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};MM.utils.payments={showPrice:function(plan,months,country,field,options){country||(country="United States"),field=mm$(field);var params=_extends({plan:plan,months:months,"billing[country]":country},options);new Ajax.Request("/payments/payment_total_price_remote",{asynchronous:!0,parameters:params,onSuccess:function(transport){var data=transport.responseText.evalJSON(),promotionDiscount=data.promotion?parseFloat(data.promotion.discount):0,price=0,nonDiscountedPrice=0;options.month_split?(price=(data.price/options.month_split).toNiceDecimals().toNiceMoney(data.currency),nonDiscountedPrice=((data.price+promotionDiscount)/options.month_split).toNiceDecimals().toNiceMoney(data.currency)):(price=data.price.toMoney(data.currency),nonDiscountedPrice=(data.price+promotionDiscount).toMoney(data.currency)),field.innerHTML=price,mm$(field.id+"_non_discounted")&&(mm$(field.id+"_non_discounted").innerHTML=nonDiscountedPrice,mm$(field.id+"_non_discounted").style.visibility="visible"),field.style.visibility="visible"}})}}},ZQgP:function(module,exports){Object.extend(MM.ui,{googlePicker:{googleDriveUser:!1,init:function(options){this.options=options,this.options.createNow&&this.load(this.create.bind(this))},load:function(callback){MM.utils.loadScript("https://apis.google.com/js/client.js",function(){setTimeout(function(){if(void 0===gapi.client)return void this.load(callback);gapi.load("picker",{callback:callback}),this.loaded=!0}.bind(this),500)}.bind(this))},create:function(){if(!this.loaded)return void this.load(this.create.bind(this));if(!this.options.googleDriveUser||!this.options.accessToken)return void this.getAccessToken();if("undefined"!=typeof gapi){Windows.close("import");var view=new google.picker.View(google.picker.ViewId.DOCS);this.options.view&&(view=this.options.view),this.options.mimeTypes&&view.setMimeTypes(this.options.mimeTypes);(new google.picker.PickerBuilder).enableFeature(google.picker.Feature.NAV_HIDDEN).setAppId(this.options.appId).setOAuthToken(this.options.accessToken).addView(view).addView(view).setDeveloperKey(this.options.apiKey).setCallback(this.onCreated.bind(this)).build().setVisible(!0)}},onCreated:function(data){if(data.action==google.picker.Action.PICKED){var file=data.docs[0];"uploadAttachment"==this.options.action?sideBar.attachments.onGoogleDriveAttach(file):window.location.href="/external/drive/open?file_id="+file.id}},getAccessToken:function(){new Ajax.Request("/external/drive/access_token",{asynchronous:!0,evalScripts:!0,parameters:{id:this.targetNodeId()},onComplete:function(transport){var response=transport.responseText.evalJSON();response.location?window.location.href=response.location:response.token&&""!==response.token?(MM.ui.googlePicker.options.googleDriveUser=!0,MM.ui.googlePicker.options.accessToken=response.token,MM.ui.googlePicker.create()):Message.show(I18n.t("js.your_request_was_not_done"),Message.ERROR)}})},targetNodeId:function(){if("undefined"!=typeof canvas){var node=canvas.getSelectedNodes()[0];return void 0!==node?node.id:App.config.targetId}return null}}})},hV6h:function(module,exports){var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};MM.ui.ToolTips=Class.create({initialize:function(options){this.options=_extends({duration:200,delay:750,hideOnClick:!0,el:document.body},options),this.tipsArray=[],this.els=[],mm$("tooltips_tip")?(this.objTip=$("tooltips_tip"),this.content=$("tooltip_content")):(this.objTip=new Element("div",{id:"tooltips_tip",className:"tooltips_tip tip",style:"display: none; opacity: 0;"}),this.content=new Element("div",{id:"tooltip_content"}),this.objTip.insert(this.content),document.body.appendChild(this.objTip)),this.mouseOverListener=this.handleMouseOver.bind(this),this.mouseOutListener=this.handleMouseOut.bind(this),this.setupTooltips()},setupTooltips:function(){var _this=this,cnt=0;this.options.el.select(".tooltip").each(function(el){if(el.title&&el.title.length>0)var content=el.title;else{var tipEl=el.select(".tip");if(tipEl&&tipEl[0])var content=tipEl[0].innerHTML}if(content&&content.length>0&&!_this.els.include(el)){var keyShortcut=getDataSet(el,"shortcut");keyShortcut&&(content+="&nbsp;&nbsp;<kbd>"+keyShortcut+"</kbd>"),el.observe("mouseover",_this.mouseOverListener),el.observe("mouseout",_this.mouseOutListener),_this.options.hideOnClick&&el.observe("click",_this.mouseOutListener),_this.els.push(el),_this.tipsArray[cnt]=content,el.tip_num=cnt++,el.removeAttribute("title")}})},position:function(target){if(target){var pos={top:target.getBoundingClientRect().top-document.body.getBoundingClientRect().top,left:target.getBoundingClientRect().left-document.body.getBoundingClientRect().left},top=pos.top+15+target.offsetHeight;hasClassName(target,"above")||top+this.objTip.offsetHeight>window.pageYOffset+window.innerHeight?(this.objTip.style.top=pos.top-15-this.objTip.offsetHeight+"px",addClassName(this.objTip,"above")):(this.objTip.style.top=top+"px",removeClassName(this.objTip,"above"));var left=pos.left+target.offsetWidth/2-this.objTip.offsetWidth/2;left+this.objTip.offsetWidth>window.pageXOffset+window.innerWidth&&(left-=Math.ceil(left+this.objTip.offsetWidth-(window.pageXOffset+window.innerWidth-5))),left<0&&(left=5),this.objTip.style.left=left+"px"}},handleMouseOver:function(event){var _this2=this;event.stop();var target=event.findElement(".tooltip");clearTimeout(this.timer),this.timer=setTimeout(function(){if(target){_this2.content.innerHTML=_this2.tipsArray[target.tip_num],show(_this2.objTip),_this2.tipShown=!0,hasClassName(_this2.objTip,_this2.options.classes)||addClassName(_this2.objTip,_this2.options.classes),_this2.position(target);var image=event.findElement(".tooltip img");image&&(image.alt=""),CSS.set(_this2.objTip,{opacity:1,transitionDuration:_this2.options.duration+"ms"})}},this.options.delay)},handleMouseOut:function(){var _this3=this;this.objTip.style.opacity=0,this.tipShown=!1,clearTimeout(this.timer),this.mouseOutTimer=setTimeout(function(){_this3.objTip&&!_this3.tipShown&&(hide(_this3.objTip),_this3.options.classes&&hasClassName(_this3.objTip,_this3.options.classes)&&removeClassName(_this3.objTip,_this3.options.classes))},this.options.duration)},destroy:function(){var _this4=this;clearTimeout(this.mouseOutTimer),clearTimeout(this.timer),this.els.each(function(el){el.stopObserving("mouseover",_this4.mouseOverListener),el.stopObserving("mouseout",_this4.mouseOutListener),_this4.options.hideOnClick&&el.stopObserving("click",_this4.mouseOutListener),0===el.select(".tip").length&&(el.title=_this4.tipsArray[el.tip_num]),delete el.tip_num}),hide(this.objTip),this.options=null,this.tipsArray=null,this.els=null,this.tipShown=null,this.timer=null,this.objTip=null,this.content=null}}),MM.ui.ToolTips.touchSafe=function(opts){return MM.ua.touchEvents()?null:new MM.ui.ToolTips(opts)},MM.ui.ToolTips.destroyTouchSafe=function(tooltips){!MM.ua.touchEvents()&&tooltips&&tooltips.destroy()}},jEiH:function(module,__webpack_exports__,__webpack_require__){"use strict";(function(React){var __WEBPACK_IMPORTED_MODULE_0_ui_components_generic_lazyLoadingImage__=__webpack_require__("MBgF"),MapListItem=function(props){var _onClick=props.onClick,id=props.id,imageSource=props.imageSource,title=props.title,time=props.time;return React.createElement("div",{className:"h-flex-row pv-10 ph-30 h-cp bg-grey5-hover",onClick:function(){return _onClick(id)}},React.createElement(__WEBPACK_IMPORTED_MODULE_0_ui_components_generic_lazyLoadingImage__.a,{width:"96",height:"64",className:"h-iblock w-96 mr-15 bc-grey3 rad-5px",image:imageSource}),React.createElement("div",{className:"h-flex-grow"},React.createElement("div",{className:"fs-14 fw-400 lh-140% ellipsis"},title),React.createElement("span",{className:"fs-12 c-grey-light"},Date.fromUTC(time).toUIString(!0))))};MapListItem.defaultProps={onClick:function(){}},__webpack_exports__.a=MapListItem}).call(__webpack_exports__,__webpack_require__("nakD"))},jGtj:function(module,exports){MM.utils.Social={load:function(){this.Facebook.load(),this.Twitter.load(),this.Google.load()},share:function(platform,params){return Amplitude.logEvent("share_map_"+platform.toLowerCase()),this.Platforms[platform].openSharePopup(params)},openSharePopup:function(shareUrl,params,opts){opts=Object.extend({winHeight:440,winWidth:600},opts),shareUrl+="?"+Object.toQueryString(params);var winTop=(MM.ui.page.height-opts.winHeight)/2,winLeft=(MM.ui.page.width-opts.winWidth)/2;return{win:window.open(params.async?"":shareUrl,null,"menubar=no,toolbar=no,status=no,width="+opts.winWidth+",height="+opts.winHeight+",top="+winTop+",left="+winLeft),shareUrl:shareUrl}}},MM.utils.Social.Platforms={Facebook:{load:function(onLoaded){window.fbAsyncInit?"undefined"!=typeof FB&&FB.XFBML.parse():(window.fbAsyncInit=function(){if(FB.init({appId:ServerData.keys.fbApp,version:"v2.0",channelUrl:"//www.mindmeister.com/channel.html",status:!0,cookie:!0,xfbml:!1}),FB.XFBML.parse(),"undefined"!=typeof MM)for(var i=0;i<MM.onload.FB.length;i++)MM.onload.FB[i]();onLoaded&&onLoaded()},MM.utils.loadScript("https://connect.facebook.net/"+I18n.localeFull+"/sdk.js#version=v2.0&xfbml=0&appId="+ServerData.keys.fbApp))},openSharePopup:function(params,opts){return params={app_id:ServerData.keys.fbApp,locale:I18n.localeFull,display:"popup",href:params.url||"https://www.mindmeister.com"},MM.utils.Social.openSharePopup("https://www.facebook.com/dialog/share",params,opts)}},Twitter:{load:function(onLoaded){MM.utils.loadScript("https://platform.twitter.com/widgets.js",function(){twttr.widgets.load(),onLoaded&&onLoaded()})},openSharePopup:function(params,opts){return params=Object.extend({text:params.title,via:"mindmeister",url:"https://www.mindmeister.com"},params),MM.utils.Social.openSharePopup("https://twitter.com/intent/tweet",params,opts)}},Google:{load:function(onLoaded){MM.utils.loadScript("https://apis.google.com/js/plusone.js",function(){"undefined"!=typeof gapi&&gapi.plusone&&(gapi.plusone.go(),onLoaded&&onLoaded())})},openSharePopup:function(params,opts){return MM.utils.Social.openSharePopup("https://plus.google.com/share",params,opts)}},Biggerplate:{openSharePopup:function(params){return MM.utils.Social.openSharePopup("https://www.biggerplate.com/share/mindmeister/",{m:params.rootId})}},Pinterest:{openSharePopup:function(params){var imgSize={width:800,height:800},imgUrl=document.location.origin+"/export/image/"+params.rootId+"?variable_size=1&width="+imgSize.width+"&height="+imgSize.height;return MM.utils.Social.openSharePopup("https://www.pinterest.com/pin/create/button/",{url:params.url,description:params.title,media:imgUrl},{winWidth:750,winHeight:680})}},StumbleUpon:{openSharePopup:function(params){return MM.utils.Social.openSharePopup("http://www.stumbleupon.com/submit",{title:params.title,url:params.url},{winHeight:600})}}}},jtks:function(module,exports){MM.ui.LoadingSpinner=function(size,opts){return size=size||64,opts=Object.extend({className:"h-a-center"},opts),new Element("div",{className:opts.className+" loading-spinner-"+size+" w-"+size+" h-"+size})}},lxx2:function(module,exports){MM.utils.File={upload:function(file,url,options){return options=Object.extend({},options),new Ajax.Upload(url,{contentType:"application/octet-stream",requestHeaders:{"X-File-Name":file.name.replace(/[^\x00-\xff]/g,"?"),"X-File-Size":file.size,"X-File-Type":file.type||"application/octet-stream"},postBody:file,onProgress:function(data){options.onProgress&&data.lengthComputable&&options.onProgress(100*data.loaded/data.total)},timeoutDelay:options.timeoutDelay,onTimeOut:options.onTimeOut,onSuccess:options.onSuccess}),{error:!1}},uploadAttachmentFile:function(targetTopics,file,options){if(file.size&&file.size>262144e3)return{error:I18n.t("js.attachment_size_exceeded",{v0:file.name})};var url="/generic_files/upload?"+Object.toQueryString({map_id:App.config.map_id,filetype:"attachment_file",inline:!0,filename:file.name});options.onSuccess=this._handleResponse.bind(this,targetTopics,options),MM.utils.File.upload(file,url,options)},uploadImageFile:function(targetTopics,image,options){if(image.size&&image.size>262144e3)return{error:I18n.t("js.attachment_size_exceeded",{v0:image.name})};var url="/generic_files/upload?"+Object.toQueryString({map_id:App.config.map_id,filetype:"idea_image",locally_stored:1,inline:!0,filename:image.name});options.onSuccess=this._handleResponse.bind(this,targetTopics,options),MM.utils.File.upload(image,url,options)},uploadAttachment:function(targetTopics,url,options){options.parameters=Object.extend({map_id:App.config.map_id},options.parameters),options.onSuccess=this._handleResponse.bind(this,targetTopics,options),new Ajax.Upload(url,options)},uploadImage:function(targetTopics,params,options){params=Object.extend({map_id:App.config.map_id,filetype:"idea_image"},params),new Ajax.Request("/generic_files/upload",{parameters:params,onSuccess:this._handleResponse.bind(this,targetTopics,options)})},_handleResponse:function(nodes,options,transport){var response=transport.responseJSON,options=options||{};nodes.each(function(node){node._listener.removeLoadingFromDrop()}),response.error?407===response.error.code&&"Authentication Needed"===response.error.message?window.location.href=response.error.url:(options.errorCallback&&options.errorCallback(response.error.message),"Upgrade"===response.error.message?MM.ui.dialogs.dialogUpgrade("map_attachments"):response.error.message&&Message.show(response.error.message,Message.ERROR,5)):response.file&&options.successCallback&&options.successCallback(response.file,nodes)}},MM.utils.File.Droppables={drops:[],get:function(element_id){return this.drops.find(function(d){return d.element.id==element_id})},remove:function(element_id){this.drops=this.drops.reject(function(d){return d.element.id==element_id})},add:function(element_id){var element=$(element_id);if(!this.drops.find(function(drop){return drop.element==element})){var options=Object.extend({hoverclass:null,tree:!1,enabled:!1},arguments[1]||{});options.element=element,this.drops.push(options)}},deactivate:function(drop,event){var element=event.target;drop.getElement&&(element=drop.getElement(element)),drop.hoverclass&&element&&Element.removeClassName(element,drop.hoverclass)},activate:function(drop,event){var element=event.target;drop.getElement&&(element=drop.getElement(element)),drop.hoverclass&&element&&Element.addClassName(element,drop.hoverclass),drop.dropEffect&&(event.dataTransfer.dropEffect=drop.dropEffect),event.preventDefault()},onDrop:function(drop,event){event.stopPropagation(),event.preventDefault(),this.last_active&&drop.hoverclass&&Element.removeClassName(this.last_active,drop.hoverclass);var data=new MM.utils.File.DataTransfer(event.dataTransfer);drop.onDrop&&drop.onDrop(event.target,data),this.deactivate(drop,event)},enable:function(drop){drop.enabled||(drop.activateListener||(drop.activateListener=this.activate.bind(this,drop)),drop.deactivateListener||(drop.deactivateListener=this.deactivate.bind(this,drop)),drop.dropListener||(drop.dropListener=this.onDrop.bind(this,drop)),Element.observe(drop.element,"dragenter",drop.activateListener),Element.observe(drop.element,"dragleave",drop.deactivateListener),Element.observe(drop.element,"dragover",drop.activateListener),Element.observe(drop.element,"drop",drop.dropListener),drop.enabled=!0)},disable:function(drop){drop.enabled&&(Element.stopObserving(drop.element,"dragenter",drop.activateListener),Element.stopObserving(drop.element,"dragleave",drop.deactivateListener),Element.stopObserving(drop.element,"dragover",drop.activateListener),Element.stopObserving(drop.element,"drop",drop.dropListener),drop.enabled=!1)}},MM.utils.File.DataTransfer=Class.create({imageTypes:["jpeg","jpg","gif","png","bmp","tiff"],data:null,initialize:function(data){if(this.data=data,this.files=[],this.images=[],this.links=[],this.imageLinks=[],data.files&&data.files.length>0)for(var files=data.files,i=0,len=files.length;i<len;i++){var file=files[i];file.size>0&&(file.type.match(/^image/g)?this.images.push(file):this.files.push(file))}if(this.hasType("text/uri-list")||this.hasType("text/x-moz-url")){var url=data.getData("URL")||data.getData("text/x-moz-url");this.links.push(url)}if(this.hasType("text/html")){var source=/href=\"([^\"]*)\"/.exec(data.getData("text/html"));if(source&&this.links.push(source[1]),source=/src=\"([^\"]*)\"/.exec(data.getData("text/html"))){new RegExp("("+this.imageTypes.join("|")+")$").test(source[1])&&this.imageLinks.push(source[1])}}},hasType:function(type){return this.data.types.contains&&this.data.types.contains(type)||this.data.types.include&&this.data.types.include(type)}})},mH1P:function(module,exports){MM.error={reportException:function(_ref){var exception=_ref.exception,message=_ref.message,_ref$metaData=_ref.metaData,metaData=void 0===_ref$metaData?{}:_ref$metaData;if("undefined"==typeof Bugsnag)throw exception;Bugsnag.notify(exception||new Error(message),{metaData:metaData,severity:"error"})},reportMapException:function(params){var exception=params.exception,message=params.message,_params$metaData=params.metaData,metaData=void 0===_params$metaData?{}:_params$metaData,_params$alertMessage=params.alertMessage,alertMessage=void 0===_params$alertMessage?I18n.t("js.oops_something_went_wrong"):_params$alertMessage,action=params.action;ServerConnection.forcedPageReload=!0,metaData.requestLog=App.requestLog.join(),this.reportException({exception:exception,message:"RELOAD - "+message,metaData:metaData});var timer=5,modal=new MM.ui.Activity('<p class="mb-20"}>'+alertMessage+"</p>"+I18n.t("js.reloading_the_map_in_d",{v0:timer})+"...",{type:"feedback",duration:1e3*timer,windowParameters:{width:300,onClose:function(){action?action():MM.utils.reloadPage()}}});setInterval(function(){timer--,modal.updateMessage('<p class="mb-20"}>'+alertMessage+"</p>"+I18n.t("js.reloading_the_map_in_d",{v0:timer})+"...")},1e3)}}},oCUf:function(module,exports){MM.ui.Notification={show:function(param){param.type.indexOf("title")>=0&&this.showTitle(param),param.type.indexOf("popup")>=0&&this.showPopup(param)},showTitle:function(param){document.body.hasClassName("hidden")&&(this.param=param,this.interval=setInterval(this.setFlashTitle.bind(this),1500),this.clearFlashTitleListener=this.clearFlashTitle.bind(this),MM.onfocus.push(this.clearFlashTitleListener),this.timer=setTimeout(this.clearFlashTitleListener,this.param.timer||6e5))},setFlashTitle:function(){document.title==MM.ui.pageTitle?document.title=this.param.title:document.title=MM.ui.pageTitle},clearFlashTitle:function(){document.title=MM.ui.pageTitle,clearInterval(this.interval),clearTimeout(this.timer),MM.onfocus=MM.onfocus.without(this.clearFlashTitleListener),this.clearFlashTitleListener=null},showPopup:function(param){if(window.webkitNotifications){if(0!=window.webkitNotifications.checkPermission())return void this.requestPermission();if(param.title)var n=window.webkitNotifications.createNotification("/images/logos/mmicon_square_72x72_ipad.png",param.title,param.message||"");else if(param.url)var n=window.webkitNotifications.createHTMLNotification(param.url);return param.persist||(n.ondisplay=function(){setTimeout(function(){this.cancel()}.bind(this),7e3)}.bind(n)),n.show(),n}},requestPermission:function(){Dialog.confirm('<h2>Enable Notifications</h2><p>You need to allow MindMeister to display web notifications . Please click OK and then click "Allow" in the permissions bar on top of this window.</p>',{ok:function(){Dialog.cancelCallback(),window.webkitNotifications.requestPermission()},okLabel:I18n.t("js.ok"),windowParameters:{height:100,width:360}})}}},"s/GO":function(module,exports,__webpack_require__){var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};MM.utils={empty:function(){},reloadPage:function(){window.location.reload()},redirectToSignUp:function(){return window.location.href="/mm/signup/basic",!1},redirectToLogin:function(message){return window.location.href="/account/login"+(message?"?message="+message:""),!1},setCookie:function(name,value,expiresInDays,path){var t=new Date;t.setTime(t.getTime()+864e5*(null==value?-1:expiresInDays||1)),document.cookie=name+"="+encodeURIComponent(value)+"; expires="+t.toUTCString()+";path="+(path||"/")},getCookie:function(name){var re=new RegExp(name+"=([^;]*);?","gi"),r=re.exec(document.cookie)||[];return r.length>1?decodeURIComponent(r[1]):null},setTimeZone:function(){MM.utils.loadScript("lib/jstz-1.0.4.min.js",function(){var tz=jstz.determine();new Ajax.Request("/account/set_time_zone",{parameters:{tz_name:tz.name()}})},function(){return"undefined"!=typeof jstz})},loadModule:function(asset,callback){__webpack_require__("46sc")("./"+asset).then(function(module){callback&&callback(module)})},loadScript:function(url,callback,test,options){var id=url.split("/").last();if(mm$(id))if(test)var callbackTimer=setInterval(function(){var call=!1;try{call=test.call()}catch(e){}call&&(clearInterval(callbackTimer),callback.call())},100);else callback&&callback();else{0==url.indexOf("//")?url=("https:"==document.location.protocol?"https:":"http:")+url:0!=url.indexOf("http")&&(url=MM.assets.resolve(url));var s=document.createElement("script");if(s.setAttribute("id",id),s.setAttribute("type","text/javascript"),s.setAttribute("src",url),options&&$H(options).each(function(pair){s.setAttribute(pair.key,pair.value)}),callback){if(MM.ua.isBrowser("Safari"))if(test)var callbackTimer=setInterval(function(){var call=!1;try{call=test.call()}catch(e){}call&&(clearInterval(callbackTimer),callback.call())},100);else s.observe("load",callback);else s.onload=function(){callback()};MM.ua.isBrowser("Opera")||(s.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||callback()})}document.getElementsByTagName("head")[0].appendChild(s)}},loadCSS:function(urls){"string"==typeof urls&&(urls=[urls]),urls.each(function(url){url=MM.assets.resolve(url);var id=url.split("/").last();if(!mm$(id)){var l=document.createElement("link");l.setAttribute("type","text/css"),l.setAttribute("rel","stylesheet"),l.setAttribute("id",id),l.setAttribute("href",url),l.setAttribute("media","screen"),document.getElementsByTagName("head")[0].appendChild(l)}})},badBrowser:function(){return(MM.utils.reallyBadBrowser()||!MM.ua.isSupported())&&!this.isGoogleBotFetcher()},reallyBadBrowser:function(){return MM.ua.isBrowser("Internet Explorer",{maxVersion:10})&&"chromeframe"!==navigator.appVersion.toLowerCase().match(/chromeframe/)||MM.ua.isBrowser("Firefox",{maxVersion:6})||MM.ua.isBrowser("Safari",{maxVersion:3})},isGoogleBotFetcher:function(){return MM.ua.isBrowser("Mozilla")},hasFlash:function(){return!!(null!=navigator.plugins&&navigator.plugins.length>0&&(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]))},urlFor:function(path){return"object"==(void 0===path?"undefined":_typeof(path))&&(path=path.controller+"/"+path.action+(path.id?"/"+path.id:"")),ServerData.isLoggedIn||I18n.locale===I18n.defaultLocale||0==path.indexOf("/"+I18n.locale+"/")?path:"/"+I18n.locale+path},validateEmail:function(email){return/^([^@\s]+)@((?:[-a-z0-9]+\.)+[a-z]{2,})$/i.test(email)},highlightText:function(str,sub){return str.replace(new RegExp(RegExp.escape(sub),"gi"),function(sub){return"<em>"+sub+"</em>"})},loadPipe:function(id,callback,params){var data=document.createElement("script");return"https:"==window.location.protocol?data.src="/dialog/auto_link_proxy?_id="+id+"&_render=json&_callback="+callback+"&"+Hash.toQueryString(params):data.src="http://pipes.yahooapis.com/pipes/pipe.run?_id="+id+"&_render=json&_callback="+callback+"&"+Hash.toQueryString(params),document.body.appendChild(data),data},getRequestDetails:function(r,transport,source){var extraInfo=(users&&users.selfUser?"User: "+users.selfUser.id:"Anonymous")+" / "+(tree?"Map: "+tree.root.id:"n/a"),requestInfo="Response delay: "+r.responseDelay+"; Source: "+source;if(transport.getAllHeaders()){var headers=transport.getAllHeaders().split("\n"),runtimeHeader=headers.detect(function(header){return header.indexOf("X-Runtime")>-1});runtimeHeader&&(requestInfo+="; "+runtimeHeader);var requestId=headers.detect(function(header){return header.indexOf("X-Request-Id")>-1});requestId&&(requestInfo+="; "+requestId)}return[extraInfo,requestInfo]},trackEvent:function(name,value){"undefined"!=typeof dataLayer&&dataLayer.push({event:"event",eventCategory:name,eventAction:value})},submitForm:function(form){if(form.readAttribute("data-remote")){var method,url,params;"form"===form.tagName.toLowerCase()?(method=form.readAttribute("method")||"post",url=form.readAttribute("action"),params=form.serialize()):(method=form.readAttribute("data-method")||"get",url=form.readAttribute("href"),params={}),new Ajax.Request(url,{method:method,parameters:params,evalScripts:!0})}},checkPassword:function(submitButton){0===mm$("password").value.length?(submitButton&&MM.ui.fieldEnable(submitButton),MM.ui.dialogs.showError(I18n.t("js.enter_password"))):(submitButton&&!$(submitButton).disabled&&MM.utils.submitForm($("form_confirm_password")),submitButton&&MM.ui.fieldDisable(submitButton))},positionDialog:function(dialog_id){mm$(dialog_id).style.top=(MM.ui.page.height-$(dialog_id).select(".dialog_inner")[0].getHeight())/2-50+"px"},showMapView:function(){$("container").hide(),$("footer").hide(),$("map_editor").show(),document.body.id="map"},buildDynamicPopover:function(elements,maxWidth,options){var index=-1,width=0,totalElements=elements.length;if(0!=totalElements){for(;index<totalElements-1&&width<maxWidth;)index++,width+=elements[index].getWidth()+parseInt(elements[index].getStyle("margin-right"));var popoverElements=[];if(width>=maxWidth)for(var i=index;i<totalElements;i++)elements[i]&&elements[i].id&&options.pushPopoverElements(popoverElements,elements[i]);popoverElements.length>0?show(mm$(options.opener_id)):hide(mm$(options.opener_id)),options.popover.removeElements(),elements=[];for(var i=0,len=popoverElements.length;i<len;i++)elements.push(options.getPopoverElement(popoverElements[i]));options.popover.addElements(elements)}},focusWithoutScrolling:function(el){var focusedWindow=Windows.getFocusedWindow()?Windows.getFocusedWindow().element:document.body,x=focusedWindow.scrollLeft,y=focusedWindow.scrollTop;el.focus(),focusedWindow.scrollLeft=x,focusedWindow.scrollTop=y},clearSelection:function(){var sel;return window.getSelection&&(sel=window.getSelection(),sel.rangeCount>0&&sel.getRangeAt(0).getClientRects().length>0&&sel.removeAllRanges()),sel},addSelection:function(savedSelection){if(savedSelection){var sel=this.clearSelection();sel&&sel.addRange(savedSelection)}},replaceSelection:function(content){if(window.getSelection){var selection=window.getSelection(),range=selection.getRangeAt(0),textNode=document.createTextNode(content);range.deleteContents(),range.insertNode(textNode),range.setStartAfter(textNode),range.collapse(!0),this.addSelection(range)}}}},s7LD:function(module,__webpack_exports__,__webpack_require__){"use strict";(function(ReactDOM,React){var __WEBPACK_IMPORTED_MODULE_0_ui_components_generic_listWithFilter__=__webpack_require__("bPcH"),__WEBPACK_IMPORTED_MODULE_1_ui_components_generic_mapList_mapList__=__webpack_require__("U1S1"),__WEBPACK_IMPORTED_MODULE_2_ui_components_generic_list_list__=__webpack_require__("worM"),__WEBPACK_IMPORTED_MODULE_3_ui_components_generic_svgIcon__=__webpack_require__("YmTu"),__WEBPACK_IMPORTED_MODULE_4_ui_components_invitationWidget_widget__=__webpack_require__("fOgc"),__WEBPACK_IMPORTED_MODULE_5_utils_clipboard_js__=__webpack_require__("mUXm"),__WEBPACK_IMPORTED_MODULE_6_ui_components_shareLinkWidget_shareLinkWidget__=__webpack_require__("SO8C"),_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},noop=function(){return null};MM.ui.dialogs={defaultOptions:function(){var K=MM.utils.KeyEvent,keymap=new MM.utils.KeyMap(document,"dialog_keymap_"+Windows.modalWindows.length,[{key:K.ENTER,stopEvent:!1,fn:function(){var win=Windows.focusedWindow;if(win.okCallback)win.okCallback(win);else{var focused=document.activeElement;if(focused&&"TEXTAREA"===focused.tagName)return;for(var buttons=win.element.select(".button.default"),i=0;buttons[i]&&(!buttons[i].visible()||buttons[i].hasClassName("disabled"));)i++;if(!buttons[i])return;if(MM.utils.focusWithoutScrolling(buttons[i]),buttons[i].hasAttribute("type")&&"submit"===buttons[i].getAttribute("type"))return;var returned=!0;if(buttons[i]&&buttons[i].onclick&&(returned=buttons[i].onclick()),returned){var forms=win.element.select("form");forms[0]&&(forms[0].onsubmit&&(returned=forms[0].onsubmit()),returned&&MM.utils.submitForm(forms[0]))}}}},{key:K.ESC,stopEvent:!1,fn:function(){var win=Windows.focusedWindow;win.cancelCallback?win.cancelCallback():win.close()}}]);return keymap.disable(),{buttonClass:"button",className:"dialog",width:560,zIndex:1100,keymap:keymap,minimizable:!1,maximizable:!1,resizable:!1,autoRecenter:window.innerHeight>480,effectOptions:{duration:.3}}},show:function(dialog,options){var dialogTitle=dialog.indexOf("_")>0?dialog.substring(0,dialog.indexOf("_")):dialog;options=Object.extend({dlg_name:dialogTitle,controller:"dialog",action:dialog+"_ajax"},options),"undefined"!=typeof canvas&&null!=canvas&&canvas.removeFocus&&canvas.removeFocus(),document.activeElement&&document.activeElement.blur();var parameters={},url="/"+options.controller+"/"+options.action+"?";return ServerData.isLoggedIn||I18n.locale===I18n.defaultLocale||(url="/"+I18n.locale+url),(options.map_id||options.id)&&(options.map_id?parameters.id="object"===_typeof(options.map_id)?options.map_id.join(","):options.map_id:parameters.id=options.id),options.parameters&&(parameters=Object.extend(parameters,options.parameters)),new Ajax.Request(url+Object.toQueryString(parameters)+(options.param||""),{requestHeaders:options.accept?{Accept:options.accept}:{},onComplete:function(transport){if(transport.responseJSON){var response=transport.responseJSON,error=response.error;if(response.requiredFeature)return void MM.ui.dialogs.dialogUpgrade(response.requiredFeature);if(error)return void(error.code&&407===error.code&&"Authentication Needed"===error.message&&error.url?window.location.href=error.url:error.message&&this.showError(error.message,"error",{duration:10}))}else{var responseText=transport.responseText,win=Windows.getWindow(dialogTitle);win||(win=new Window(options.dlg_name,Object.extend(MM.ui.dialogs.defaultOptions(),options)),win.setDestroyOnClose(),win.showCenter(1),win.setHTMLContent(responseText))}options.onComplete&&options.onComplete(transport.responseJSON)}.bind(this)}),!1},close:function(dlg_name,event){return Windows.close(dlg_name,event),!1},slideTab:function(tab,dlg){var tabsContainer=document.getElementsByClassName("tabs")[0];childElements(tabsContainer,function(tab){removeClassName(tab,"selected")});for(var tabContents=document.getElementsByClassName("tabcontent"),i=0,len=tabContents.length;i<len;i++)hide(tabContents[i]);return addClassName(mm$("btn_"+dlg+"_"+tab),"selected"),show(mm$("tab_"+dlg+"_"+tab)),!1},switchTab:function switchTab(tab,dlg,id,options){options=Object.extend({controller:"dialog",switchOnly:!1,edit:null,params:null},options);var param=options.edit?"&"+options.params:"?"+options.params;if(Windows.focusedWindow.fixHeight(),options.switchOnly||!mm$(dlg+"_form")){var url="/"+options.controller+"/"+dlg+"_"+tab+"_ajax/"+id+(options.edit?"?edit="+options.edit:"")+(options.params?param:"");new Ajax.Request(url,{onComplete:function onComplete(transport){var responseText=transport.responseText;if("{"==responseText[0]){var response=responseText.evalJSON();if(response.error&&response.error.code&&407==response.error.code&&"Authentication Needed"==response.error.message&&response.error.url)return window.location.href=response.error.url,!1}else{var contentType=transport.getResponseHeader("Content-Type");contentType.indexOf("text/javascript;")>=0?eval(responseText):$(dlg+"_content").update(responseText)}Windows.focusedWindow.unfixHeight(),options.onComplete&&options.onComplete()}})}else mm$("tab").value=tab,MM.utils.submitForm(mm$(dlg+"_form"));return!1},showError:function(msg,type,options){options=options||{};var el=$("dlg_flash_msg");el&&(el.className=type||"error",el.update("<p>"+msg+"</p>").show()),options.duration&&setTimeout("MM.ui.dialogs.hideError()",1e3*options.duration)},hideError:function(){$("dlg_flash_msg")&&$("dlg_flash_msg").hide()},dialogSkoletubeLogin:function(widget){return MM.ui.dialogs.show("skoletubelogin",{controller:"skoletube",action:"login_dialog",param:"widget="+widget,height:500,width:260,noHelp:!0,onComplete:function(){sideBar&&sideBar[widget]&&$("skoletubelogin").select(".close")[0].observe("click",sideBar[widget].onCancelSkoletubeLogin.bind(sideBar[widget]))}})},dialogSharing:function(id,opts){return opts=Object.extend({controller:"sharing",action:"index",map_id:id,width:640,autoSize:!0,onClose:function(){}},opts),MM.ui.dialogs.show("sharing",opts)},dialogPublish:function(mapId){return this.show("publish",{controller:"sharing",action:"publish_dialog",map_id:mapId,width:540})},dialogGetShareableLink:function(props){return Dialog.alert("<h2>"+I18n.t("js.sharing_link")+'</h2><div id="dlg_get_shareable_link_content"></div>',{buttonClass:"button default",windowParameters:{width:400,onShow:function(){ReactDOM.render(React.createElement(__WEBPACK_IMPORTED_MODULE_6_ui_components_shareLinkWidget_shareLinkWidget__.a,props),mm$("dlg_get_shareable_link_content"))}}})},dialogPublishConfirmation:function(mapId,callbacks){var _callbacks$okCallback=callbacks.okCallback,okCallback=void 0===_callbacks$okCallback?noop:_callbacks$okCallback,_callbacks$successCal=callbacks.successCallback,successCallback=void 0===_callbacks$successCal?noop:_callbacks$successCal,_callbacks$cancelCall=callbacks.cancelCallback,cancelCallback=void 0===_callbacks$cancelCall?noop:_callbacks$cancelCall;Dialog.confirm("<h2>"+I18n.t("js.publish_map")+"</h2><p>"+I18n.t("js.publish_map_warning")+"</p>",{ok:function(){this.close(),okCallback(),new Ajax.Request("/sharing/set_public/"+mapId+"?public=true",{onSuccess:function(){return successCallback()},onError:function(){cancelCallback()}})},cancel:function(){this.close(),cancelCallback()},okLabel:I18n.t("js.publish_map"),windowParameters:{height:100,width:400,buttonClass:"button"}})},dialogLogin:function(user){var avatarUrl=user.fullsizeAvatar?user.fullsizeAvatar:user.avatar;Dialog.multipleChoice('<div onclick="return Dialog.cancelCallback();">'+MM.ui.icon({name:"close",size:14,color:"grey-light",parentClasses:"ml-auto"})+'</div><div class="ta-center"><span class="h-flex-row mt-5 mb-40 justify-center"><img class="s-100 rad-100%" src="'+avatarUrl+'"></span><h1 class="mb-0 fw-300 lh-100%">'+I18n.t("js.signup_dialog_greeting",{name:user.name})+'</h1><h2 class="mb-30 c-grey-lighter fw-300 fs-20">'+I18n.t("js.signup_dialog_subheadline")+'</h2><p class="mb-20">'+I18n.t("js.signup_dialog_paragraph2")+"</p></div>",{choices:[{label:I18n.t("js.login"),callback:MM.utils.redirectToLogin,classes:"td-underline cancel_button mr-10"},{label:I18n.t("js.sign_up_c"),callback:MM.utils.redirectToSignUp,classes:"button ok_button default"}],windowParameters:{height:200,width:500}})},dialogUserMaps:function(){var content=new Element("div",{id:"user-map-dialog-content"}),closeButton='<div onclick="return Dialog.cancelCallback();">'+MM.ui.icon({name:"close",size:14,color:"grey-light",parentClasses:"ml-auto"})+"</div>",header='<div class="h-flex-row mb-18 justify-sb"><p class="mb-0 fs-18 fw-500">'+I18n.t("js.import_theme")+"</p>"+closeButton+'</div><p class=" mb-16 c-grey-light">'+I18n.t("js.select_theme_from_map")+":</p>",maps=new Element("div",{id:"user-map-dialog-maps",class:"h-400px"}),loader=new Element("div",{class:" loading-spinner-48 w-48 h-48 h-a-center"});return maps.insert(loader),content.insert(header),content.insert(maps),Dialog.info(content.outerHTML,{width:"320px",height:"auto"}),MM.ui.dialogs.show("user_maps",{controller:"maps",action:"get_user_maps",onComplete:function(response){if(0===response.length)return void(mm$("user-map-dialog-content").innerHTML='<h2 class="ta-center">'+I18n.t("js.no_maps")+":</h2>");var selectTheme=function(themeID){var theme=MapTheme.get(themeID);theme?canvas.onSetTheme(theme):(MapTheme.activity=new MM.ui.Activity(I18n.t("js.fetching_theme"),{progress:!0,autoUpdate:!0,duration:1e4}),new Ajax.Request("themes/show/"+themeID,{onComplete:function(transport){MapTheme.closeActivity();var theme=new MapTheme(transport.responseJSON);canvas.onSetTheme(theme)},onError:function(){MapTheme.activity.close(),Message.show(I18n.t("js.error_on_applying_theme_try_again_later"),Message.ERROR)}})),Dialog.cancelCallback()};ReactDOM.render(React.createElement(__WEBPACK_IMPORTED_MODULE_0_ui_components_generic_listWithFilter__.a,{autofocus:!0,filterableAttribute:"title",inputClassName:"w-100% mb-16"},React.createElement(__WEBPACK_IMPORTED_MODULE_1_ui_components_generic_mapList_mapList__.a,{className:"w-380 h-340px h-overflow-y h-h-center-relative",items:response,onClick:selectTheme})),$("user-map-dialog-maps"))}})},dialogInvite:function(id){return this.show("invite",{controller:"sharing",action:"invite_dialog",map_id:id,width:405,autoSize:!0,onComplete:function(){MM.status.helpTopic="218469737-Share-your-map";var collaboratorsTokenizer=ReactDOM.render(React.createElement(__WEBPACK_IMPORTED_MODULE_4_ui_components_invitationWidget_widget__.a,{placeholder:I18n.t("js.email_or_name")}),mm$("sharing-tokenizer")),form=$("form_invite_access"),submitButton=mm$("btn_invite_these");form.onsubmit=function(e){Event.stop(e);var parameters=form.serialize(!0),collaborators=collaboratorsTokenizer.getMembers(),teams=collaboratorsTokenizer.getMembers("share_groups");parameters.collaborators=collaborators,parameters.groups=teams,parameters.permission=collaboratorsTokenizer.isViewOnly()?1:2,submitButton.value=I18n.t("js.button_sending"),MM.ui.disableButton(submitButton),new Ajax.Request(form.action,{parameters:parameters})},mm$("btn_cancel").onclick=function(){return(0===collaboratorsTokenizer.getTokenCount()||confirm(I18n.t("js.cancel_invitations_warning")))&&Windows.close("invite"),!1}}})},dialogTeamEditAccount:function(_ref){var _this=this,userId=_ref.userId,_ref$onSubmitSuccess=_ref.onSubmitSuccess,onSubmitSuccess=void 0===_ref$onSubmitSuccess?function(){return null}:_ref$onSubmitSuccess;return this.show("editaccount",{controller:"team",action:"edit_account",id:userId,width:405,onComplete:function(){var form=mm$("form-edit-account"),submitBtn=mm$("btn_team_edit_account_submit"),onSuccess=function(transport){var _transport$responseJS=transport.responseJSON,user=_transport$responseJS.user,error=_transport$responseJS.error;error?error.close?(Windows.close("editaccount"),MM.ui.showFlashMessage(error.msg,{type:"error"})):(_this.showError(error.msg),submitBtn.value=I18n.t("js.save"),MM.ui.enableButton(submitBtn),Windows.focusedWindow.updateHeight()):(Windows.close("editaccount"),MM.ui.showFlashMessage(I18n.t("js.edit_account_success")),onSubmitSuccess({user:user}))};form.onsubmit=function(){var formData=form.serialize(!0);return submitBtn.value=I18n.t("js.saving"),MM.ui.disableButton(submitBtn),new Ajax.Request("/team/do_edit_account",{parameters:_extends({id:userId},formData),onSuccess:onSuccess}),!1}}})},dialogPreferences:function(options){return MM.ui.dialogs.show("preferences",Object.extend({width:"460",noHelp:!0},options||{}))},dialogExportMap:function(map_id,format,options){return options=Object.extend({controller:"maps",action:"export_ajax/"+map_id,width:520},options),format&&(options.parameters={export_format:format}),MM.utils.loadModule("export",function(module){MM.ui.Export=module.default,MM.ui.dialogs.show("export",options)}),!1},dialogClone:function(){Dialog.confirm("<h2>"+I18n.t("js.clone_public_map")+"</h2><p>"+I18n.t("js.do_you_want_to_clone_map_to_account")+"</p>",{ok:function(){this.close(),ServerConnection.other.cloneMap(App.config.map_id)},okLabel:I18n.t("js.ok"),windowParameters:{height:100,width:260}})},dialogBrowserWarning:function(options,force){return!(MM.utils.getCookie("browserwarning_seen")&&!force)&&(MM.ui.dialogs.show("browserwarning",Object.extend({height:120,noHelp:!0},options)),!0)},dialogBrowserFeatureSupport:function(supportedBrowsers){return!!supportedBrowsers&&MM.ui.dialogs.show("browser_feature_support",{height:120,noHelp:!0,dlg_name:"browser_feature_support",onComplete:function(){for(var browser in supportedBrowsers){var options=supportedBrowsers[browser];options.version&&Object.isNumber(options.version)&&($(browser).select("a")[0].innerHTML+=" "+I18n.t("js.and_above_d",{v0:options.version})),show(mm$(browser))}}})},dialogUpgrade:function(feature,options){return options=Object.extend({controller:"dialog",action:"upgrade",param:"feature="+feature,width:480,height:280,autoSize:!0,noHelp:!0},options),MM.ui.dialogs.show("upgrade",options)},dialogHelp:function(){MM.ui.dialogs.show("help",{width:815,noHelp:!0,onComplete:function(){var params={label_names:"popular",sort_by:"position",locale:"de"===ServerData.user.language?"de":"en-us"};new Ajax.Request("https://mindmeister.zendesk.com/api/v2/help_center/articles.json",{crossDomain:!0,method:"get",parameters:params,onSuccess:function(transport){var data=transport.responseJSON;if(data&&!data.error){var articles=data.articles.slice(0,5).map(function(article){return{icon:React.createElement(__WEBPACK_IMPORTED_MODULE_3_ui_components_generic_svgIcon__.a,{opts:{name:"help",size:20,consize:20,parentClasses:"mr-5"}}),label:React.createElement("a",{className:"c-default c-blue-hover",target:"_zendesk",href:article.html_url},article.title),className:"fs-14 h-flex-row",backgroundColor:"transparent"}});ReactDOM.render(React.createElement(__WEBPACK_IMPORTED_MODULE_2_ui_components_generic_list_list__.a,{items:articles}),$("js-help-topics"))}}})}})},dialogRemoveCollaborator:function(map,collaborator,who_has,name){if("self"==who_has)var text=I18n.t("js.you_still_have_tasks_sure_want_to_withdraw");else var text=I18n.t("js.s_still_has_tasks_sure_want_to_remove_s",{v0:name,v1:name});Dialog.confirm('<h2 style="font-size:120%; font-weight: bold;">'+I18n.t("js.removing_collaborator")+'</h2><p style="margin-top: 0;">'+text+"</p>",{ok:function(){this.close(),MM.ui.dialogs.doRemoveCollaborator(map,collaborator)},okLabel:I18n.t("js.ok"),windowParameters:{height:140,width:320,tableClass:"small",buttonClass:"button small"}})},doRemoveCollaborator:function(map,collaborator){new Ajax.Request("/sharing/remove/"+map+"?to_remove="+collaborator+"&to_remove_type=User&confirm=true",{asynchronous:!0,evalScripts:!0})},dialogPasteAsMap:function(){Dialog.confirm("<h2>"+I18n.t("js.create_as_map")+'</h2><p class="hint mb20">'+I18n.t("js.create_as_map_explanation")+'</p><p><input type="checkbox" value="true" name="insert_link" id="insert_link" checked />'+I18n.t("js.create_as_map_add_link")+'</p><p><input type="checkbox" value="true" name="insert_back_link" id="insert_back_link" checked />'+I18n.t("js.create_as_map_add_back_link")+'</p><p><input type="checkbox" value="true" name="preserve_permissions" id="preserve_permissions" checked />'+I18n.t("js.create_as_map_preserve_permissions")+"</p>",{buttonClass:"button",okLabel:I18n.t("js.ok"),windowParameters:{width:360},ok:function(){ServerConnection.isPending()||(ServerConnection.pasteAsMap(canvas.selected.node,mm$("insert_link").checked,mm$("preserve_permissions").checked,mm$("insert_back_link").checked),Dialog.cancelCallback())}})},dialogCopyPasteInfo:function(){var ctrl=MM.ua.isPlatform("Macintosh")?"&#8984;":"CTRL",content='<h2>Copy & Paste in MindMeister</h2><p class="mb25">These actions are unavailable via the menu. Instead please use</p><div class="row collapse text-center" style="padding-bottom: 5px;"><div class="column small-4"><kbd>'+ctrl+'</kbd> + <kbd>C</kbd></div><div class="column small-4"><kbd>'+ctrl+'</kbd> + <kbd>X</kbd></div><div class="column small-4"><kbd>'+ctrl+'</kbd> + <kbd>V</kbd></div></div><div class="row collapse text-center" style="border-spacing: 0 5px;"><div class="column small-4">to copy</div><div class="column small-4">to cut</div><div class="column small-4">to paste</div></div>';return Dialog.alert(content,{id:"copy_paste_message",buttonClass:"button default",okLabel:I18n.t("js.ok"),ok:Dialog.closeInfo(),windowParameters:{height:60,width:400}}),!1},dialogTextOutline:function(topic){var url=document.location.protocol+"//"+document.location.host+"/"+topic.id+document.location.search,clipboardButton=void 0;Dialog.alert("<h2>"+I18n.t("js.copy_as_text")+'</h2><div class="tabcontent notabs"><div row class="align-items-start mb-30"><label class="mr-15 ws-prewrap maxw-110">'+I18n.t("js.text_outline")+'</label><div column grow><textarea id="map_text_outline" class="h-190 mb-5">'+Tree.utils.getTextOutline(topic,!0)+'</textarea><label class="checkbox"><input type="checkbox" id="map_text_outline_toggle" class="mr-5" checked />'+I18n.t("js.indent_topics")+'</label></div></div><div row><label class="mr-15 ws-prewrap maxw-110">'+I18n.t("js.direct_link")+'</label><div row grow><input id="topic-link" type="text" style="width: 100%;" value="'+url+'" onclick="this.select();" readonly/><btn id="btn-copy-topic-link" class="blue ml-10">'+I18n.t("js.copy_link")+"</btn></div></div></div>",{buttonClass:"button",okLabel:I18n.t("js.close"),ok:function(win){return win.close()},windowParameters:{width:450,onShow:function(){mm$("map_text_outline_toggle").onchange=function(){$("map_text_outline").value=Tree.utils.getTextOutline(topic,this.checked)},clipboardButton=Object(__WEBPACK_IMPORTED_MODULE_5_utils_clipboard_js__.a)(mm$("btn-copy-topic-link"),{target:function(){return mm$("topic-link")}})},onClose:function(){return clipboardButton.destroy()}}})},historyDialog:function(node_title){__webpack_require__.e(148).then(__webpack_require__.bind(null,"tt9h")).then(function(){return RevisionBrowser.showDialog(null,null,node_title)})},dialogCustomizeTopic:function(_ref2){var themeId=_ref2.themeId;this.show("format_topic",{dlg_name:"formattopic",param:"theme_id="+themeId,width:620,onComplete:function(){__webpack_require__.e(52).then(__webpack_require__.bind(null,"H+A+")).then(function(){return App.ui.Style.init(themeId)})}})},dialogCustomizeTheme:function(_ref3){var themeId=_ref3.themeId;this.show("customtheme_nodes",{id:themeId,width:620,onComplete:function(){MM.status.helpTopic="218435697-Customize",__webpack_require__.e(51).then(__webpack_require__.bind(null,"uiuD")).then(function(){return App.ui.Themes.init(themeId)})}})},showDialogOnLoad:function(){var parameters=MM.utils.Url.getHashParams();if(parameters.dialog||(parameters=MM.utils.Url.getOldHashParams()),parameters.dialog){var dialogName=parameters.dialog.split("_")[0],dialogTab=(parameters.dialog.split("_")[1],parameters.dialog.split("_")[2]);"undefined"!=typeof mapList&&ServerData.isLoggedIn&&parameters.map_id&&setTimeout(function(){mapList.select(parameters.map_id,"map")}.bind(null),1e3);var options={};if(parameters.controller&&Object.extend(options,{controller:parameters.controller}),parameters.action&&Object.extend(options,{action:parameters.action}),parameters.width&&Object.extend(options,{width:parameters.width}),parameters.height&&Object.extend(options,{height:parameters.height}),parameters.noHelp&&Object.extend(options,{noHelp:parameters.noHelp}),parameters.id||dialogTab){var param="&";parameters.id&&(param+="id="+parameters.id),dialogTab&&(param+="&tab="+dialogTab),Object.extend(options,{param:param})}switch("map_properties"==parameters.dialog&&(options.dlg_name="map_properties"),dialogName){case"settings":MM.ui.dialogs.dialogPreferences(options);break;case"export":MM.ui.dialogs.dialogExportMap(App.config.map_id,null,options);break;case"upgrade":var feature=parameters.dialog.replace("upgrade_","");MM.ui.dialogs.dialogUpgrade(feature);break;default:MM.ui.dialogs.show(parameters.dialog,options)}}}},MM.onload.add(MM.ui.dialogs.showDialogOnLoad)}).call(__webpack_exports__,__webpack_require__("x9tB"),__webpack_require__("nakD"))},szEV:function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_gen_icons__=__webpack_require__("lAER"),__WEBPACK_IMPORTED_MODULE_1_lib_meisterutils_mm__=__webpack_require__("POv7"),__WEBPACK_IMPORTED_MODULE_2_lodash_uniqueId__=__webpack_require__("5mMr"),__WEBPACK_IMPORTED_MODULE_2_lodash_uniqueId___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_lodash_uniqueId__);MM=MM||{},MM.ui=MM.ui||{},MM.ui.icon=function(opts){function getIconAttr(attr,value,unit){return value?attr+":"+value+(unit||"")+";":""}var icon=__WEBPACK_IMPORTED_MODULE_0_gen_icons__.a[opts.name];icon||(icon="",console.warn("Icon "+opts.name+" does not exist fool!"));var id=__WEBPACK_IMPORTED_MODULE_2_lodash_uniqueId___default()("svg-"),viewBox=icon.match(/viewBox="(.+?)"/);viewBox=viewBox?viewBox[1]:"",icon=icon.replace(/<svg.+?>/,"").replace("</svg>","").replace(/id-/g,id);var svgHeight=opts.height||opts.size,svgWidth=opts.width||opts.size,parentHeight=opts.conheight||opts.consize||svgHeight,parentWidth=opts.conwidth||opts.consize||svgWidth,clickable=!0;void 0!==opts.clickable&&(clickable=opts.clickable);var cursor=clickable?"h-cp":"";return icon=Object(__WEBPACK_IMPORTED_MODULE_1_lib_meisterutils_mm__.a)("svg",{classes:["maxw-100%",opts.classes,"icon-"+opts.name],viewBox:viewBox,content:icon,style:[getIconAttr("margin-top",opts.offY,"px"),getIconAttr("margin-left",opts.offX,"px"),getIconAttr("fill",MM.Colors[opts.color]?MM.Colors[opts.color].bg:opts.color),getIconAttr("height",svgHeight,"px"),getIconAttr("width",svgWidth,"px"),opts.styles]}),Object(__WEBPACK_IMPORTED_MODULE_1_lib_meisterutils_mm__.a)("div",{classes:["svg-icon h-overflow w-"+parentWidth+" h-"+parentHeight+" "+cursor,opts.parentClasses],content:icon,style:[opts.parentStyles]})},MM.ui.svgIcons=function(el){if(el||(el=mm$(el)),el){var opts={name:getDataSet(el,"icon"),width:getDataSet(el,"width")?Number(getDataSet(el,"width")):null,height:getDataSet(el,"height")?Number(getDataSet(el,"height")):null,offX:getDataSet(el,"off-x")?Number(getDataSet(el,"off-x")):null,offY:getDataSet(el,"off-y")?Number(getDataSet(el,"off-y")):null,size:getDataSet(el,"size")?Number(getDataSet(el,"size")):16,color:getDataSet(el,"color"),parentClasses:getDataSet(el,"parent-classes")?getDataSet(el,"parent-classes"):null,clickable:!getDataSet(el,"clickable")||"true"===getDataSet(el,"clickable")};getDataSet(el,"consize")&&(opts.consize=Number(getDataSet(el,"consize"))),el.innerHTML=MM.ui.icon(opts)}}},t9BA:function(module,exports){var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},renderMessage=function(msg){return new Element("div",{className:"ta-center"}).update(msg)};MM.ui.Activity=Class.create({threshold:50,initialize:function(msg){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.options=options;var content=new Element("div");this.options.icon&&content.insert(MM.ui.icon(_extends({parentClasses:"h-m-center mb-15",size:64},this.options.icon))),content.insert(renderMessage(msg)),this.options.progress&&(this.progressbar=new Element("span"),content.insert(new Element("div",{className:"progress"}).insert(this.progressbar)),this.options.autoUpdate&&(this.increment=this.options.duration?this.options.duration/100:50,this.interval=setInterval(this.update.bind(this),this.increment)),this.progress=0);var dlgOptions=_extends({className:"activity",width:"feedback"===this.options.type?220:340,hideOnClick:!1,keymap:!1},this.options.windowParameters);this.options.type&&(dlgOptions.className=this.options.type),this.window=Dialog.plain(content,dlgOptions),"feedback"===this.options.type&&setTimeout(this.close.bind(this),this.options.duration||1200)},update:function(value){value||(value=this.progress+=1),this.progressbar.style.width=value+"%",this.progress=value,100===this.progress?(addClassName(this.progressbar,"full"),clearInterval(this.interval)):this.options.autoUpdate&&this.progress>this.threshold&&(this.threshold+=5,this.increment=1.2*this.increment,clearInterval(this.interval),this.interval=setInterval(this.update.bind(this),this.increment))},updateMessage:function(msg){this.window.content.update(renderMessage(msg))},close:function(){var _options=this.options,progress=_options.progress;"feedback"===_options.type&&CSS.set(this.window.element,{transform:CSS.scale(1.5),transition:"all 100ms ease"}),progress&&clearInterval(this.interval),this.window.close()}})},tCJk:function(module,exports){MM.ui.evernotePicker={sources:["notebooks","business_notebooks"],init:function(){this.el=$("notes_list"),this.title=$("evernote_dialog_title"),this.subtitle=$("evernote_dialog_subtitle"),this.notebooks=[],this.business_notebooks=[],this.loadNotebooks()},setupTab:function(notebook){var tab=$("evernote_"+notebook+"_tab");removeClassName(tab,"disabled"),tab.observe("click",function(e){e.stop(),$("dlg_evernote").select(".tabs")[0].childElements().invoke("removeClassName","selected"),addClassName(tab,"selected"),this.updateNotebooks(notebook)}.bind(this))},loadNotebooks:function(){this.title.innerHTML=I18n.t("js.evernote.your_notebooks"),this.showLoading(),new Ajax.Request("/external/evernote/list_notebooks",{onComplete:function(transport){var response=transport.responseJSON;if(response.error&&response.error.code&&407==response.error.code&&"Authentication Needed"==response.error.message)return void(window.location.href=response.error.url);this.sources.forEach(function(notebook){response[notebook].length>0&&(this.setupTab(notebook),this[notebook]=response[notebook].map(function(notebookJson){return{id:notebookJson.guid,name:notebookJson.name}}))}.bind(this)),this.updateNotebooks("notebooks")}.bind(this)})},updateNotebooks:function(notebooks){this.title.innerHTML=I18n.t("js.evernote.your_notebooks"),this.el.innerHTML="",this.subtitle.innerHTML="",this[notebooks].each(function(notebookJson){var span=new Element("span",{class:"ellipsis label maxw-225px ml-5px"}).update(notebookJson.name.escapeHTML()),folderIcon=MM.ui.icon({name:"folder",size:20}),link=new Element("a",{href:"#",className:"h-flex-row pv-8 c-default"}).insert(folderIcon);link.appendChild(span),link.onclick=this.expandNotebook.bind(this,notebookJson,notebooks);var listElement=new Element("li",{className:"folder ph-10 bb-1 bc-grey3",id:"note_evernote_"+notebookJson.id});listElement.appendChild(link),this.el.appendChild(listElement)}.bind(this))},expandNotebook:function(notebookJson,notebooks){this.subtitle.innerHTML=I18n.t("js.evernote.notes_in",{notebook:notebookJson.name}),this.el.innerHTML="",this.showLoading();var action="list_notes",business=!1;"business_notebooks"==notebooks&&(action="list_business_notes",business=!0),new Ajax.Request("/external/evernote/"+action+"?dialog=upload_evernote",{parameters:{notebook_id:notebookJson.id},onComplete:function(transport){var response=transport.responseJSON;response.notes?(this.el.innerHTML="",response.notes.each(function(noteJson){var icon=MM.ui.icon({name:"pen",size:14,color:"grey-lighter"}),span=new Element("span",{class:"ellipsis label ml-5px maxw-240"}).update(noteJson.title.escapeHTML()),link=new Element("a",{href:"#",className:"h-flex-row pv-8 c-default",title:new Date(noteJson.updated).toUIString(!0)}).insert(icon);link.appendChild(span),link.onclick=this.attachNote.bind(this,noteJson,business);var listElement=new Element("li",{id:"note_evernote_"+noteJson.id,className:"ph-10 bb-1 bc-grey3"});listElement.appendChild(link),this.el.appendChild(listElement)}.bind(this))):response.error&&response.error.code&&407==response.error.code&&"Authentication Needed"==response.error.message?window.location.href=response.error.url:this.showError()}.bind(this)})},closeDialog:function(){return Windows.close("upload"),!1},attachNote:function(note,business){return sideBar.attachments.onEvernoteAttach(note,business),this.closeDialog()},showLoading:function(){this.el.insert(MM.ui.LoadingSpinner(64))},showError:function(){this.el.innerHTML='<div class="m-10">'+I18n.t("js.an_error_occurred")+"<div>"}}},uLj8:function(module,exports){var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};MM.debug={on:!1,log:function(txt,forceHTML){if(MM.debug.on)if("object"==(void 0===txt?"undefined":_typeof(txt))&&(txt=MM.debug.obj2txt(txt)),forceHTML||"undefined"==typeof console||"function"!=typeof console.log){if(!mm$("html_console")){var el=new Element("div",{id:"html_console"}).setStyle({position:"absolute",top:"50px",left:"10px",width:"340px",height:"100px",zIndex:"9999",backgroundColor:"#ffc",padding:"5px",fontSize:"11px",lineHeight:"11px",overflowY:"scroll"});document.body.appendChild(el)}mm$("html_console").innerHTML+=txt+"<br/>"}else console.log(txt)},profile:function(txt,end){MM.debug.on&&("undefined"!=typeof console&&console.profile?end?console.profileEnd(txt):console.profile(txt):end?d((new Date).getTime()-ieTime+" ms"):ieTime=(new Date).getTime())},obj2txt:function(obj){var props="";for(var prop in obj)if(obj.hasOwnProperty(prop)){var propVal=obj[prop];props+=prop+" ("+(void 0===prop?"undefined":_typeof(prop))+") = ","string"==typeof obj[prop]?propVal+=obj[prop]:null!=propVal&&propVal.toString&&(props+=propVal.toString()),props+="\n"}return props},startPopulating:function(interval){this.populate_interval=setInterval(MM.debug.addNode,interval>0?interval:2e3)},stopPopulating:function(){clearInterval(this.populate_interval)},addNode:function(){var array=[];for(var i in tree.getNodes())array.push(tree.nodes[i]);var parent=array[Math.floor(Math.random()*array.length)];parent&&(parent._listener.select(),canvas.onAdd(),App.activeIPE._textArea.value="a",canvas.selected.select(null,null,!0))}};var d=MM.debug.log;"www.mindmeister.com"==window.location.hostname&&"undefined"!=typeof console&&"function"==typeof console.log&&console.log("Inspecting web pages, huh? At Meister we're looking for people like you, to join us as web developers (JavaScript - React and Redux) in the beautiful city of Vienna, Austria. If you're interested please contact jobs@meisterlabs.com!"),MM.diagnostics={IMG_SIZE:1336,THRESHOLD:2e3,dialogContent:function(){return'<style type="text/css">.dialog table.table_window #dlg_diagnostics td, .dialog table.table_window #dlg_diagnostics th{ padding:5px; vertical-align: top;}#dlg_diagnostics table td { padding: 3px 0; vertical-align: top; }#dlg_diagnostics .img_speed img { vertical-align: -25%; }#dlg_diagnostics .diag_hidden { display: none; } </style><h2>Diagnose Connection</h2><div class="content nopadding nomargin"><div style="padding: 10px 20px 20px 20px;"><form accept-charset="UTF-8" action="/dialog/submit_diagnostics/'+tree.root.id+'" id="diagnostics_form" method="post"><input id="feedback_subject" name="feedback[subject]" type="hidden" value="Browser Diagnostics ('+(ServerData.isLoggedIn?users.selfUser.name:"Anonymous")+')"><input id="feedback_topic" name="feedback[topic]" type="hidden" value="Diagnostics"><input id="feedback_text" name="feedback[text]" type="hidden" value="Browser: '+navigator.userAgent+'<br/>JavaScript is disabled!<br/>"><div id="diagnostics_html"></div>'+(ServerData.isLoggedIn?'<p class="info c-lighter" style="width:510px;margin-top: 20px;">By submitting this information you help us improve MindMeister and find connection and compatibility issues.Please make sure you don\'t download large amounts of data from the internet while using MindMeister.</p>':"")+"</form></div></div>"},diagnosticsSubmit:function(){return mm$("diagnostics_text").value=mm$("diagnostics_html").innerHTML,MM.utils.setCookie("diagnostics_submitted",1,31),mm$("diagnostics_form").submit(),!0},clearDiagnosticsTimeouts:function(){for(var i=0;i<this.diagnosticTimeouts.length;i++)clearTimeout(this.diagnosticTimeouts[i]);return!0},speedTest:function(){var duration=(new Date).getTime()-START_DL;mm$("download_speed")&&($("download_speed").update(Math.round(this.IMG_SIZE/(duration/1e3),2)+" kB/s"),duration<this.THRESHOLD?addClassName(mm$("download_speed"),"ok"):addClassName(mm$("download_speed"),"error"))},addImageTest:function(id,caption,url){this.addResults("<tr><td width=180 align='right'><strong>"+caption+" connection:</strong>&nbsp;</td><td id='"+id+"_test' class='img_speed'>loading...\x3c!----\x3e</td></tr>\n"),setTimeout(function(){this.TIMER[id]=(new Date).getTime();var func=this.imageTest.bind(this,id),testImage=new Image;testImage.onload=func,testImage.src=url+"?random="+Math.random(),setTimeout(func,this.THRESHOLD+1e3)}.bind(this),1e3)},imageTest:function(src){var duration=(new Date).getTime()-this.TIMER[src],el=$(src+"_test");el&&!hasClassName(el,"done")&&(duration<this.THRESHOLD?el.update('<row class="va-middle*"><cell class="w-25">'+MM.ui.icon({name:"checkmark",color:"white",size:12,consize:20,parentClasses:"bg-green rad-100%"})+"</cell><cell>Loaded in "+Math.round(duration,2)+"ms</cell>"):el.update(MM.ui.icon({name:"error",size:20})+'<span class="c-red">Timed out</span>'),addClassName(el,"done"))},failRequest:function(id,nr){var el=$("ajax_result_"+id+"_"+nr);el&&!hasClassName(el,"success")&&(el.addClassName(el,"fail bg-red"),el.title="timed out")},makeTestRequest:function(url,id,nr){var data={idea_id:tree.root.id,zoom_factor:.9},req_data={root:tree.root.id,rev:tree.revision,request_id:nr+1,protocolVersion:ServerConnection.protocolVersion,data:Object.toJSON(data)};new Ajax.Request(url,{parameters:req_data,onSuccess:function(response){if(0===response.status)this.failRequest(id,nr);else{var el=$("ajax_result_"+id+"_"+nr);el&&!hasClassName(el,"fail")&&(el.addClassName(el,"success bg-green"),el.title=(new Date).getTime()-this.TIMER.ajax+" ms")}}.bind(this),onTimeout:this.failRequest.bind(this,id,nr),onFailure:this.failRequest.bind(this,id,nr)})},addResults:function(str){this.resultStr+=str},testConnection:function(){this.diagnosticTimeouts=[],this.TIMER=[],this.resultStr="<table style='margin-top:1em'>",this.addResults("<tr><td valign=top align=right class=tdbrdr><strong>Browser Version String:</strong>&nbsp;</td><td>"+navigator.userAgent+"</td></tr>\n"),this.addImageTest("google","Google","https://www.google.com/images/srpr/logo11w.png"),this.addImageTest("uk","UK","http://www.thetimes.co.uk/tto/public/img/the_times_460.gif"),this.addImageTest("de","DE","https://www.heise.de/icons/ho/heise_online_logo_top.gif"),this.addImageTest("mindmeister","MindMeister","https://www.mindmeister.com/images/products/mindmeister/background.png"),this.addResults("<tr><td width=180 align='right'><strong>AJAX speed:</strong>&nbsp;</td><td id='ajax_speed_mm'><row>"),this.TIMER.ajax=(new Date).getTime();for(var i=1;i<16;i++)this.addResults('<cell><div id="ajax_result_mm_'+i+'" class="s-12 rad-100% bg-grey4"></div></cell>'),this.makeTestRequest("/maps/poll","mm",i),this.diagnosticTimeouts.push(setTimeout(this.failRequest.bind(this,"mm",i),3e3));this.addResults("</row></td></tr>\n"),this.addResults("<tr class='diag_hidden'><td width=180 align='right'><strong>Source:</strong>&nbsp;</td><td>message link</td></tr>\n"),this.addResults("<tr class='diag_hidden'><td width=180 align='right'><strong>Request Log:</strong>&nbsp;</td><td>"+App.requestLog.join().replace(/\n/g,"<br/>")+"</td></tr>\n"),this.addResults("</table>\n"),mm$("diagnostics_html").innerHTML=this.resultStr},runDiagnostic:function(){var dialogOptions={id:"dlg_diagnostics",windowParameters:{title:"Diagnose Connection",width:560,onShow:this.testConnection.bind(this)}};ServerData.isLoggedIn&&!ServerData.user.isAnonymous?(Object.extend(dialogOptions,{buttonClass:"button",okLabel:"Submit to MindMeister",onOk:function(){this.clearDiagnosticsTimeouts(),this.diagnosticsSubmit()}.bind(this),onCancel:this.clearDiagnosticsTimeouts.bind(this)}),Dialog.confirm(this.dialogContent(),dialogOptions)):Dialog.info(this.dialogContent(),dialogOptions)}}},wcf2:function(module,exports){MM.status={params:window.location.href.toQueryParams(),helpTopic:""}}},["AhJ9"]);