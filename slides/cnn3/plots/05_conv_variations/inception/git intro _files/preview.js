/*!
 * Box Content Preview
 * 
 * Copyright 2017 Box, Inc. All rights reserved.
 * 
 * This product includes software developed by Box, Inc. ("Box")
 * (http://www.box.com)
 * 
 * ALL BOX SOFTWARE IS PROVIDED "AS IS" AND ANY EXPRESS OR IMPLIED
 * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
 * IN NO EVENT SHALL BOX BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 * 
 * See the Box license for the specific language governing permissions
 * and limitations under the license.
 */
!function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=93)}([,function(e,t,n){"use strict";n.d(t,"H",function(){return i}),n.d(t,"A",function(){return r}),n.d(t,"I",function(){return o}),n.d(t,"d",function(){return a}),n.d(t,"e",function(){return s}),n.d(t,"f",function(){return l}),n.d(t,"g",function(){return u}),n.d(t,"c",function(){return c}),n.d(t,"h",function(){return h}),n.d(t,"i",function(){return d}),n.d(t,"j",function(){return p}),n.d(t,"k",function(){return f}),n.d(t,"l",function(){return v}),n.d(t,"m",function(){return b}),n.d(t,"n",function(){return m}),n.d(t,"o",function(){return y}),n.d(t,"p",function(){return g}),n.d(t,"q",function(){return E}),n.d(t,"r",function(){return w}),n.d(t,"s",function(){return k}),n.d(t,"u",function(){return _}),n.d(t,"t",function(){return O}),n.d(t,"x",function(){return P}),n.d(t,"y",function(){return S}),n.d(t,"z",function(){return L}),n.d(t,"B",function(){return C}),n.d(t,"F",function(){return x}),n.d(t,"G",function(){return j}),n.d(t,"D",function(){return H}),n.d(t,"E",function(){return T}),n.d(t,"C",function(){return A}),n.d(t,"w",function(){return M}),n.d(t,"v",function(){return V}),n.d(t,"J",function(){return B}),n.d(t,"_3",function(){return I}),n.d(t,"X",function(){return R}),n.d(t,"_4",function(){return D}),n.d(t,"_10",function(){return F}),n.d(t,"_11",function(){return z}),n.d(t,"Z",function(){return U}),n.d(t,"Y",function(){return N}),n.d(t,"_2",function(){return q}),n.d(t,"_0",function(){return W}),n.d(t,"_1",function(){return G}),n.d(t,"_5",function(){return Z}),n.d(t,"_6",function(){return X}),n.d(t,"_7",function(){return K}),n.d(t,"_8",function(){return J}),n.d(t,"_9",function(){return Q}),n.d(t,"T",function(){return Y}),n.d(t,"U",function(){return $}),n.d(t,"a",function(){return ee}),n.d(t,"b",function(){return te}),n.d(t,"O",function(){return ne}),n.d(t,"V",function(){return ie}),n.d(t,"_12",function(){return re}),n.d(t,"_13",function(){return oe}),n.d(t,"_16",function(){return ae}),n.d(t,"_17",function(){return se}),n.d(t,"_18",function(){return le}),n.d(t,"_19",function(){return ue}),n.d(t,"_20",function(){return ce}),n.d(t,"P",function(){return he}),n.d(t,"R",function(){return de}),n.d(t,"S",function(){return pe}),n.d(t,"Q",function(){return fe}),n.d(t,"K",function(){return ve}),n.d(t,"M",function(){return be}),n.d(t,"N",function(){return me}),n.d(t,"_14",function(){return ye}),n.d(t,"_15",function(){return ge}),n.d(t,"L",function(){return Ee}),n.d(t,"W",function(){return we});var i="bp-is-navigation-visible",r="bp-is-hidden",o="bp-loaded",a="bp-btn",s="bp-find-bar",l="bp-has-header",u="bp-header",c="bp-base-header",h="bp-link",d="bp-menu",p="bp-is-mobile",f="bp-overlay",v="bp-overlay-wrapper",b="bp-preload",m="bp-preload-content",y="bp-preload-overlay",g="bp-document-preload-wrapper",E="bp-presentation-preload-wrapper",w="bp-progress-bar",k="bp-progress-bar-container",_="bp-toggle-overlay",O="bp-theme-dark",P="bp-has-keyboard-focus",S="bp-is-fullscreen",L="bp-fullscreen-unsupported",C="bp-is-invisible",x="bp-is-transparent",j="bp-is-visible",H="bp-is-scrollable",T="bp-is-selectable",A="bp-is-buffering",M="bp-dark",V="bp-crawler",B="bp-spinner",I=".bp-container",R=".bp",D=".bp-crawler-wrapper",F=".bp-navigate-left",z=".bp-navigate-right",U=".bp-btn-annotate-point",N=".bp-btn-annotate-draw",q=".bp-btn-print",W=".bp-btn-download",G=".bp-btn-loading-download",Z=".bp-icon",X=".bp-loading-text",K=".bp-loading-wrapper",J=".bp-custom-logo",Q=".bp-default-logo",Y="can_download",$="can_preview",ee="https://api.box.com",te="https://app.box.com",ne="ORIGINAL",ie="jpg",re="success",oe="viewable",ae="[3d][pdf][text][mp3]",se="[jpg?dimensions=1024x1024&paged=false]",le="[jpg?dimensions=2048x2048,png?dimensions=2048x2048]",ue="[dash,mp4][filmstrip]",ce="[mp4]",he=96/72,de=1.25,pe=40,fe=5,ve="1.17.0",be="1.8.0",me="1.12.0",ye="0.112.0",ge="0.114.0",Ee={numbers:"We're sorry, iWork files are not currently supported.",pages:"We're sorry, iWork files are not currently supported.",key:"We're sorry, iWork files are not currently supported."},we="preview.js"},function(e,t,n){"use strict";function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e){if(e.status>=200&&e.status<300)return e;var t=new Error(e.statusText);throw t.response=e,t}function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return fetch(t,{headers:n,method:e,body:JSON.stringify(i)}).then(r).then(N)}function a(){var e=document.querySelector("#downloadiframe");return e||(e=document.createElement("iframe"),e.setAttribute("id","downloadiframe"),e.style.display="none",e=document.body.appendChild(e)),e.contentDocument.write("<head></head><body></body>"),e}function s(e){var t=void 0,n=void 0;"string"==typeof(arguments.length<=1?void 0:arguments[1])?n=arguments.length<=1?void 0:arguments[1]:(t=arguments.length<=1?void 0:arguments[1],n=arguments.length<=2?void 0:arguments[2]),t=t||{},n=n||"json";var i=void 0;switch(n){case"text":i=q;break;case"blob":i=W;break;case"any":i=G;break;case"json":default:i=N}return fetch(e,{headers:t}).then(r).then(i)}function l(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return o.apply(void 0,["post"].concat(t))}function u(e){var t=a();return t.src=e,t}function c(e){var t=a();return t.contentDocument.body.innerHTML=e,t.contentDocument.close(),t}function h(e,t){var n=document.createRange();return n.selectNode(e),n.createContextualFragment(t.replace(/>\s*</g,"><"))}function d(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.insertBefore(h(e,t),n)}function p(e){var t=document.createElement("script");return t.src=e,t.async=!1,t}function f(e){var t=document.createElement("link");return t.rel="prefetch",t.href=e,t}function v(e){var t=document.createElement("link");return t.rel="stylesheet",t.type="text/css",t.href=e,t}function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return t&&(e.Authorization="Bearer "+t),n&&(e.BoxApi="shared_link="+n,i&&(e.BoxApi=e.BoxApi+"&shared_link_password="+i)),z&&(e[I]=z),U&&(e[R]=U),e}function m(e,t){if(!t)return e;var n=new V.a(e);return Object.keys(t).forEach(function(e){var i=t[e];i&&(n.hasQueryParam(e)?n.replaceQueryParam(e,i):n.addQueryParam(e,i))}),n.toString()}function y(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return n||r?m(e,(t={access_token:n,shared_link:r,shared_link_password:o},i(t,D,z),i(t,F,U),t)):e}function g(e,t){return e.replace("{+asset_path}",t||"")}function E(e){var t=e.baseURI,n=e.staticBaseURI;return function(e){return 0===e.indexOf("http")?e:0===e.indexOf("third-party")?n+e:t+e}}function w(e){var t=document,n=t.head;e.forEach(function(e){n.querySelector('link[rel="prefetch"][href="'+e+'"]')||n.appendChild(f(e))})}function k(e){var t=document,n=t.head;e.forEach(function(e){n.querySelector('link[rel="stylesheet"][href="'+e+'"]')||n.appendChild(v(e))})}function _(e){var t=document,n=t.head,i=[];return e.forEach(function(e){if(!n.querySelector('script[src="'+e+'"]')){var t=p(e);i.push(new Promise(function(e,n){t.addEventListener("load",e),t.addEventListener("error",n)})),n.appendChild(t)}}),Promise.all(i)}function O(e){var t="",n=e.key||e.keyIdentifier||"";return e.ctrlKey?t="Control":e.shiftKey?t="Shift":e.metaKey&&(t="Meta"),n===t&&(n=""),0===n.indexOf("U+")&&(n="U+001B"===n?"Escape":String.fromCharCode(n.replace("U+","0x"))),n?(" "===n&&(n="Space"),"Esc"===n&&(n="Escape"),"Right"!==n&&"Left"!==n&&"Down"!==n&&"Up"!==n||(n="Arrow"+n),t&&(t+="+"),t+n):""}function P(e,t){var n=document.querySelector('script[src*="/'+e+'"]')||{},i=t?t.src:n.src;if(!i||-1===i.indexOf(e)&&-1===i.indexOf("__tests__"))throw new Error("Missing or malformed "+e+" library");var r=document.createElement("a");r.href=i;var o=r.pathname,a=o.split("/"),s=a.length,l=a[s-1],u=a[s-2],c=a[s-3],h=r.search,d=r.href.replace(l,"").replace(h,""),p=d.replace(c+"/"+u+"/","");return{origin:r.origin,host:r.host,hostname:r.hostname,search:h,protocol:r.protocol,port:r.port,href:r.href,pathname:o,locale:u,version:c,baseURI:d,staticBaseURI:p}}function S(e,t){var n=/\{\d+\}/g;return e&&e.length?e.replace(n,function(e){var n=parseInt(e.replace(/^\D+/g,""),10)-1;return t[n]?t[n]:e}):e}function L(e){return e.name.slice(0,e.name.lastIndexOf(".")).endsWith(".360")}function C(e){return/.*\.(vera\..*|vera)\.html/i.test(e.name)}function x(e,t,n){e.style.width=t+"px",e.style.height=n+"px"}function j(e){return function(t){if("click"===t.type)e(t);else if("keydown"===t.type){var n=O(t);"Space"!==n&&"Enter"!==n||(e(t),t.preventDefault(),t.stopPropagation())}}}function H(e,t){e.addEventListener("click",t),e.addEventListener("keydown",t)}function T(e,t){e.removeEventListener("click",t),e.removeEventListener("keydown",t)}function A(e,t,n,i){var r=e,o=i.scrollTop,a=i.scrollTop+i.offsetHeight,s=n.offsetTop+n.clientHeight/2;return o>t?r=o>s?e+1:e:o<t&&(r=a<s?e-1:e),r}t.k=s,t.t=l,t.r=u,t.q=c,t.g=h,t.m=d,t.h=v,t.l=b,t.d=m,t.c=y,t.f=g,t.e=E,t.u=w,t.p=k,t.o=_,t.i=O,t.j=P,t.w=S,t.x=L,t.n=C,t.y=x,t.a=j,t.b=H,t.v=T,t.s=A;var M=n(101),V=n.n(M),B=n(60),I=(n.n(B),"X-Box-Client-Name"),R="X-Box-Client-Version",D="box_client_name",F="box_client_version",z="box-content-preview",U="1.23.0",N=function(e){return 204===e.status?e:e.json()},q=function(e){return e.text()},W=function(e){return e.blob()},G=function(e){return e}},,function(e,t,n){"use strict";function i(e){var t=dt[e];return ht[t]}function r(e){return ht[e]}n.d(t,"h",function(){return Ne}),n.d(t,"i",function(){return qe}),n.d(t,"l",function(){return We}),n.d(t,"m",function(){return Ge}),n.d(t,"s",function(){return Ze}),n.d(t,"u",function(){return Xe}),n.d(t,"v",function(){return Ke}),n.d(t,"d",function(){return Je}),n.d(t,"e",function(){return Qe}),n.d(t,"f",function(){return Ye}),n.d(t,"n",function(){return $e}),n.d(t,"c",function(){return et}),n.d(t,"o",function(){return tt}),n.d(t,"p",function(){return nt}),n.d(t,"q",function(){return it}),n.d(t,"a",function(){return rt}),n.d(t,"b",function(){return ot}),n.d(t,"j",function(){return at}),n.d(t,"k",function(){return st}),n.d(t,"g",function(){return lt}),n.d(t,"t",function(){return ut}),n.d(t,"r",function(){return ct}),t.w=i,t.x=r;var o=n(102),a=n.n(o),s=n(103),l=n.n(s),u=n(104),c=n.n(u),h=n(105),d=n.n(h),p=n(106),f=n.n(p),v=n(107),b=n.n(v),m=n(108),y=n.n(m),g=n(109),E=n.n(g),w=n(110),k=n.n(w),_=n(111),O=n.n(_),P=n(112),S=n.n(P),L=n(113),C=n.n(L),x=n(114),j=n.n(x),H=n(115),T=n.n(H),A=n(116),M=n.n(A),V=n(117),B=n.n(V),I=n(118),R=n.n(I),D=n(119),F=n.n(D),z=n(120),U=n.n(z),N=n(121),q=n.n(N),W=n(122),G=n.n(W),Z=n(123),X=n.n(Z),K=n(124),J=n.n(K),Q=n(125),Y=n.n(Q),$=n(126),ee=n.n($),te=n(127),ne=n.n(te),ie=n(128),re=n.n(ie),oe=n(129),ae=n.n(oe),se=n(130),le=n.n(se),ue=n(131),ce=n.n(ue),he=n(132),de=n.n(he),pe=n(133),fe=n.n(pe),ve=n(134),be=n.n(ve),me=n(135),ye=n.n(me),ge=n(136),Ee=n.n(ge),we=n(137),ke=n.n(we),_e=n(138),Oe=n.n(_e),Pe=n(139),Se=n.n(Pe),Le=n(140),Ce=n.n(Le),xe=n(141),je=n.n(xe),He=n(142),Te=n.n(He),Ae=n(143),Me=n.n(Ae),Ve=n(144),Be=n.n(Ve),Ie=n(145),Re=n.n(Ie),De=n(146),Fe=n.n(De),ze=n(147),Ue=n.n(ze),Ne=a.a,qe=l.a,We=(c.a,d.a),Ge=f.a,Ze=b.a,Xe=y.a,Ke=E.a,Je=k.a,Qe=O.a,Ye=S.a,$e=C.a,et=ke.a,tt=Oe.a,nt=Se.a,it=Ce.a,rt=je.a,ot=Te.a,at=Me.a,st=Be.a,lt=Re.a,ut=Fe.a,ct=Ue.a,ht={FILE_AUDIO:j.a,FILE_BOX_NOTE:T.a,FILE_CODE:M.a,FILE_DEFAULT:R.a,FILE_DICOM:B.a,FILE_DOCUMENT:F.a,FILE_EXCEL:U.a,FILE_GOOGLE_DOC:q.a,FILE_GOOGLE_SHEET:G.a,FILE_GOOGLE_SLIDE:X.a,FILE_ILLUSTRATOR:J.a,FILE_IMAGE:Y.a,FILE_KEYNOTE:ee.a,FILE_MEDIA:ne.a,FILE_NUMBERS:re.a,FILE_OBJ:ae.a,FILE_PAGES:le.a,FILE_PDF:ce.a,FILE_POWERPOINT:de.a,FILE_PRESENTATION:fe.a,FILE_SPREADSHEET:be.a,FILE_WORD:ye.a,FILE_ZIP:Ee.a},dt={};["aac","aif","aifc","aiff","amr","au","flac","m4a","mp3","ra","wav","wma"].forEach(function(e){dt[e]="FILE_AUDIO"}),["boxnote"].forEach(function(e){dt[e]="FILE_BOX_NOTE"}),["as","as3","asm","bat","c","cc","cmake","cpp","cs","css","cxx","diff","erb","groovy","h","haml","hh","htm","html","java","js","json","less","m","make","md","ml","mm","php","pl","plist","properties","py","rb","rst","sass","scala","script","scm","sml","sql","sh","vi","vim","webdoc","xml","xsd","xsl","yaml"].forEach(function(e){dt[e]="FILE_CODE"}),["xls","xlsm","xlsx"].forEach(function(e){dt[e]="FILE_EXCEL"}),["log","msg","ods","rtf","txt","wpd"].forEach(function(e){dt[e]="FILE_DOCUMENT"}),["gdoc"].forEach(function(e){dt[e]="FILE_GOOGLE_DOC"}),["gsheet"].forEach(function(e){dt[e]="FILE_GOOGLE_SHEET"}),["gslide"].forEach(function(e){dt[e]="FILE_GOOGLE_SLIDE"}),["ai","bmp","dcm","eps","gif","jpg","jpeg","png","ps","psd","svg","svs","swf","tga","tif","tiff"].forEach(function(e){dt[e]="FILE_IMAGE"}),["key"].forEach(function(e){dt[e]="FILE_KEYNOTE"}),["3g2","3gp","avi","flv","m2v","m2ts","m4v","mkv","mov","mp4","mpeg","mpg","mts","ogg","qt","ts","wmv"].forEach(function(e){dt[e]="FILE_MEDIA"}),["numbers"].forEach(function(e){dt[e]="FILE_NUMBERS"}),["3ds","box3d","dae","fbx","obj","ply","stl"].forEach(function(e){dt[e]="FILE_OBJ"}),["pages"].forEach(function(e){dt[e]="FILE_PAGES"}),["pdf"].forEach(function(e){dt[e]="FILE_PDF"}),["ppt","pptx"].forEach(function(e){dt[e]="FILE_POWERPOINT"}),["odp"].forEach(function(e){dt[e]="FILE_PRESENTATION"}),["csv","tsv"].forEach(function(e){dt[e]="FILE_SPREADSHEET"}),["doc","docx"].forEach(function(e){dt[e]="FILE_WORD"}),["tgz","zip"].forEach(function(e){dt[e]="FILE_ZIP"})},function(e,t,n){"use strict";(function(e){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=navigator,o=r.userAgent,a=void 0,s=void 0,l=void 0,u=function(){function t(){n(this,t)}return i(t,null,[{key:"overrideUserAgent",value:function(e){o=e,a=null}},{key:"getName",value:function(){return a||(o.indexOf("Edge/")>0?a="Edge":o.indexOf("OPR/")>0||o.indexOf("Opera/")>0?a="Opera":o.indexOf("Chrome/")>0?a="Chrome":o.indexOf("Safari/")>0?a="Safari":o.indexOf("Trident/")>0?a="Explorer":o.indexOf("Firefox/")>0&&(a="Firefox"),a)}},{key:"canPlayType",value:function(e,t){var n=void 0;if(0===e.indexOf("audio/"))n=document.createElement("audio");else{if(0!==e.indexOf("video/"))return!1;n=document.createElement("video")}return!(!n.canPlayType||n.canPlayType(e).replace(/^no$/,"")!==t)}},{key:"canPlayH264",value:function(e){return t.canPlayType(e,"maybe")||t.canPlayType(e,"probably")}},{key:"canPlayH264Baseline",value:function(){return t.canPlayH264('video/mp4; codecs="avc1.42E01E"')}},{key:"canPlayH264Main",value:function(){return t.canPlayH264('video/mp4; codecs="avc1.4D401E"')}},{key:"canPlayH264High",value:function(){return t.canPlayH264('video/mp4; codecs="avc1.64001E"')}},{key:"canPlayMP3",value:function(){return t.canPlayType("audio/mpeg","maybe")||t.canPlayType("audio/mpeg","probably")}},{key:"canPlayDash",value:function(){var n=e.MediaSource,i=!1;return n&&(i="function"==typeof n.isTypeSupported?n.isTypeSupported('video/mp4; codecs="avc1.64001E"'):t.canPlayH264High()),i}},{key:"hasMSE",value:function(){return!!e.MediaSource}},{key:"hasWebGL",value:function(){if(!s){var e=document.createElement("canvas");e.addEventListener("webglcontextlost",function(e){e.preventDefault(),e.stopPropagation()});try{s=e.getContext("webgl")||e.getContext("experimental-webgl")}catch(e){}l=null!==s&&void 0!==s}return l}},{key:"clearGLContext",value:function(){if(s){var e=s.getExtension("WEBGL_lose_context");e&&"function"==typeof e.loseContext&&e.loseContext(),s=null}}},{key:"supportsModel3D",value:function(){return!!t.hasWebGL()&&!!s.getExtension("OES_standard_derivatives")}},{key:"hasFlash",value:function(){var t=!1;try{t=Boolean(new ActiveXObject("ShockwaveFlash.ShockwaveFlash"))}catch(n){t=void 0!==e.navigator.mimeTypes["application/x-shockwave-flash"]}return t}},{key:"hasSVG",value:function(){return document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")}},{key:"hasTouch",value:function(){return"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch}},{key:"isMobile",value:function(){return/iphone|ipad|ipod|android|blackberry|bb10|mini|windows\sce|palm/i.test(o)}},{key:"canDownload",value:function(){return!t.isMobile()||!window.externalHost&&"download"in document.createElement("a")}},{key:"isIOS",value:function(){return/(iPad|iPhone|iPod)/g.test(o)}},{key:"isAndroid",value:function(){return/Android/g.test(o)}},{key:"isMac",value:function(){return/Macintosh; Intel Mac OS X/g.test(o)}},{key:"hasFontIssue",value:function(){return t.isIOS()&&/(?:OS\s)10_3/i.test(o)||t.isMac()&&"Safari"===t.getName()}},{key:"getBrowserInfo",value:function(){return{name:t.getName(),swf:t.hasFlash(),svg:t.hasSVG(),mse:t.hasMSE(),webgl:t.hasWebGL(),mp3:t.canPlayMP3(),dash:t.canPlayDash(),box3d:t.supportsModel3D(),h264:{baseline:t.canPlayH264Baseline(),main:t.canPlayH264Main(),high:t.canPlayH264High()}}}}]),t}();t.a=u}).call(t,n(13))},function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function r(e){return"number"==typeof e}function o(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!r(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,r,s,l,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var c=new Error('Uncaught, unspecified "error" event. ('+t+")");throw c.context=t,c}if(n=this._events[e],a(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(o(n))for(s=Array.prototype.slice.call(arguments,1),u=n.slice(),r=u.length,l=0;l<r;l++)u[l].apply(this,s);return!0},n.prototype.addListener=function(e,t){var r;if(!i(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned&&(r=a(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&r>0&&this._events[e].length>r&&(this._events[e].warned=!0,console.trace),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!i(t))throw TypeError("listener must be a function");var r=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,r,a,s;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],a=n.length,r=-1,n===t||i(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(n)){for(s=a;s-- >0;)if(n[s]===t||n[s].listener&&n[s].listener===t){r=s;break}if(r<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],i(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){return this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(i(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},,function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(){i(this,e)}return r(e,[{key:"canLoad",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return!!this.determineViewer(e,t)}},{key:"getViewers",value:function(){return Array.isArray(this.viewers)?this.viewers:[]}},{key:"determineViewer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return this.viewers.find(function(n){return!(t.indexOf(n.NAME)>-1)&&(n.EXT.indexOf(e.extension)>-1&&e.representations.entries.some(function(e){return n.REP===e.representation}))})}},{key:"determineRepresentation",value:function(e,t){return e.representations.entries.find(function(e){return t.REP===e.representation})}}]),e}();t.a=o},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(6),s=n.n(a),l=n(59),u=n.n(l),c=n(57),h=n.n(c),d=n(10),p=n(36),f=n(2),v=n(5),b=n(1),m=n(4),y=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),g=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},E={point:{title:"Point annotation mode",selector:b.Z},draw:{title:"Drawing annotation mode",selector:b.Y}},w={modeEnter:"annotationmodeenter",modeExit:"annotationmodeexit",fetch:"annotationsfetched",error:"annotationerror",scale:"scaleannotations"},k=function(e){function t(e){i(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.destroyed=!1,n.rotationAngle=0,n.scale=1,n.options=e,n.cache=e.cache,n.previewUI=e.ui,n.repStatuses=[],n.isMobile=v.a.isMobile(),n.hasTouch=v.a.hasTouch(),n.resetLoadTimeout=n.resetLoadTimeout.bind(n),n.preventDefault=n.preventDefault.bind(n),n.debouncedResizeHandler=n.getResizeHandler().bind(n),n.handleAssetError=n.handleAssetError.bind(n),n.toggleFullscreen=n.toggleFullscreen.bind(n),n.onFullscreenToggled=n.onFullscreenToggled.bind(n),n.mobileZoomStartHandler=n.mobileZoomStartHandler.bind(n),n.mobileZoomChangeHandler=n.mobileZoomChangeHandler.bind(n),n.mobileZoomEndHandler=n.mobileZoomEndHandler.bind(n),n.handleAnnotatorEvents=n.handleAnnotatorEvents.bind(n),n.annotationsLoadHandler=n.annotationsLoadHandler.bind(n),n.viewerLoadHandler=n.viewerLoadHandler.bind(n),n}return o(t,e),y(t,[{key:"setup",value:function(){if(this.options.file){var e=this.options.file.extension;this.fileLoadingIcon=Object(m.w)(e)}this.finishLoadingSetup();var t=this.options.container;"string"==typeof t&&(t=document.querySelector(t)),this.containerEl=t.querySelector(b.X),this.addCommonListeners(),this.loadTimeout=18e4,this.isMobile&&this.containerEl.classList.add(b.j),this.areAnnotationsEnabled()&&!this.options.sharedLink&&this.loadAnnotator()}},{key:"finishLoadingSetup",value:function(){var e=this.options.container,t=e.querySelector(b._4);t&&t.classList.add(b.A),e.querySelector(b._5).innerHTML=this.fileLoadingIcon||Object(m.x)("FILE_DEFAULT")}},{key:"destroy",value:function(){var e=this;this.repStatuses&&this.repStatuses.forEach(function(t){t.removeListener("conversionpending",e.resetLoadTimeout),t.destroy()}),d.a.removeAllListeners(),document.defaultView.removeEventListener("resize",this.debouncedResizeHandler),this.removeAllListeners(),this.containerEl&&(this.containerEl.removeEventListener("contextmenu",this.preventDefault),this.containerEl.innerHTML=""),this.annotator&&"function"==typeof this.annotator.destroy&&(this.annotator.removeAllListeners(),this.annotator.destroy()),this.destroyed=!0,this.emit("destroy")}},{key:"getResizeHandler",value:function(){var e=this;return u()(function(){e.resize()},300)}},{key:"load",value:function(){this.resetLoadTimeout()}},{key:"resetLoadTimeout",value:function(){var e=this;clearTimeout(this.loadTimeoutId),this.loadTimeoutId=setTimeout(function(){if(document.hidden)return void e.resetLoadTimeout();e.isLoaded()||e.isDestroyed()||e.triggerError()},this.loadTimeout)}},{key:"handleAssetError",value:function(e){this.triggerError(e),this.destroyed=!0}},{key:"triggerError",value:function(e){this.emit("error",e instanceof Error?e:new Error(e||"We're sorry, the preview didn't load. Please refresh the page."))}},{key:"isLoaded",value:function(){return this.loaded}},{key:"isDestroyed",value:function(){return this.destroyed}},{key:"appendAuthParams",value:function(e){var t=this.options,n=t.token,i=t.sharedLink,r=t.sharedLinkPassword;return Object(f.c)(e,n,i,r)}},{key:"createContentUrl",value:function(e,t){var n=this.options.queryParams;return Object(f.d)(Object(f.f)(e,t),n)}},{key:"createContentUrlWithAuthParams",value:function(e,t){var n=this.appendAuthParams(Object(f.f)(e,t)),i=this.options.queryParams;return Object(f.d)(n,i)}},{key:"appendAuthHeader",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.options,n=t.token,i=t.sharedLink,r=t.sharedLinkPassword;return Object(f.l)(e,n,i,r)}},{key:"addCommonListeners",value:function(){d.a.addListener("enter",this.onFullscreenToggled),d.a.addListener("exit",this.onFullscreenToggled),document.defaultView.addEventListener("resize",this.debouncedResizeHandler);var e=this.options.file.permissions;e&&!e.can_download&&this.containerEl.addEventListener("contextmenu",this.preventDefault),this.addListener("load",this.viewerLoadHandler)}},{key:"viewerLoadHandler",value:function(e){e&&e.scale&&(this.scale=e.scale),this.annotationsLoadPromise&&this.annotationsLoadPromise.then(this.annotationsLoadHandler).catch(function(){})}},{key:"preventDefault",value:function(e){e.preventDefault()}},{key:"toggleFullscreen",value:function(){d.a.toggle(this.containerEl)}},{key:"onFullscreenToggled",value:function(){this.containerEl.classList.toggle(b.y),d.a.isSupported()||this.containerEl.classList.toggle(b.z),this.resize()}},{key:"resize",value:function(){this.emit("resize",{width:document.documentElement.clientWidth,height:document.documentElement.clientHeight})}},{key:"allowNavigationArrows",value:function(){return!0}},{key:"emit",value:function(e,n){var i=this.options,r=i.file,o=i.viewer;g(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"emit",this).call(this,e,n),g(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"emit",this).call(this,"viewerevent",{event:e,data:n,viewerName:o?o.NAME:"",fileId:r.id})}},{key:"mobileZoomStartHandler",value:function(e){v.a.isIOS()?(this._scaling=!0,e.preventDefault(),e.stopPropagation()):2===e.touches.length?(this._pinchScale={initial:{0:[e.touches[0].clientX,e.touches[0].clientY],1:[e.touches[1].clientX,e.touches[1].clientY]},end:{}},this._scaling=!0,e.preventDefault(),e.stopPropagation()):(this._scaling=!1,this._pinchScale=void 0)}},{key:"mobileZoomChangeHandler",value:function(e){2===e.touches.length&&this._scaling&&(this._pinchScale.end={0:[e.touches[0].clientX,e.touches[0].clientY],1:[e.touches[1].clientX,e.touches[1].clientY]})}},{key:"mobileZoomEndHandler",value:function(e){if(this._scaling){var t=0;if(v.a.isIOS())t=e.scale-1;else{var n=Math.sqrt((this._pinchScale.initial[0][0]-this._pinchScale.initial[1][0])*(this._pinchScale.initial[0][0]-this._pinchScale.initial[1][0])+(this._pinchScale.initial[0][1]-this._pinchScale.initial[1][1])*(this._pinchScale.initial[0][1]-this._pinchScale.initial[1][1]));t=Math.sqrt((this._pinchScale.end[0][0]-this._pinchScale.end[1][0])*(this._pinchScale.end[0][0]-this._pinchScale.end[1][0])+(this._pinchScale.end[0][1]-this._pinchScale.end[1][1])*(this._pinchScale.end[0][1]-this._pinchScale.end[1][1]))-n}t>0?this.zoomIn():t<0&&this.zoomOut(),this._scaling=!1,this._pinchScale=void 0}}},{key:"getViewerOption",value:function(e){var t=this.options,n=t.viewers,i=t.viewer;return n&&n[i.NAME]?n[i.NAME][e]:null}},{key:"loadAssets",value:function(e,t){var n=this.options.location,i=Object(f.e)(n);return Object(f.p)((t||[]).map(i)),Object(f.o)((e||[]).map(i))}},{key:"prefetchAssets",value:function(e,t){var n=this.options.location,i=Object(f.e)(n);Object(f.u)((t||[]).map(i)),Object(f.u)((e||[]).map(i))}},{key:"getRepStatus",value:function(e){var t=this.options,n=t.token,i=t.sharedLink,r=t.sharedLinkPassword,o=t.logger,a=new p.a({representation:e||this.options.representation,token:n,sharedLink:i,sharedLinkPassword:r,logger:e?null:o});return a.addListener("conversionpending",this.resetLoadTimeout),this.repStatuses.push(a),a}},{key:"isRepresentationReady",value:function(e){var t=p.a.getStatus(e);return t===b._12||t===b._13}},{key:"disableViewerControls",value:function(){this.controls&&this.controls.disable()}},{key:"enableViewerControls",value:function(){this.controls&&this.controls.enable()}},{key:"loadAnnotator",value:function(){this.annotationsLoadPromise=window.BoxAnnotations&&this.options.boxAnnotations instanceof window.BoxAnnotations?Promise.resolve():this.loadAssets(["annotations.js"],["annotations.css"])}},{key:"annotationsLoadHandler",value:function(){var e={};e[this.options.viewer.NAME]=this.viewerConfig;var t=this.options.boxAnnotations||new BoxAnnotations(e);this.annotatorConf=t.determineAnnotator(this.options,this.viewerConfig),this.annotatorConf&&this.initAnnotations()}},{key:"initAnnotations",value:function(){var e=this,t=this.createAnnotatorOptions({annotator:this.annotatorConf,modeButtons:E});this.annotator=new this.annotatorConf.CONSTRUCTOR(t),this.annotator.init(this.scale),this.emit("annotator",this.annotator),this.addListener("toggleannotationmode",function(t){return e.annotator.toggleAnnotationMode(t)}),this.addListener("scale",function(t){e.annotator.emit(w.scale,t)}),this.addListener("scrolltoannotation",function(t){return e.annotator.scrollToAnnotation(t)}),this.annotator.addListener("annotatorevent",this.handleAnnotatorEvents)}},{key:"areAnnotationsEnabled",value:function(){if(window.BoxAnnotations&&this.options.boxAnnotations instanceof window.BoxAnnotations){var e=this.options,t=e.boxAnnotations,n=e.viewer,i=t.options[n.NAME];this.viewerConfig={enabled:i.enabled||!!i.enabledTypes}}else this.viewerConfig=this.getViewerAnnotationsConfig();return this.viewerConfig&&void 0!==this.viewerConfig.enabled?this.viewerConfig.enabled:!!this.options.showAnnotations}},{key:"getViewerAnnotationsConfig",value:function(){var e=this.getViewerOption("annotations"),t=null!==e&&void 0!==e?e:{};return"boolean"==typeof t?{enabled:t}:t}},{key:"handleAnnotatorEvents",value:function(e){switch(e.event){case w.modeEnter:this.disableViewerControls(),"point"===e.data.mode?this.emit("notificationshow","Click anywhere to add a comment to the document"):"draw"===e.data.mode&&(this.emit("notificationshow","Press down and drag the pointer to draw on the document"),this.previewUI.replaceHeader(e.data.headerSelector));break;case w.modeExit:this.enableViewerControls(),this.emit("notificationhide"),"draw"===e.data.mode&&this.previewUI.replaceHeader(e.data.headerSelector);break;case w.error:this.emit("notificationshow",e.data);break;case w.fetch:this.emit("scale",{scale:this.scale,rotationAngle:this.rotationAngle})}this.emit(e.event,e.data),this.emit("annotatorevent",e)}},{key:"createAnnotatorOptions",value:function(e){var t={loadError:"We're sorry, annotations failed to load for this file.",createError:"We're sorry, the annotation could not be created.",deleteError:"We're sorry, the annotation could not be deleted.",authError:"Your session has expired. Please refresh the page.",cancelButton:"Cancel",saveButton:"Save",postButton:"Post",deleteButton:"Delete",addCommentPlaceholder:"Add a comment here...",replyPlaceholder:"Post a reply...",deleteConfirmation:"Delete this annotation?",posting:"Posting...",profileAlt:"Avatar",anonymousUserName:"Some User",pointToggle:"Point annotation mode",highlightToggle:"Highlight text",highlightComment:"Add comment to highlighted text",whoHighlighted:"{1} highlighted",drawToggle:"Drawing annotation mode",drawSave:"Save drawing",drawDelete:"Delete drawing",whoDrew:"{1} drew"};return h()(Object.assign({},this.options,e,{isMobile:this.isMobile,hasTouch:this.hasTouch,locale:this.options.location.locale,localizedStrings:t}))}}]),t}(s.a);t.a=k},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(6),s=n.n(a),l=n(1),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=function(e){function t(){i(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.fullscreenchangeHandler=function(t){var n=!1;e.isSupported()?e.isFullscreen()&&(n=!0):e.isFullscreen(t)||(n=!0),n?e.emit("enter"):e.emit("exit")},document.addEventListener("webkitfullscreenchange",e.fullscreenchangeHandler),document.addEventListener("mozfullscreenchange",e.fullscreenchangeHandler),document.addEventListener("MSFullscreenChange",e.fullscreenchangeHandler),document.addEventListener("fullscreenchange",e.fullscreenchangeHandler),e}return o(t,e),u(t,[{key:"isSupported",value:function(){return document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled}},{key:"isFullscreen",value:function(e){return this.isSupported()?!!(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement):e instanceof HTMLElement&&e.classList.contains(l.y)}},{key:"toggle",value:function(e){var t=e||document.documentElement;this.isSupported()?this.isFullscreen()?document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen():t.requestFullscreen?t.requestFullscreen(Element.ALLOW_KEYBOARD_INPUT):t.msRequestFullscreen?t.msRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):t.mozRequestFullScreen?t.mozRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT):t.webkitRequestFullscreen&&t.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):this.fullscreenchangeHandler(t)}}]),t}(s.a);t.a=new c},function(e,t,n){"use strict";function i(e,t){return t+"/2.0/files/"+e+"?fields="+v.join(",")}function r(e,t){return t+"/2.0/files/"+e+"?fields=download_url"}function o(e,t){return e.representations.entries.find(function(e){return e.representation===t})||null}function a(e,t){return!!e&&!!e.permissions&&!!e.permissions[t]}function s(e,t,n){return!!e&&"function"==typeof e[t]&&(!n||e[t](n))}function l(e){return!(!e||"object"!==(void 0===e?"undefined":f(e)))&&v.every(function(t){return void 0!==e[t]})}function u(e){if(!o(e,p.O)){var t={preview:"true"};e.file_version&&(t.version=e.file_version.id);var n=Object(d.d)(e.authenticated_download_url,t);e.representations.entries.push({content:{url_template:n},representation:p.O,status:{state:"success"}})}}function c(e,t){t.representations&&u(t),e.set(t.id,t)}function h(e,t){e.unset(t.id)}t.g=i,t.e=r,t.f=o,t.d=a,t.b=s,t.c=l,t.a=c,t.h=h;var d=n(2),p=n(1),f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v=["id","permissions","shared_link","sha1","file_version","name","size","extension","representations","watermark_info","authenticated_download_url"]},,function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";n.d(t,"j",function(){return i}),n.d(t,"d",function(){return r}),n.d(t,"e",function(){return o}),n.d(t,"f",function(){return a}),n.d(t,"g",function(){return s}),n.d(t,"h",function(){return l}),n.d(t,"i",function(){return u}),n.d(t,"l",function(){return c}),n.d(t,"k",function(){return h}),n.d(t,"a",function(){return d}),n.d(t,"b",function(){return p}),n.d(t,"c",function(){return f});var i="toggleVr",r="error",o="load",a="reset",s="sceneLoaded",l="showVrButton",u="toggleFullscreen",c="webglContextRestored",h="webglContextLost",d="bp-box3d",p="bp-is-hidden",f="bp-invisible"},,,,,function(e,t,n){"use strict";n.d(t,"l",function(){return i}),n.d(t,"m",function(){return r}),n.d(t,"n",function(){return o}),n.d(t,"o",function(){return a}),n.d(t,"r",function(){return s}),n.d(t,"p",function(){return l}),n.d(t,"s",function(){return u}),n.d(t,"t",function(){return c}),n.d(t,"q",function(){return h}),n.d(t,"u",function(){return d}),n.d(t,"v",function(){return p}),n.d(t,"y",function(){return f}),n.d(t,"z",function(){return v}),n.d(t,"x",function(){return b}),n.d(t,"w",function(){return m}),n.d(t,"f",function(){return y}),n.d(t,"h",function(){return g}),n.d(t,"i",function(){return E}),n.d(t,"j",function(){return w}),n.d(t,"k",function(){return k}),n.d(t,"g",function(){return _}),n.d(t,"a",function(){return O}),n.d(t,"b",function(){return P}),n.d(t,"c",function(){return S}),n.d(t,"e",function(){return L}),n.d(t,"d",function(){return C}),n.d(t,"A",function(){return x}),n.d(t,"D",function(){return j}),n.d(t,"B",function(){return H}),n.d(t,"C",function(){return T}),n.d(t,"E",function(){return A}),n.d(t,"F",function(){return M});var i="canvasClick",r="resetSkeletons",o="rotateOnAxis",a="selectAnimationClip",s="setRenderMode",l="setCameraProjection",u="setSkeletonsVisible",c="setWireframesVisible",h="setGridVisible",d="toggleAnimation",p="toggleHelpers",f=10,v=10,b=4386,m=11184810,y="box3d-animation-clip-pullup",g="bp-overlay-panel",E="bp-pullup",w="bp-settings-panel-label",k="bp-settings-panel-row",_="bp-is-hidden",O="x",P="y",S="z",L="Perspective",C="Orthographic",x="Lit",j="Unlit",H="Normals",T="Shape",A="UV Overlay",M=90},,,,,function(e,t,n){(function(t){function n(e,t,n){function i(t){var n=v,i=b;return v=b=void 0,O=t,y=e.apply(i,n)}function o(e){return O=e,g=setTimeout(c,t),P?i(e):y}function a(e){var n=e-E,i=e-O,r=t-n;return S?k(r,m-i):r}function u(e){var n=e-E,i=e-O;return void 0===E||n>=t||n<0||S&&i>=m}function c(){var e=_();if(u(e))return h(e);g=setTimeout(c,a(e))}function h(e){return g=void 0,L&&v?i(e):(v=b=void 0,y)}function d(){void 0!==g&&clearTimeout(g),O=0,v=E=b=g=void 0}function p(){return void 0===g?y:h(_())}function f(){var e=_(),n=u(e);if(v=arguments,b=this,E=e,n){if(void 0===g)return o(E);if(S)return g=setTimeout(c,t),i(E)}return void 0===g&&(g=setTimeout(c,t)),y}var v,b,m,y,g,E,O=0,P=!1,S=!1,L=!0;if("function"!=typeof e)throw new TypeError(l);return t=s(t)||0,r(n)&&(P=!!n.leading,S="maxWait"in n,m=S?w(s(n.maxWait)||0,t):m,L="trailing"in n?!!n.trailing:L),f.cancel=d,f.flush=p,f}function i(e,t,i){var o=!0,a=!0;if("function"!=typeof e)throw new TypeError(l);return r(i)&&(o="leading"in i?!!i.leading:o,a="trailing"in i?!!i.trailing:a),n(e,t,{leading:o,maxWait:t,trailing:a})}function r(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function o(e){return!!e&&"object"==typeof e}function a(e){return"symbol"==typeof e||o(e)&&E.call(e)==c}function s(e){if("number"==typeof e)return e;if(a(e))return u;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(h,"");var n=p.test(e);return n||f.test(e)?v(e.slice(2),n?2:8):d.test(e)?u:+e}var l="Expected a function",u=NaN,c="[object Symbol]",h=/^\s+|\s+$/g,d=/^[-+]0x[0-9a-f]+$/i,p=/^0b[01]+$/i,f=/^0o[0-7]+$/i,v=parseInt,b="object"==typeof t&&t&&t.Object===Object&&t,m="object"==typeof self&&self&&self.Object===Object&&self,y=b||m||Function("return this")(),g=Object.prototype,E=g.toString,w=Math.max,k=Math.min,_=function(){return y.Date.now()};e.exports=i}).call(t,n(13))},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=n(24),o=n.n(r),a=n(5),s=n(1),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u="box-show-preview-controls",c=2e3,h=function(){function e(t){var n=this;i(this,e),this.buttonRefs=[],this.shouldHide=!0,this.hasTouch=a.a.hasTouch(),this.mousemoveHandler=o()(function(){n.containerEl.classList.add(u),n.resetTimeout()},c-500),this.mouseenterHandler=function(){n.shouldHide=!1},this.mouseleaveHandler=function(){n.shouldHide=!0},this.focusinHandler=function(e){n.isPreviewControlButton(e.target)&&(n.containerEl.classList.add(u),n.shouldHide=!1)},this.focusoutHandler=function(e){n.isPreviewControlButton(e.target)&&!n.isPreviewControlButton(e.relatedTarget)&&(n.shouldHide=!0)},this.clickHandler=function(){n.shouldHide=!0},this.containerEl=t;var r=this.containerEl.appendChild(document.createElement("div"));r.className="bp-controls-wrapper",this.controlsEl=r.appendChild(document.createElement("div")),this.controlsEl.className="bp-controls",this.containerEl.addEventListener("mousemove",this.mousemoveHandler),this.controlsEl.addEventListener("mouseenter",this.mouseenterHandler),this.controlsEl.addEventListener("mouseleave",this.mouseleaveHandler),this.controlsEl.addEventListener("focusin",this.focusinHandler),this.controlsEl.addEventListener("focusout",this.focusoutHandler),this.hasTouch&&(this.containerEl.addEventListener("touchstart",this.mousemoveHandler),this.controlsEl.addEventListener("click",this.clickHandler))}return l(e,[{key:"destroy",value:function(){this.containerEl.removeEventListener("mousemove",this.mousemoveHandler),this.controlsEl.removeEventListener("mouseenter",this.mouseenterHandler),this.controlsEl.removeEventListener("mouseleave",this.mouseleaveHandler),this.controlsEl.removeEventListener("focusin",this.focusinHandler),this.controlsEl.removeEventListener("focusout",this.focusoutHandler),this.hasTouch&&(this.containerEl.removeEventListener("touchstart",this.mousemoveHandler),this.controlsEl.removeEventListener("click",this.clickHandler)),this.buttonRefs.forEach(function(e){e.button.removeEventListener("click",e.handler)})}},{key:"isPreviewControlButton",value:function(e){return!!e&&(e.classList.contains("bp-controls-btn")||e.parentNode.classList.contains("bp-page-num-wrapper"))}},{key:"resetTimeout",value:function(){var e=this;clearTimeout(this.controlDisplayTimeoutId),this.controlDisplayTimeoutId=setTimeout(function(){clearTimeout(e.controlDisplayTimeoutId),!e.shouldHide||e.isPageNumFocused()?e.resetTimeout():(e.containerEl.classList.remove(u),e.controlsEl.contains(document.activeElement)&&document.activeElement.blur())},c)}},{key:"add",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=document.createElement("div");r.className="bp-controls-cell";var o=document.createElement("button");return o.setAttribute("aria-label",e),o.setAttribute("title",e),o.className="bp-controls-btn "+n,o.addEventListener("click",t),i&&(o.innerHTML=i),r.appendChild(o),this.controlsEl.appendChild(r),this.buttonRefs.push({button:o,handler:t}),o}},{key:"enable",value:function(){this.controlsEl.classList.remove(s.A)}},{key:"disable",value:function(){this.controlsEl.classList.add(s.A)}},{key:"isPageNumFocused",value:function(){return document.activeElement&&document.activeElement.classList.contains("bp-page-num-input")}}]),e}();t.a=h},,,,function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t,n){var i="";if(n){i="&shared_link_password="+encodeURI(n)}e.setRequestHeader("boxapi","shared_link="+encodeURI(t)+i)}var s=n(60),l=(n.n(s),n(6)),u=n.n(l),c=n(14),h=n(1),d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),f=function(e){function t(e,n){i(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return o.vrEnabled=!1,o.vrGamepads=[],o.vrGamepadLoadPromises={},o.containerEl=e,o.boxSdk=n,o.handleContextLost=o.handleContextLost.bind(o),o.handleContextRestored=o.handleContextRestored.bind(o),o}return o(t,e),p(t,[{key:"load",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.staticBaseURI=t&&t.location?t.location.staticBaseURI:"",this.initBox3d(t)}},{key:"destroy",value:function(){this.box3d&&(this.box3d.canvas&&(this.box3d.canvas.removeEventListener("webglcontextlost",this.handleContextLost),this.box3d.canvas.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.disableVr(),this.box3d.destroy(),this.box3d=null)}},{key:"reset",value:function(){this.resetView()}},{key:"resetView",value:function(){var e=this.getCamera();e&&(e.setPosition(this.savedCameraPosition.x,this.savedCameraPosition.y,this.savedCameraPosition.z),e.setQuaternion(this.savedCameraQuaternion.x,this.savedCameraQuaternion.y,this.savedCameraQuaternion.z,this.savedCameraQuaternion.w))}},{key:"getCamera",value:function(){return this.box3d?this.box3d.getObjectByClass(Box3D.CameraObject):null}},{key:"getScene",value:function(){return this.box3d?this.box3d.getObjectByClass(Box3D.SceneObject):null}},{key:"getBox3D",value:function(){return this.box3d}},{key:"configureXHR",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=new XMLHttpRequest;return i.open("GET",t),n.isExternal||(i.setRequestHeader("Authorization","Bearer "+e.token),e.sharedLink&&a(i,e.sharedLink,e.sharedLinkPassword)),Promise.resolve(i)}},{key:"getEntitiesFromUrl",value:function(e){return fetch(e).then(function(e){return e.json()})}},{key:"initBox3d",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!Box3D)return Promise.reject(new Error("Missing Box3D"));if(!t.file||!t.file.file_version)return Promise.reject(new Error("Missing file version"));var n=new Box3D.XhrResourceLoader(this.configureXHR.bind(this,t)),i=t&&t.box3dApplication?t.box3dApplication:{},r=Promise.resolve([]);return"object"===(void 0===i?"undefined":d(i))?r=Promise.resolve(i):"string"==typeof i&&(r=this.getEntitiesFromUrl(i)),r.then(function(i){return e.createBox3d(n,t.sceneEntities,i.entities,""+t.apiHost)})}},{key:"createBox3d",value:function(e,t,n,i){var r=this,o=new Box3D.Engine({container:this.containerEl,engineName:"Default",resourceLoader:e,apiBase:i});return o.canvas&&(o.canvas.addEventListener("webglcontextlost",this.handleContextLost),o.canvas.addEventListener("webglcontextrestored",this.handleContextRestored)),new Promise(function(e){n&&o.addEntities(n);var i=o.getAssetByClass(Box3D.ApplicationAsset);o.addEntities(t),i||(i=o.getAssetByClass(Box3D.ApplicationAsset)),i.load(),r.box3d=o,e(r.box3d)})}},{key:"handleContextLost",value:function(e){e.preventDefault(),this.emit(c.k)}},{key:"handleContextRestored",value:function(){this.emit(c.l)}},{key:"onSceneLoad",value:function(){var e=this.getCamera();e&&(this.savedCameraPosition=e.getPosition(),this.savedCameraQuaternion=e.getQuaternion()),this.reset(),this.emit(c.g),this.initVr()}},{key:"toggleVr",value:function(){this.vrEnabled?this.disableVr():this.enableVr()}},{key:"onDisableVr",value:function(){this.enableCameraControls(),this.box3d.trigger("resize"),this.box3d.getRenderer().setAttribute("renderOnDemand",!0),this.hideVrGamepads();var e=this.box3d.getVrDisplay();this.vrEnabled=e&&e.isPresenting,this.resetView()}},{key:"onEnableVr",value:function(){this.disableCameraControls(),this.box3d.getRenderer().setAttribute("renderOnDemand",!1),this.showVrGamepads();var e=this.box3d.getVrDisplay();this.vrEnabled=e&&e.isPresenting}},{key:"enableVr",value:function(){this.vrEnabled||this.box3d.trigger("enableVrRendering")}},{key:"disableVr",value:function(){this.vrEnabled&&this.box3d.trigger("disableVrRendering")}},{key:"resize",value:function(){this.box3d&&this.box3d.trigger("resize")}},{key:"enableCameraControls",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"orbit_camera",t=this.getCamera(),n=t.getComponentByScriptId(e);n&&n.enable()}},{key:"disableCameraControls",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"orbit_camera",t=this.getCamera(),n=t.getComponentByScriptId(e);n&&n.disable()}},{key:"initVr",value:function(){var e=this;if(!Box3D.isTablet()){var t=this.box3d.getApplication(),n=t.getComponentByScriptId("vr_presenter");n&&n.whenDisplaysAvailable(function(t){t.length&&(e.emit(c.h),e.box3d.listenTo(e.box3d,"vrRenderingDisabled",e.onDisableVr.bind(e)),e.box3d.listenTo(e.box3d,"vrRenderingEnabled",e.onEnableVr.bind(e)),e.createVrGamepads())})}}},{key:"createVrGamepads",value:function(){var e=this;this.vrGamepads.length||(this.vrGamepads=[Box3D.Handedness.Left,Box3D.Handedness.Right].map(function(t){return e.createVrGamepad(t)}))}},{key:"createVrGamepad",value:function(e){var t=this,n=this.box3d.createNode(),i=function(e){var i=e.find(function(e){return"prefab"===e.type}),r=t.box3d.getAssetById(i.id);n.addChild(r.createInstance()),t.vrEnabled?t.showVrGamepads():t.hideVrGamepads()},r=function(e){var n=null,r=null;if(e.id.indexOf("Oculus")>-1)switch(r="oculusTouchCommon",e.hand){case"left":n="oculusTouchLeft";break;default:n="oculusTouchRight"}else e.id.indexOf("OpenVR")>-1&&(n="viveController");t.vrCommonLoadPromise||(t.vrCommonLoadPromise=r?t.box3d.importEntitiesFromUrl(t.staticBaseURI+"third-party/model3d/"+h.N+"/WebVR/"+r+"/entities.json",{isExternal:!0}):Promise.resolve()),t.vrGamepadLoadPromises[n]||(t.vrGamepadLoadPromises[n]=t.vrCommonLoadPromise.then(function(){return t.box3d.importEntitiesFromUrl(t.staticBaseURI+"third-party/model3d/"+h.N+"/WebVR/"+n+"/entities.json",{isExternal:!0})})),t.vrGamepadLoadPromises[n].then(i)},o=n.addComponent("motion_gamepad_device",{handPreference:e});return n.addComponent("intersection_checker",{objectTypeFilter:["mesh"]}),this.getScene().addChild(n),o.whenGamepadFound(r),n}},{key:"showVrGamepads",value:function(){this.vrGamepads.forEach(function(e){return e.setProperty("visible",!0)})}},{key:"hideVrGamepads",value:function(){this.vrGamepads.forEach(function(e){return e.setProperty("visible",!1)})}}]),t}(u.a);t.a=f},,,,,,,function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(6),s=n.n(a),l=n(2),u=n(1),c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=function(e){function t(e){var n=e.representation,o=e.token,a=e.sharedLink,s=e.sharedLinkPassword,u=e.logger;i(this,t);var c=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));c.representation=n,c.logger=u;var h=c.representation.info;return c.infoUrl=h?Object(l.c)(h.url,o,a,s):"",c.promise=new Promise(function(e,t){c.resolve=e,c.reject=t}),c}return o(t,e),h(t,null,[{key:"getStatus",value:function(e){var t=e.status;return t="object"===(void 0===t?"undefined":c(t))?t.state:e.temp_status.state}},{key:"getErrorCode",value:function(e){var t=e.status;return"object"===(void 0===t?"undefined":c(t))?t.code:e.temp_status.code}}]),h(t,[{key:"destroy",value:function(){clearTimeout(this.statusTimeout)}},{key:"updateStatus",value:function(){var e=this;return this.infoUrl?Object(l.k)(this.infoUrl).then(function(t){clearTimeout(e.statusTimeout),t.metadata&&(e.representation.metadata=t.metadata);var n="object"===c(t.status)?t.status.state:t.temp_status.state;"object"===c(e.representation.status)?e.representation.status.state=n:e.representation.temp_status.state=n,e.handleResponse()}):Promise.resolve()}},{key:"handleResponse",value:function(){var e=this,n=t.getStatus(this.representation),i=void 0;switch(n){case"error":switch(t.getErrorCode(this.representation)){case"error_password_protected":i="We're sorry the preview didn't load. This document is protected.";break;case"error_try_again_later":i="We're sorry the preview didn't load. Please try again later.";break;case"error_unsupported_format":i="We're sorry the preivew didn't load. This file may be corrupted.";break;default:i="We're sorry, the preview didn't load. Please refresh the page."}this.reject(i);break;case u._12:case u._13:this.resolve();break;case"none":case"pending":this.logger&&this.logger.setUnConverted(),this.emit("conversionpending"),this.statusTimeout=setTimeout(function(){e.updateStatus()},2e3)}}},{key:"getPromise",value:function(){return this.handleResponse(),this.promise}}]),t}(s.a);t.a=d},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(6),s=n.n(a),l=n(25),u=n(14),c=n(4),h=n(154),d=(n.n(h),n(1)),p=n(38),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),v=function(e){function t(e){i(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.vrButtonVisible=!1,n.el=e,n.controls=new l.a(n.el),n.uiRegistry=new p.a,n.handleToggleFullscreen=n.handleToggleFullscreen.bind(n),n.handleToggleVr=n.handleToggleVr.bind(n),n.handleReset=n.handleReset.bind(n),n}return o(t,e),f(t,[{key:"addUi",value:function(){this.addVrButton(),this.addFullscreenButton(),this.hideVrButton()}},{key:"addFullscreenButton",value:function(){this.controls.add("Enter fullscreen",this.handleToggleFullscreen,"bp-enter-fullscreen-icon",c.l),this.controls.add("Exit fullscreen",this.handleToggleFullscreen,"bp-exit-fullscreen-icon",c.m)}},{key:"addVrButton",value:function(){this.vrButtonEl=this.controls.add("Toggle VR display",this.handleToggleVr,"",c.b),this.vrButtonVisible?this.showVrButton():this.hideVrButton()}},{key:"handleSceneLoaded",value:function(){this.emit(u.g)}},{key:"handleToggleVr",value:function(){this.emit(u.j)}},{key:"handleToggleFullscreen",value:function(){this.emit(u.i)}},{key:"handleReset",value:function(){this.emit(u.f)}},{key:"showVrButton",value:function(){this.vrButtonVisible=!0,this.vrButtonEl&&this.vrButtonEl.classList.remove(d.A)}},{key:"hideVrButton",value:function(){this.vrButtonVisible=!1,this.vrButtonEl&&this.vrButtonEl.classList.add(d.A)}},{key:"setElementVisibility",value:function(e,t){t?e.classList.remove(d.A):e.classList.add(d.A)}},{key:"toggleElementVisibility",value:function(e){e.classList.toggle(d.A)}},{key:"destroy",value:function(){this.controls&&this.controls.destroy(),this.uiRegistry&&this.uiRegistry.unregisterAll(),this.controls=null,this.uiRegistry=null}}]),t}(s.a);t.a=v},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=document.createElement("div");return t.classList.add(c.j),t.textContent=e,t}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=document.createElement("button");return t.textContent=e,t.classList.add(h.d),t}function a(){var e=document.createElement("input");return e.type="checkbox",e}function s(){var e=document.createElement("div");return e.classList.add(c.h),e.classList.add(c.i),e.classList.add(c.g),e}function l(e){var t=document.createElement("div");if(t.classList.add(c.k),e){var n=r(e);t.appendChild(n)}return t}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=l(e),r=document.createElement("div");r.classList.add(h.u);var a=document.createElement("div");a.classList.add(h.l),a.innerHTML="<div class="+h.k+">\n                                        <menu class="+h.i+'>\n                                            <div class="link-group">\n                                                <ul></ul>\n                                            </div>\n                                        </menu>\n                                    </div>';var s=o(t);s.addEventListener("click",function(){a.classList.toggle(h.G)});var u=a.querySelector("ul");return n.forEach(function(e){var t=document.createElement("li"),n=document.createElement("a");n.classList.add(h.h),n.textContent=e.text,n.addEventListener("click",function(){s.textContent=e.text,a.classList.toggle(h.G),e.callback()}),t.appendChild(n),u.appendChild(t)}),r.appendChild(s),r.appendChild(a),i.appendChild(r),i}n.d(t,"b",function(){return a}),n.d(t,"c",function(){return u}),n.d(t,"d",function(){return r}),n.d(t,"e",function(){return s}),n.d(t,"f",function(){return l}),n.d(t,"a",function(){return p});var c=n(19),h=n(1),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),p=function(){function e(){i(this,e),this.registry={}}return d(e,[{key:"registerItem",value:function(e,t,n,i){if(!e)throw new Error("registerItem() requires a unique id");if(!t)throw new Error("registerItem() requires an element");if(this.registry[e]||(this.registry[e]={el:t,uuid:e,events:{}}),n&&i){t.addEventListener(n,i);var r=this.registry[e].events;r[n]=r[n]||[],r[n].push(i)}}},{key:"unregisterItem",value:function(e){var t=e;this.registry[t.uuid]&&(t.el.parentElement&&t.el.parentElement.removeChild(t.el),Object.keys(t.events).forEach(function(e){t.events[e].forEach(function(n){t.el.removeEventListener(e,n)}),delete t.events[e],delete t.el}),delete this.registry[t.uuid])}},{key:"unregisterAll",value:function(){var e=this;Object.keys(this.registry).forEach(function(t){e.unregisterItem(e.registry[t])})}}]),e}()},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=n(1),o=n(4),a=n(2),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=function(){function e(t){var n=this;i(this,e),this.popupClickHandler=function(e){e.preventDefault(),e.stopPropagation(),e.target===n.closeButtonEl||e.target===n.backdropEl?n.hide():e.target!==n.buttonEl||n.isButtonDisabled()||("function"==typeof n.buttonEl.handler?n.buttonEl.handler():n.hide())},this.keydownHandler=function(e){switch(Object(a.i)(e)){case"Esc":case"Escape":n.hide();break;default:return!1}return!0},this.containerEl=t;var r="popup_"+(new Date).getTime()+"_label";this.popupEl=document.createElement("div"),this.popupEl.className="bp-modal-dialog bp-is-hidden",this.popupEl.setAttribute("role","alert"),this.popupEl.setAttribute("aria-labeledby",r),this.popupEl.innerHTML=("\n            <div class='bp-modal-header'>\n                <button class='bp-modal-close-button'>\n                    "+o.g+"\n                </button>\n            </div>\n            <div class='bp-modal-content'>\n                <p class='bp-modal-message' id="+r+"></p>\n                <div class='bp-modal-actions'>\n                    <button class='bp-btn bp-btn-primary bp-popup-btn'> </button>\n                </div>\n            </div>\n            <div class='bp-modal-backdrop'> </div>\n        ").trim(),this.messageEl=this.popupEl.querySelector("#"+r),this.buttonEl=this.popupEl.querySelector("button.bp-popup-btn"),this.closeButtonEl=this.popupEl.querySelector("button.bp-modal-close-button"),this.contentEl=this.popupEl.querySelector("div.bp-modal-content"),this.backdropEl=this.popupEl.querySelector("div.bp-modal-backdrop"),this.buttonDisabled=!1,this.popupEl.addEventListener("click",this.popupClickHandler),document.addEventListener("keydown",this.keydownHandler);var s=document.createElement("div");s.className="bp-popup-modal",s.appendChild(this.popupEl),t.appendChild(s)}return s(e,[{key:"destroy",value:function(){if(this.popupEl){this.popupEl.removeEventListener("click",this.popupClickHandler),document.removeEventListener("keydown",this.keydownHandler);var e=this.popupEl.parentNode;e.parentNode.removeChild(e),this.popupEl=null}}},{key:"show",value:function(e,t,n){this.messageEl.textContent=e,this.buttonEl.textContent=t||"Okay",n&&"function"==typeof n&&(this.buttonEl.handler=n),this.popupEl.classList.remove(r.A),this.popupEl.focus()}},{key:"hide",value:function(){this.popupEl.classList.add(r.A)}},{key:"addContent",value:function(e,t){t?this.contentEl.insertBefore(e,this.contentEl.firstChild):this.contentEl.appendChild(e)}},{key:"isVisible",value:function(){return!this.popupEl.classList.contains(r.A)}},{key:"isButtonDisabled",value:function(){return this.buttonDisabled}},{key:"disableButton",value:function(){this.buttonDisabled=!0,this.buttonEl.classList.add("is-disabled")}},{key:"enableButton",value:function(){this.buttonDisabled=!1,this.buttonEl.classList.remove("is-disabled")}}]),e}();t.a=l},function(e,t,n){"use strict";n.d(t,"c",function(){return r}),n.d(t,"a",function(){return a}),n.d(t,"d",function(){return s}),n.d(t,"b",function(){return l});var i=["csv","log","md","tsv","txt"],r=["htm","html","xhtml","xml","xsd","xsl"],o=["as","as3","asm","bat","c","cc","cmake","cpp","cs","css","cxx","diff","erb","groovy","h","haml","hh","java","js","json","less","m","make","ml","mm","php","pl","plist","properties","py","rb","rst","sass","scala","script","scm","sml","sql","sh","vi","vim","webdoc","yaml"],a=o.concat(i).concat(r).concat(["doc","docx","gdoc","gsheet","msg","odp","ods","odt","pdf","ppt","pptx","rtf","wpd","xls","xlsm","xlsx"]),s=o.concat(i),l=o.concat(r)},,,,,,,,,,,,,,,,,function(e,t,n){(function(e,n){function i(e,t){return e.set(t[0],t[1]),e}function r(e,t){return e.add(t),e}function o(e,t){for(var n=-1,i=e?e.length:0;++n<i&&!1!==t(e[n],n,e););return e}function a(e,t){for(var n=-1,i=t.length,r=e.length;++n<i;)e[r+n]=t[n];return e}function s(e,t,n,i){var r=-1,o=e?e.length:0;for(i&&o&&(n=e[++r]);++r<o;)n=t(n,e[r],r,e);return n}function l(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}function u(e,t){return null==e?void 0:e[t]}function c(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function h(e){var t=-1,n=Array(e.size);return e.forEach(function(e,i){n[++t]=[i,e]}),n}function d(e,t){return function(n){return e(t(n))}}function p(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function f(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function v(){this.__data__=Vt?Vt(null):{}}function b(e){return this.has(e)&&delete this.__data__[e]}function m(e){var t=this.__data__;if(Vt){var n=t[e];return n===xe?void 0:n}return mt.call(t,e)?t[e]:void 0}function y(e){var t=this.__data__;return Vt?void 0!==t[e]:mt.call(t,e)}function g(e,t){return this.__data__[e]=Vt&&void 0===t?xe:t,this}function E(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function w(){this.__data__=[]}function k(e){var t=this.__data__,n=F(t,e);return!(n<0)&&(n==t.length-1?t.pop():St.call(t,n,1),!0)}function _(e){var t=this.__data__,n=F(t,e);return n<0?void 0:t[n][1]}function O(e){return F(this.__data__,e)>-1}function P(e,t){var n=this.__data__,i=F(n,e);return i<0?n.push([e,t]):n[i][1]=t,this}function S(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function L(){this.__data__={hash:new f,map:new(Ht||E),string:new f}}function C(e){return ae(this,e).delete(e)}function x(e){return ae(this,e).get(e)}function j(e){return ae(this,e).has(e)}function H(e,t){return ae(this,e).set(e,t),this}function T(e){this.__data__=new E(e)}function A(){this.__data__=new E}function M(e){return this.__data__.delete(e)}function V(e){return this.__data__.get(e)}function B(e){return this.__data__.has(e)}function I(e,t){var n=this.__data__;if(n instanceof E){var i=n.__data__;if(!Ht||i.length<Ce-1)return i.push([e,t]),this;n=this.__data__=new S(i)}return n.set(e,t),this}function R(e,t){var n=Wt(e)||ye(e)?l(e.length,String):[],i=n.length,r=!!i;for(var o in e)!t&&!mt.call(e,o)||r&&("length"==o||he(o,i))||n.push(o);return n}function D(e,t,n){var i=e[t];mt.call(e,t)&&me(i,n)&&(void 0!==n||t in e)||(e[t]=n)}function F(e,t){for(var n=e.length;n--;)if(me(e[n][0],t))return n;return-1}function z(e,t){return e&&ie(t,Pe(t),e)}function U(e,t,n,i,r,a,s){var l;if(i&&(l=a?i(e,r,a,s):i(e)),void 0!==l)return l;if(!_e(e))return e;var u=Wt(e);if(u){if(l=le(e),!t)return ne(e,l)}else{var h=qt(e),d=h==Me||h==Ve;if(Gt(e))return X(e,t);if(h==Re||h==He||d&&!a){if(c(e))return a?e:{};if(l=ue(d?{}:e),!t)return re(e,z(l,e))}else{if(!rt[h])return a?e:{};l=ce(e,h,U,t)}}s||(s=new T);var p=s.get(e);if(p)return p;if(s.set(e,l),!u)var f=n?oe(e):Pe(e);return o(f||e,function(r,o){f&&(o=r,r=e[o]),D(l,o,U(r,t,n,i,o,e,s))}),l}function N(e){return _e(e)?Ot(e):{}}function q(e,t,n){var i=t(e);return Wt(e)?i:a(i,n(e))}function W(e){return yt.call(e)}function G(e){return!(!_e(e)||pe(e))&&(we(e)||c(e)?gt:nt).test(ve(e))}function Z(e){if(!fe(e))return xt(e);var t=[];for(var n in Object(e))mt.call(e,n)&&"constructor"!=n&&t.push(n);return t}function X(e,t){if(t)return e.slice();var n=new e.constructor(e.length);return e.copy(n),n}function K(e){var t=new e.constructor(e.byteLength);return new kt(t).set(new kt(e)),t}function J(e,t){var n=t?K(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}function Q(e,t,n){return s(t?n(h(e),!0):h(e),i,new e.constructor)}function Y(e){var t=new e.constructor(e.source,tt.exec(e));return t.lastIndex=e.lastIndex,t}function $(e,t,n){return s(t?n(p(e),!0):p(e),r,new e.constructor)}function ee(e){return Ut?Object(Ut.call(e)):{}}function te(e,t){var n=t?K(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function ne(e,t){var n=-1,i=e.length;for(t||(t=Array(i));++n<i;)t[n]=e[n];return t}function ie(e,t,n,i){n||(n={});for(var r=-1,o=t.length;++r<o;){var a=t[r],s=i?i(n[a],e[a],a,n,e):void 0;D(n,a,void 0===s?e[a]:s)}return n}function re(e,t){return ie(e,Nt(e),t)}function oe(e){return q(e,Pe,Nt)}function ae(e,t){var n=e.__data__;return de(t)?n["string"==typeof t?"string":"hash"]:n.map}function se(e,t){var n=u(e,t);return G(n)?n:void 0}function le(e){var t=e.length,n=e.constructor(t);return t&&"string"==typeof e[0]&&mt.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function ue(e){return"function"!=typeof e.constructor||fe(e)?{}:N(_t(e))}function ce(e,t,n,i){var r=e.constructor;switch(t){case Ne:return K(e);case Te:case Ae:return new r(+e);case qe:return J(e,i);case We:case Ge:case Ze:case Xe:case Ke:case Je:case Qe:case Ye:case $e:return te(e,i);case Be:return Q(e,i,n);case Ie:case ze:return new r(e);case De:return Y(e);case Fe:return $(e,i,n);case Ue:return ee(e)}}function he(e,t){return!!(t=null==t?je:t)&&("number"==typeof e||it.test(e))&&e>-1&&e%1==0&&e<t}function de(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function pe(e){return!!vt&&vt in e}function fe(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||pt)}function ve(e){if(null!=e){try{return bt.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function be(e){return U(e,!0,!0)}function me(e,t){return e===t||e!==e&&t!==t}function ye(e){return Ee(e)&&mt.call(e,"callee")&&(!Pt.call(e,"callee")||yt.call(e)==He)}function ge(e){return null!=e&&ke(e.length)&&!we(e)}function Ee(e){return Oe(e)&&ge(e)}function we(e){var t=_e(e)?yt.call(e):"";return t==Me||t==Ve}function ke(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=je}function _e(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Oe(e){return!!e&&"object"==typeof e}function Pe(e){return ge(e)?R(e):Z(e)}function Se(){return[]}function Le(){return!1}var Ce=200,xe="__lodash_hash_undefined__",je=9007199254740991,He="[object Arguments]",Te="[object Boolean]",Ae="[object Date]",Me="[object Function]",Ve="[object GeneratorFunction]",Be="[object Map]",Ie="[object Number]",Re="[object Object]",De="[object RegExp]",Fe="[object Set]",ze="[object String]",Ue="[object Symbol]",Ne="[object ArrayBuffer]",qe="[object DataView]",We="[object Float32Array]",Ge="[object Float64Array]",Ze="[object Int8Array]",Xe="[object Int16Array]",Ke="[object Int32Array]",Je="[object Uint8Array]",Qe="[object Uint8ClampedArray]",Ye="[object Uint16Array]",$e="[object Uint32Array]",et=/[\\^$.*+?()[\]{}|]/g,tt=/\w*$/,nt=/^\[object .+?Constructor\]$/,it=/^(?:0|[1-9]\d*)$/,rt={};rt[He]=rt["[object Array]"]=rt[Ne]=rt[qe]=rt[Te]=rt[Ae]=rt[We]=rt[Ge]=rt[Ze]=rt[Xe]=rt[Ke]=rt[Be]=rt[Ie]=rt[Re]=rt[De]=rt[Fe]=rt[ze]=rt[Ue]=rt[Je]=rt[Qe]=rt[Ye]=rt[$e]=!0,rt["[object Error]"]=rt[Me]=rt["[object WeakMap]"]=!1;var ot="object"==typeof e&&e&&e.Object===Object&&e,at="object"==typeof self&&self&&self.Object===Object&&self,st=ot||at||Function("return this")(),lt="object"==typeof t&&t&&!t.nodeType&&t,ut=lt&&"object"==typeof n&&n&&!n.nodeType&&n,ct=ut&&ut.exports===lt,ht=Array.prototype,dt=Function.prototype,pt=Object.prototype,ft=st["__core-js_shared__"],vt=function(){var e=/[^.]+$/.exec(ft&&ft.keys&&ft.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),bt=dt.toString,mt=pt.hasOwnProperty,yt=pt.toString,gt=RegExp("^"+bt.call(mt).replace(et,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Et=ct?st.Buffer:void 0,wt=st.Symbol,kt=st.Uint8Array,_t=d(Object.getPrototypeOf,Object),Ot=Object.create,Pt=pt.propertyIsEnumerable,St=ht.splice,Lt=Object.getOwnPropertySymbols,Ct=Et?Et.isBuffer:void 0,xt=d(Object.keys,Object),jt=se(st,"DataView"),Ht=se(st,"Map"),Tt=se(st,"Promise"),At=se(st,"Set"),Mt=se(st,"WeakMap"),Vt=se(Object,"create"),Bt=ve(jt),It=ve(Ht),Rt=ve(Tt),Dt=ve(At),Ft=ve(Mt),zt=wt?wt.prototype:void 0,Ut=zt?zt.valueOf:void 0;f.prototype.clear=v,f.prototype.delete=b,f.prototype.get=m,f.prototype.has=y,f.prototype.set=g,E.prototype.clear=w,E.prototype.delete=k,E.prototype.get=_,E.prototype.has=O,E.prototype.set=P,S.prototype.clear=L,S.prototype.delete=C,S.prototype.get=x,S.prototype.has=j,S.prototype.set=H,T.prototype.clear=A,T.prototype.delete=M,T.prototype.get=V,T.prototype.has=B,T.prototype.set=I;var Nt=Lt?d(Lt,Object):Se,qt=W;(jt&&qt(new jt(new ArrayBuffer(1)))!=qe||Ht&&qt(new Ht)!=Be||Tt&&"[object Promise]"!=qt(Tt.resolve())||At&&qt(new At)!=Fe||Mt&&"[object WeakMap]"!=qt(new Mt))&&(qt=function(e){var t=yt.call(e),n=t==Re?e.constructor:void 0,i=n?ve(n):void 0;if(i)switch(i){case Bt:return qe;case It:return Be;case Rt:return"[object Promise]";case Dt:return Fe;case Ft:return"[object WeakMap]"}return t});var Wt=Array.isArray,Gt=Ct||Le;n.exports=be}).call(t,n(13),n(96)(e))},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(25),s=n(9),l=n(5),u=n(4),c=n(2),h=n(1),d=function(){function e(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),f=function(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var r=Object.getPrototypeOf(e);return null===r?void 0:Object(c.k)(r,t,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},v=function(e){function t(e){i(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.pan=n.pan.bind(n),n.stopPanning=n.stopPanning.bind(n),n.zoomIn=n.zoomIn.bind(n),n.zoomOut=n.zoomOut.bind(n),n.handleMouseDown=n.handleMouseDown.bind(n),n.handleMouseUp=n.handleMouseUp.bind(n),n.cancelDragEvent=n.cancelDragEvent.bind(n),n.finishLoading=n.finishLoading.bind(n),n.errorHandler=n.errorHandler.bind(n),n.isMobile&&(l.a.isIOS()?(n.mobileZoomStartHandler=n.mobileZoomStartHandler.bind(n),n.mobileZoomEndHandler=n.mobileZoomEndHandler.bind(n)):(n.mobileZoomStartHandler=n.mobileZoomStartHandler.bind(n),n.mobileZoomChangeHandler=n.mobileZoomChangeHandler.bind(n),n.mobileZoomEndHandler=n.mobileZoomEndHandler.bind(n))),n}return o(t,e),p(t,[{key:"destroy",value:function(){this.unbindDOMListeners(),this.controls&&"function"==typeof this.controls.destroy&&this.controls.destroy(),this.imageEl&&this.imageEl.removeEventListener("mouseup",this.handleMouseUp),f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"finishLoading",value:function(){var e=this;if(!this.isDestroyed()){this.setOriginalImageSize(this.imageEl).then(function(){e.loadUI(),e.zoom(),e.imageEl.classList.remove(h.B),e.loaded=!0,e.emit("load")}).catch(this.errorHandler)}}},{key:"zoomIn",value:function(){this.zoom("in")}},{key:"zoomOut",value:function(){this.zoom("out")}},{key:"resize",value:function(){this.zoom(),f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"resize",this).call(this)}},{key:"startPanning",value:function(e,t){this.isPannable&&(this.panStartX=e,this.panStartY=t,this.panStartScrollLeft=this.wrapperEl.scrollLeft,this.panStartScrollTop=this.wrapperEl.scrollTop,document.addEventListener("mousemove",this.pan),document.addEventListener("mouseup",this.stopPanning),this.imageEl.classList.add("panning"),this.isPanning=!0,this.emit("panstart"))}},{key:"pan",value:function(e){if(this.isPanning){var t=e.clientX-this.panStartX,n=e.clientY-this.panStartY;this.wrapperEl.scrollLeft=this.panStartScrollLeft-t,this.wrapperEl.scrollTop=this.panStartScrollTop-n,this.didPan=!0,this.emit("pan")}}},{key:"stopPanning",value:function(){document.removeEventListener("mousemove",this.pan),document.removeEventListener("mouseup",this.stopPanning),this.imageEl.classList.remove("panning"),this.isPanning=!1,this.emit("panend")}},{key:"updateCursor",value:function(){this.isPannable?(this.isZoomable=!1,this.imageEl.classList.add("pannable"),this.imageEl.classList.remove("zoomable")):(this.isZoomable=!0,this.imageEl.classList.remove("pannable"),this.imageEl.classList.add("zoomable"))}},{key:"loadUI",value:function(){this.controls=new a.a(this.containerEl),this.bindControlListeners()}},{key:"setOriginalImageSize",value:function(e){return new Promise(function(t){e.naturalWidth&&e.naturalHeight?(e.setAttribute("originalWidth",e.naturalWidth),e.setAttribute("originalHeight",e.naturalHeight),t()):Object(c.k)(e.src,{},"text").then(function(n){var i=new DOMParser,r=i.parseFromString(n,"image/svg+xml");try{var o=r.documentElement.getAttribute("viewBox"),a=o.split(" "),s=d(a,4),l=s[2],u=s[3],c=u?l/u:l;e.setAttribute("originalWidth",Math.round(150*c)),e.setAttribute("originalHeight",150)}catch(t){e.setAttribute("originalWidth",300),e.setAttribute("originalHeight",150)}finally{t()}}).catch(t)})}},{key:"bindControlListeners",value:function(){this.controls.add("Zoom out",this.zoomOut,"bp-image-zoom-out-icon",u.v),this.controls.add("Zoom in",this.zoomIn,"bp-image-zoom-in-icon",u.u)}},{key:"bindDOMListeners",value:function(){this.imageEl.addEventListener("mousedown",this.handleMouseDown),this.imageEl.addEventListener("mouseup",this.handleMouseUp),this.imageEl.addEventListener("dragstart",this.cancelDragEvent),this.isMobile&&(l.a.isIOS()?(this.imageEl.addEventListener("gesturestart",this.mobileZoomStartHandler),this.imageEl.addEventListener("gestureend",this.mobileZoomEndHandler)):(this.imageEl.addEventListener("touchstart",this.mobileZoomStartHandler),this.imageEl.addEventListener("touchmove",this.mobileZoomChangeHandler),this.imageEl.addEventListener("touchend",this.mobileZoomEndHandler)))}},{key:"unbindDOMListeners",value:function(){document.removeEventListener("mousemove",this.pan),document.removeEventListener("mouseup",this.stopPanning),this.imageEl&&(this.imageEl.removeEventListener("mousedown",this.handleMouseDown),this.imageEl.removeEventListener("mouseup",this.handleMouseUp),this.imageEl.removeEventListener("dragstart",this.cancelDragEvent),this.imageEl.removeEventListener("gesturestart",this.mobileZoomStartHandler),this.imageEl.removeEventListener("gestureend",this.mobileZoomEndHandler),this.imageEl.removeEventListener("touchstart",this.mobileZoomStartHandler),this.imageEl.removeEventListener("touchmove",this.mobileZoomChangeHandler),this.imageEl.removeEventListener("touchend",this.mobileZoomEndHandler))}},{key:"errorHandler",value:function(e){var t=e;e instanceof Error&&(t.displayMessage="We're sorry, the preview didn't load. Please refresh the page."),this.emit("error",t)}},{key:"onKeydown",value:function(e){return!!this.controls&&("Shift++"===e?(this.zoomIn(),!0):"Shift+_"===e&&(this.zoomOut(),!0))}},{key:"handleMouseDown",value:function(e){var t=e.button,n=e.ctrlKey,i=e.metaKey,r=e.clientX,o=e.clientY;this.didPan=!1,!("number"!=typeof t||t<2)||n||i||(this.startPanning(r,o),e.preventDefault())}},{key:"handleMouseUp",value:function(e){var t=e.button,n=e.ctrlKey,i=e.metaKey;!("number"!=typeof t||t<2)||n||i||(!this.isPannable&&this.isZoomable?this.zoom("in"):this.didPan||this.zoom("reset"),e.preventDefault())}},{key:"cancelDragEvent",value:function(e){e.preventDefault(),e.stopPropagation()}},{key:"disableViewerControls",value:function(){f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"disableViewerControls",this).call(this),this.unbindDOMListeners(),this.imageEl.classList.remove("zoomable"),this.imageEl.classList.remove("pannable")}},{key:"enableViewerControls",value:function(){f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"enableViewerControls",this).call(this),this.bindDOMListeners(),this.isMobile||this.updateCursor()}},{key:"zoom",value:function(){}}]),t}(s.a);t.a=v},function(e,t,n){(function(t){function n(e,t,n){function r(t){var n=v,i=b;return v=b=void 0,O=t,y=e.apply(i,n)}function o(e){return O=e,g=setTimeout(c,t),P?r(e):y}function l(e){var n=e-_,i=e-O,r=t-n;return S?w(r,m-i):r}function u(e){var n=e-_,i=e-O;return void 0===_||n>=t||n<0||S&&i>=m}function c(){var e=k();if(u(e))return h(e);g=setTimeout(c,l(e))}function h(e){return g=void 0,L&&v?r(e):(v=b=void 0,y)}function d(){void 0!==g&&clearTimeout(g),O=0,v=_=b=g=void 0}function p(){return void 0===g?y:h(k())}function f(){var e=k(),n=u(e);if(v=arguments,b=this,_=e,n){if(void 0===g)return o(_);if(S)return g=setTimeout(c,t),r(_)}return void 0===g&&(g=setTimeout(c,t)),y}var v,b,m,y,g,_,O=0,P=!1,S=!1,L=!0;if("function"!=typeof e)throw new TypeError(s);return t=a(t)||0,i(n)&&(P=!!n.leading,S="maxWait"in n,m=S?E(a(n.maxWait)||0,t):m,L="trailing"in n?!!n.trailing:L),f.cancel=d,f.flush=p,f}function i(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function r(e){return!!e&&"object"==typeof e}function o(e){return"symbol"==typeof e||r(e)&&g.call(e)==u}function a(e){if("number"==typeof e)return e;if(o(e))return l;if(i(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=i(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(c,"");var n=d.test(e);return n||p.test(e)?f(e.slice(2),n?2:8):h.test(e)?l:+e}var s="Expected a function",l=NaN,u="[object Symbol]",c=/^\s+|\s+$/g,h=/^[-+]0x[0-9a-f]+$/i,d=/^0b[01]+$/i,p=/^0o[0-7]+$/i,f=parseInt,v="object"==typeof t&&t&&t.Object===Object&&t,b="object"==typeof self&&self&&self.Object===Object&&self,m=v||b||Function("return this")(),y=Object.prototype,g=y.toString,E=Math.max,w=Math.min,k=function(){return m.Date.now()};e.exports=n}).call(t,n(13))},function(e,t){!function(e){"use strict";function t(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function n(e){return"string"!=typeof e&&(e=String(e)),e}function i(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return m.iterable&&(t[Symbol.iterator]=function(){return t}),t}function r(e){this.map={},e instanceof r?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function o(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function a(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function s(e){var t=new FileReader,n=a(t);return t.readAsArrayBuffer(e),n}function l(e){var t=new FileReader,n=a(t);return t.readAsText(e),n}function u(e){for(var t=new Uint8Array(e),n=new Array(t.length),i=0;i<t.length;i++)n[i]=String.fromCharCode(t[i]);return n.join("")}function c(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function h(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"==typeof e)this._bodyText=e;else if(m.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(m.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(m.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(m.arrayBuffer&&m.blob&&g(e))this._bodyArrayBuffer=c(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!m.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!E(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=c(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):m.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},m.blob&&(this.blob=function(){var e=o(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?o(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(s)}),this.text=function(){var e=o(this);if(e)return e;if(this._bodyBlob)return l(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(u(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},m.formData&&(this.formData=function(){return this.text().then(f)}),this.json=function(){return this.text().then(JSON.parse)},this}function d(e){var t=e.toUpperCase();return w.indexOf(t)>-1?t:e}function p(e,t){t=t||{};var n=t.body;if(e instanceof p){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new r(e.headers)),this.method=e.method,this.mode=e.mode,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new r(t.headers)),this.method=d(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function f(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),i=n.shift().replace(/\+/g," "),r=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(i),decodeURIComponent(r))}}),t}function v(e){var t=new r;return e.split(/\r?\n/).forEach(function(e){var n=e.split(":"),i=n.shift().trim();if(i){var r=n.join(":").trim();t.append(i,r)}}),t}function b(e,t){t||(t={}),this.type="default",this.status="status"in t?t.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new r(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var m={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(m.arrayBuffer)var y=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],g=function(e){return e&&DataView.prototype.isPrototypeOf(e)},E=ArrayBuffer.isView||function(e){return e&&y.indexOf(Object.prototype.toString.call(e))>-1};r.prototype.append=function(e,i){e=t(e),i=n(i);var r=this.map[e];this.map[e]=r?r+","+i:i},r.prototype.delete=function(e){delete this.map[t(e)]},r.prototype.get=function(e){return e=t(e),this.has(e)?this.map[e]:null},r.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},r.prototype.set=function(e,i){this.map[t(e)]=n(i)},r.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},r.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),i(e)},r.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),i(e)},r.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),i(e)},m.iterable&&(r.prototype[Symbol.iterator]=r.prototype.entries);var w=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];p.prototype.clone=function(){return new p(this,{body:this._bodyInit})},h.call(p.prototype),h.call(b.prototype),b.prototype.clone=function(){return new b(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new r(this.headers),url:this.url})},b.error=function(){var e=new b(null,{status:0,statusText:""});return e.type="error",e};var k=[301,302,303,307,308];b.redirect=function(e,t){if(-1===k.indexOf(t))throw new RangeError("Invalid status code");return new b(null,{status:t,headers:{location:e}})},e.Headers=r,e.Request=p,e.Response=b,e.fetch=function(e,t){return new Promise(function(n,i){var r=new p(e,t),o=new XMLHttpRequest;o.onload=function(){var e={status:o.status,statusText:o.statusText,headers:v(o.getAllResponseHeaders()||"")};e.url="responseURL"in o?o.responseURL:e.headers.get("X-Request-URL");var t="response"in o?o.response:o.responseText;n(new b(t,e))},o.onerror=function(){i(new TypeError("Network request failed"))},o.ontimeout=function(){i(new TypeError("Network request failed"))},o.open(r.method,r.url,!0),"include"===r.credentials&&(o.withCredentials=!0),"responseType"in o&&m.blob&&(o.responseType="blob"),r.headers.forEach(function(e,t){o.setRequestHeader(t,e)}),o.send(void 0===r._bodyInit?null:r._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!=typeof self?self:this)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(6),s=n.n(a),l=n(10),u=n(5),c=n(2),h=n(4),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),p="\n    <div class='bp-page-num-wrapper'>\n        <span class=bp-current-page>1</span>\n        <input type='number' pattern='[0-9]*' min='1'  value='' size='3' class='bp-page-num-input' />\n        <span class='bp-page-num-divider'>&nbsp;/&nbsp;</span>\n        <span class='bp-total-pages'>1</span>\n    </div>".replace(/>\s*</g,"><"),f=function(e){function t(e,n){i(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return o.controls=e,o.controlsEl=e.controlsEl,o.contentEl=n,o.pageNumInputBlurHandler=o.pageNumInputBlurHandler.bind(o),o.pageNumInputKeydownHandler=o.pageNumInputKeydownHandler.bind(o),o.setPreviousPage=o.setPreviousPage.bind(o),o.showPageNumInput=o.showPageNumInput.bind(o),o.setNextPage=o.setNextPage.bind(o),o}return o(t,e),d(t,[{key:"add",value:function(e,t){this.controls.add("Previous page",this.setPreviousPage,"bp-previous-page-icon bp-previous-page",h.i),this.controls.add("Click to enter page number",this.showPageNumInput,"bp-page-num",p),this.controls.add("Next page",this.setNextPage,"bp-next-page-icon bp-next-page",h.h);var n=this.controlsEl.querySelector(".bp-page-num");this.totalPagesEl=n.querySelector(".bp-total-pages"),this.totalPagesEl.textContent=t,this.currentPageEl=n.querySelector(".bp-current-page"),this.currentPageEl.textContent=e,this.pageNumInputEl=n.querySelector(".bp-page-num-input"),this.checkPaginationButtons()}},{key:"showPageNumInput",value:function(){this.controlsEl.classList.add("show-page-number-input"),this.pageNumInputEl.value=this.getCurrentPageNumber(),this.pageNumInputEl.focus(),this.pageNumInputEl.select(),this.pageNumInputEl.addEventListener("blur",this.pageNumInputBlurHandler),this.pageNumInputEl.addEventListener("keydown",this.pageNumInputKeydownHandler)}},{key:"hidePageNumInput",value:function(){this.controlsEl.classList.remove("show-page-number-input"),this.pageNumInputEl.removeEventListener("blur",this.pageNumInputBlurHandler),this.pageNumInputEl.removeEventListener("keydown",this.pageNumInputKeydownHandler)}},{key:"checkPaginationButtons",value:function(){var e=this.controlsEl.querySelector(".bp-page-num"),t=this.controlsEl.querySelector(".bp-previous-page"),n=this.controlsEl.querySelector(".bp-next-page"),i="Safari"===u.a.getName()&&l.a.isFullscreen(this.controlsEl);e&&(this.getTotalPages()<=1||i?e.disabled=!0:e.disabled=!1),t&&(1===this.getCurrentPageNumber()?t.disabled=!0:t.disabled=!1),n&&(this.getCurrentPageNumber()===this.getTotalPages()?n.disabled=!0:n.disabled=!1)}},{key:"updateCurrentPage",value:function(e){this.pageNumInputEl&&(this.pageNumInputEl.value=e),this.currentPageEl&&this.setCurrentPageNumber(e),this.checkPaginationButtons()}},{key:"setPreviousPage",value:function(){this.emit("pagechange",this.getCurrentPageNumber()-1)}},{key:"setNextPage",value:function(){this.emit("pagechange",this.getCurrentPageNumber()+1)}},{key:"getCurrentPageNumber",value:function(){return parseInt(this.currentPageEl.textContent,10)}},{key:"setCurrentPageNumber",value:function(e){this.currentPageEl.textContent=e}},{key:"getTotalPages",value:function(){return parseInt(this.totalPagesEl.textContent,10)}},{key:"pageNumInputBlurHandler",value:function(e){var t=e.target,n=parseInt(t.value,10);Number.isNaN(n)||this.emit("pagechange",n),this.hidePageNumInput()}},{key:"pageNumInputKeydownHandler",value:function(e){switch(Object(c.i)(e)){case"Enter":case"Tab":this.contentEl.focus(),"Explorer"!==u.a.getName()&&e.target.blur(),e.stopPropagation(),e.preventDefault();break;case"Escape":this.hidePageNumInput(),this.contentEl.focus(),e.stopPropagation(),e.preventDefault()}}}]),t}(s.a);t.a=f},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(8),s=n(2),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},c=function(e){function t(){return i(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),l(t,[{key:"determineViewer",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"determineViewer",this).call(this,e,n);if(i&&Object(s.x)(e))return i}}]),t}(a.a);t.a=c},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(9),s=n(10),l=n(37),u=n(29),c=n(5),h=n(64),d=n(2),p=n(14),f=n(65),v=n(155),b=(n.n(v),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),m=function(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var r=Object.getPrototypeOf(e);return null===r?void 0:Object(d.k)(r,t,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},y=function(e){function t(e){i(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleToggleVr=n.handleToggleVr.bind(n),n.handleReset=n.handleReset.bind(n),n.handleSceneLoaded=n.handleSceneLoaded.bind(n),n.handleShowVrButton=n.handleShowVrButton.bind(n),n.handleError=n.handleError.bind(n),n.handleContextRestored=n.handleContextRestored.bind(n),n.handleContextLost=n.handleContextLost.bind(n),n.onVrPresentChange=n.onVrPresentChange.bind(n),n.handleEnableVr=n.handleEnableVr.bind(n),n.handleDisableVr=n.handleDisableVr.bind(n),n.postLoad=n.postLoad.bind(n),n}return o(t,e),b(t,[{key:"setup",value:function(){m(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setup",this).call(this),this.renderer=null,this.wrapperEl=this.containerEl.appendChild(document.createElement("div")),this.wrapperEl.className=p.a,this.contextNotification=new h.a(this.wrapperEl),this.loadTimeout=5e4}},{key:"createSubModules",value:function(){this.controls=new l.a(this.wrapperEl),this.renderer=new u.a(this.wrapperEl,this.boxSdk)}},{key:"attachEventHandlers",value:function(){this.controls&&(this.controls.on(p.i,this.toggleFullscreen),this.controls.on(p.j,this.handleToggleVr),this.controls.on(p.f,this.handleReset)),this.renderer&&(this.renderer.on(p.g,this.handleSceneLoaded),this.renderer.on(p.h,this.handleShowVrButton),this.renderer.on(p.d,this.handleError),this.renderer.on(p.l,this.handleContextRestored),this.renderer.on(p.k,this.handleContextLost)),window.addEventListener("vrdisplaypresentchange",this.onVrPresentChange),window.addEventListener("vrdisplayactivate",this.handleEnableVr),window.addEventListener("vrdisplaydeactivate",this.handleDisableVr)}},{key:"detachEventHandlers",value:function(){this.controls&&(this.controls.removeListener(p.i,this.toggleFullscreen),this.controls.removeListener(p.j,this.handleToggleVr),this.controls.removeListener(p.f,this.handleReset)),this.renderer&&(this.renderer.removeListener(p.g,this.handleSceneLoaded),this.renderer.removeListener(p.h,this.handleShowVrButton),this.renderer.removeListener(p.d,this.handleError),this.renderer.removeListener(p.l,this.handleContextRestored),this.renderer.removeListener(p.k,this.handleContextLost)),window.removeEventListener("vrdisplaypresentchange",this.onVrPresentChange),window.removeEventListener("vrdisplayactivate",this.handleEnableVr),window.removeEventListener("vrdisplaydeactivate",this.handleDisableVr)}},{key:"resize",value:function(){m(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"resize",this).call(this),this.renderer&&this.renderer.resize()}},{key:"destroy",value:function(){m(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this.detachEventHandlers(),this.destroySubModules(),this.destroyed=!0}},{key:"destroySubModules",value:function(){this.controls&&this.controls.destroy(),this.renderer&&this.renderer.destroy()}},{key:"load",value:function(){return this.setup(),m(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"load",this).call(this),Promise.all([this.loadAssets(f.a),this.getRepStatus().getPromise()]).then(this.postLoad).catch(this.handleAssetError)}},{key:"postLoad",value:function(){var e=this.options,t=e.representation,n=e.token,i=e.apiHost,r=e.sharedLink,o=t.content.url_template;this.boxSdk=new BoxSDK({token:n,sharedLink:r,apiBase:i}),this.createSubModules(),this.attachEventHandlers(),this.renderer.load(this.createContentUrl(o,"entities.json"),this.options).catch(this.handleError)}},{key:"prefetch",value:function(e){var t=e.assets,n=void 0===t||t,i=e.content,r=void 0===i||i;n&&this.prefetchAssets(f.a);var o=this.options.representation;if(r&&this.isRepresentationReady(o)){var a=o.content.url_template;Object(d.k)(this.createContentUrl(a,"entities.json"),this.appendAuthHeader(),"any")}}},{key:"toggleFullscreen",value:function(){s.a.toggle(this.containerEl)}},{key:"handleContextLost",value:function(){this.contextNotification.show("WebGL Context Lost"),this.destroySubModules()}},{key:"handleContextRestored",value:function(){this.detachEventHandlers(),this.contextNotification.show("WebGL Context Restored"),this.emit("progressstart"),this.previewUI.showLoadingIndicator(),this.postLoad()}},{key:"handleToggleVr",value:function(){this.renderer.toggleVr()}},{key:"handleEnableVr",value:function(){this.renderer.enableVr()}},{key:"handleDisableVr",value:function(){this.renderer.disableVr()}},{key:"onVrPresentChange",value:function(){var e=this.renderer.box3d.getVrDisplay();c.a.isMobile()&&(e&&e.isPresenting?this.wrapperEl.classList.add("vr-enabled"):this.wrapperEl.classList.remove("vr-enabled"),this.controls&&(this.controls.vrEnabled=e&&e.isPresenting))}},{key:"handleSceneLoaded",value:function(){this.controls&&this.controls.addUi(),this.emit(p.e),this.loaded=!0}},{key:"handleShowVrButton",value:function(){this.controls.showVrButton()}},{key:"handleReset",value:function(){this.renderer&&this.renderer.reset()}},{key:"handleError",value:function(e){this.emit(p.d,e)}}]),t}(a.a);t.a=y},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=n(1),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(t){var n=this;i(this,e),this.clickHandler=function(e){e.stopPropagation(),e.target===n.buttonEl&&n.hide()};var r="notification_"+(new Date).getTime()+"_label";this.notificationEl=document.createElement("div"),this.notificationEl.className="bp-notification bp-is-hidden",this.notificationEl.addEventListener("click",this.clickHandler),this.notificationEl.setAttribute("role","alert"),this.notificationEl.setAttribute("aria-labeledby",r),this.notificationEl.innerHTML=('\n            <span id="'+r+'"></span>\n            <button class="close-btn">Okay</button>\n        ').trim(),this.messageEl=this.notificationEl.querySelector("#"+r),this.buttonEl=this.notificationEl.querySelector("button");var o=document.createElement("div");o.className="bp-notifications-wrapper",o.appendChild(this.notificationEl),t.appendChild(o)}return o(e,[{key:"show",value:function(e,t){this.messageEl.textContent=e,this.buttonEl.textContent=t||"Okay",this.notificationEl.classList.remove(r.A),this.notificationEl.focus(),this.timeout=setTimeout(this.hide.bind(this),5e3)}},{key:"hide",value:function(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.notificationEl&&this.notificationEl.classList.add(r.A)}}]),e}();t.a=a},function(e,t,n){"use strict";var i=n(1),r="third-party/model3d/"+i.N+"/",o=[r+"boxsdk.min.js",r+"three.min.js",r+"box3d-runtime.min.js",r+"webvr-polyfill.js",r+"WebVR/VRConfig.js"];t.a=o},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(161),s=(n.n(a),n(67)),l=n(5),u=n(39),c=n(1),h=n(4),d=n(40),p=n(2),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),v=function(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var r=Object.getPrototypeOf(e);return null===r?void 0:Object(p.k)(r,t,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},b=196608,m="third-party/text/"+c._15+"/",y=[m+"highlight.min.js"],g=[m+"github.min.css"],E=function(e){function t(){var e,n,o,a;i(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=o=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),o.postLoad=function(){var e=o.options,t=e.representation,n=e.file,i=t.content.url_template,r=n.extension,a=n.size;o.truncated=a>b;var s=o.truncated?{Range:"bytes=0-"+b}:{};Object(p.k)(o.createContentUrlWithAuthParams(i),s,"text").then(function(e){if(!o.isDestroyed()){var t=e;o.truncated&&(t+="..."),-1===d.b.indexOf(r)?o.finishLoading(t,!1):o.initHighlightJs(t)}}).catch(o.handleAssetError)},a=n,r(o,a)}return o(t,e),f(t,[{key:"destroy",value:function(){if(this.textEl){var e=this.textEl.querySelector(".bp-btn-download");e&&e.removeEventListener("click",this.download.bind(this))}this.printIframe=null,v(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"load",value:function(){this.setup(),v(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"load",this).call(this);var e=this.loadAssets(this.getJS(),this.getCSS());return Promise.all([e,this.getRepStatus().getPromise()]).then(this.postLoad).catch(this.handleAssetError)}},{key:"prefetch",value:function(e){var t=e.assets,n=void 0===t||t,i=e.content,r=void 0===i||i;n&&this.prefetchAssets(this.getJS(),this.getCSS());var o=this.options.representation;if(r&&this.isRepresentationReady(o)){var a=o.content.url_template;Object(p.k)(this.createContentUrlWithAuthParams(a),"any")}}},{key:"print",value:function(){var e=this;if(!this.printReady)return this.preparePrint(this.getCSS().concat("preview.css")),this.printPopup.show("Preparing to print...","Print",function(){e.printPopup.hide(),e.printIframe()}),void this.printPopup.disableButton();this.printIframe(),this.emit("printsuccess")}},{key:"setup",value:function(){v(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setup",this).call(this),this.textEl=this.containerEl.appendChild(document.createElement("pre")),this.textEl.className="bp-text bp-text-plain hljs",this.textEl.classList.add(c.A),this.codeEl=this.textEl.appendChild(document.createElement("code")),this.codeEl.classList.add(this.options.file.extension),this.truncated=!1,this.initPrint()}},{key:"getJS",value:function(){return y}},{key:"getCSS",value:function(){return g}},{key:"finishLoading",value:function(e,t){t?this.codeEl.innerHTML=e:this.codeEl.textContent=e,this.loadUI(),this.textEl.classList.remove(c.A),this.loaded=!0,this.emit("load"),this.truncated&&this.showTruncatedDownloadButton(),this.workerSrc&&URL.revokeObjectURL(this.workerSrc)}},{key:"initHighlightJs",value:function(e){var t=this,n=new Blob(["onmessage=function(e){importScripts(e.data.highlightSrc);postMessage(self.hljs.highlightAuto(e.data.text).value)};"],{type:"application/javascript"});this.workerSrc=URL.createObjectURL(n);var i=new Worker(this.workerSrc);i.onmessage=function(e){t.finishLoading(e.data,!0)};var r=Object(p.e)(this.options.location),o=r("third-party/text/"+c._15+"/highlight.min.js");i.postMessage({highlightSrc:o,text:e})}},{key:"initPrint",value:function(){this.printPopup=new u.a(this.containerEl);var e=document.createElement("div");e.className="bp-print-check "+c.A,e.innerHTML=h.r.trim();var t=document.createElement("div");t.classList.add("bp-crawler"),t.innerHTML="\n            <div></div>\n            <div></div>\n            <div></div>".trim(),this.printPopup.addContent(t,!0),this.printPopup.addContent(e,!0),this.printPopup.loadingIndicator=t,this.printPopup.printCheckmark=e}},{key:"preparePrint",value:function(e){var t=this,n=Object(p.e)(this.options.location);this.printframe=Object(p.q)(this.textEl.outerHTML),e.forEach(function(e){t.printframe.contentDocument.head.appendChild(Object(p.h)(n(e)))}),setTimeout(function(){t.printPopup&&(t.printPopup.enableButton(),t.printPopup.messageEl.textContent="Ready to print.",t.printPopup.loadingIndicator.classList.add(c.A),t.printPopup.printCheckmark.classList.remove(c.A)),t.printReady=!0},5e3)}},{key:"printIframe",value:function(){this.printframe.contentWindow.focus(),"Explorer"===l.a.getName()||"Edge"===l.a.getName()?this.printframe.contentWindow.document.execCommand("print",!1,null):this.printframe.contentWindow.print()}},{key:"showTruncatedDownloadButton",value:function(){var e=document.createElement("div");e.classList.add("bp-text-truncated");var t=document.createElement("p");t.textContent="This file has been truncated due to size limits. Please download to view the whole file.";var n=document.createElement("button");n.className="bp-btn bp-btn-primary bp-btn-download",n.textContent="Download File",e.appendChild(t),e.appendChild(n),this.textEl.appendChild(e),n.addEventListener("click",this.download.bind(this))}},{key:"download",value:function(){this.emit("download")}}]),t}(s.a);t.a=E},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(25),s=n(9),l=n(11),u=n(1),c=n(4),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},p=function(e){function t(e){i(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.zoomOut=n.zoomOut.bind(n),n.zoomIn=n.zoomIn.bind(n),n}return o(t,e),h(t,[{key:"setup",value:function(){d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setup",this).call(this)}},{key:"destroy",value:function(){this.controls&&"function"==typeof this.controls.destroy&&this.controls.destroy(),d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"zoom",value:function(e){var t=this.containerEl.querySelector(".bp-text"),n=parseInt(t.style.fontSize,10)||100,i=0;"in"===e?i=n+10+"%":"out"===e&&(i=n-10+"%"),t.style.fontSize=i,this.emit("zoom",{zoom:i,canZoomIn:!0,canZoomOut:!0})}},{key:"zoomIn",value:function(){this.zoom("in")}},{key:"zoomOut",value:function(){this.zoom("out")}},{key:"load",value:function(){Object(l.d)(this.options.file,u.T)&&!this.getViewerOption("disableTextLayer")&&this.containerEl.classList.add(u.E),d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"load",this).call(this)}},{key:"loadUI",value:function(){this.controls=new a.a(this.containerEl),this.controls.add("Zoom out",this.zoomOut,"bp-text-zoom-out-icon",c.v),this.controls.add("Zoom in",this.zoomIn,"bp-text-zoom-in-icon",c.u),this.controls.add("Enter fullscreen",this.toggleFullscreen,"bp-enter-fullscreen-icon",c.l),this.controls.add("Exit fullscreen",this.toggleFullscreen,"bp-exit-fullscreen-icon",c.m)}},{key:"onKeydown",value:function(e){return!!this.controls&&("Shift++"===e?(this.zoomIn(),!0):"Shift+_"===e&&(this.zoomOut(),!0))}},{key:"resize",value:function(){d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"resize",this).call(this)}}]),t}(s.a);t.a=p},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(59),s=n.n(a),l=n(9),u=n(5),c=n(168),h=n(1),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),p=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},f=100,v=function(e){function t(e){i(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.debouncedEmit=s()(function(e,t){n.emit(e,t)},f),n.errorHandler=n.errorHandler.bind(n),n.setTimeCode=n.setTimeCode.bind(n),n.progressHandler=n.progressHandler.bind(n),n.updateVolumeIcon=n.updateVolumeIcon.bind(n),n.playingHandler=n.playingHandler.bind(n),n.pauseHandler=n.pauseHandler.bind(n),n.resetPlayIcon=n.resetPlayIcon.bind(n),n.seekHandler=n.seekHandler.bind(n),n.loadeddataHandler=n.loadeddataHandler.bind(n),n.errorHandler=n.errorHandler.bind(n),n.containerClickHandler=n.containerClickHandler.bind(n),n.handleTimeupdateFromMediaControls=n.handleTimeupdateFromMediaControls.bind(n),n.setVolume=n.setVolume.bind(n),n.togglePlay=n.togglePlay.bind(n),n.toggleMute=n.toggleMute.bind(n),n.handleRate=n.handleRate.bind(n),n.handleAutoplay=n.handleAutoplay.bind(n),n.mediaendHandler=n.mediaendHandler.bind(n),n}return o(t,e),d(t,[{key:"setup",value:function(){p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setup",this).call(this),this.wrapperEl=this.containerEl.appendChild(document.createElement("div")),this.wrapperEl.className="bp-media",this.mediaContainerEl=this.wrapperEl.appendChild(document.createElement("div")),this.mediaContainerEl.setAttribute("tabindex","-1"),this.mediaContainerEl.className="bp-media-container",this.mediaContainerEl.addEventListener("click",this.containerClickHandler),this.loadTimeout=1e5,this.oldVolume=1,this.pauseListener=null}},{key:"destroy",value:function(){this.mediaControls&&(this.mediaControls.removeAllListeners(),this.mediaControls.destroy());try{this.mediaEl&&(this.mediaEl.removeEventListener("timeupdate",this.setTimeCode),this.mediaEl.removeEventListener("progress",this.progressHandler),this.mediaEl.removeEventListener("volumechange",this.updateVolumeIcon),this.mediaEl.removeEventListener("playing",this.playingHandler),this.mediaEl.removeEventListener("pause",this.pauseHandler),this.mediaEl.removeEventListener("ended",this.resetPlayIcon),this.mediaEl.removeEventListener("seeked",this.seekHandler),this.mediaEl.removeEventListener("loadeddata",this.loadeddataHandler),this.mediaEl.removeEventListener("error",this.errorHandler),this.removePauseEventListener(),this.mediaEl.removeAttribute("src"),this.mediaEl.load()),this.mediaContainerEl&&(this.mediaContainerEl.removeChild(this.mediaEl),this.mediaContainerEl.removeEventListener("click",this.containerClickHandler))}catch(e){}p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"load",value:function(){var e=this;this.setup(),p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"load",this).call(this);var n=this.options.representation.content.url_template;return this.mediaUrl=this.createContentUrlWithAuthParams(n),this.mediaEl.addEventListener("loadeddata",this.loadeddataHandler),this.mediaEl.addEventListener("error",this.errorHandler),this.mediaEl.setAttribute("title",this.options.file.name),u.a.isIOS()&&(this.mediaEl.autoplay=!0),this.getRepStatus().getPromise().then(function(){e.mediaEl.src=e.mediaUrl,e.isAutoplayEnabled()&&e.autoplay()}).catch(this.handleAssetError)}},{key:"containerClickHandler",value:function(){this.mediaContainerEl.classList.remove(h.x)}},{key:"loadeddataHandler",value:function(){this.destroyed||(this.handleVolume(),this.loaded=!0,this.emit("load"),this.loadUI(),this.resize(),this.showMedia(),this.mediaContainerEl.focus())}},{key:"showMedia",value:function(){this.wrapperEl.classList.add(h.G)}},{key:"errorHandler",value:function(e){var t=e;e instanceof Error&&(t.displayMessage="We're sorry, the preview didn't load. Please refresh the page."),this.emit("error",t)}},{key:"handleRate",value:function(){var e=this.cache.get("media-speed")-0;e&&this.mediaEl.playbackRate!==e&&this.mediaEl.playbackRate>0&&this.emit("ratechange",e),this.mediaEl.playbackRate=e}},{key:"handleVolume",value:function(){var e=this.cache.has("media-volume")?this.cache.get("media-volume"):1;0!==e&&(this.oldVolume=e),this.mediaEl.volume!==e&&(this.debouncedEmit("volume",e),this.mediaEl.volume=e)}},{key:"handleAutoplay",value:function(){this.emit("autoplay",this.isAutoplayEnabled())}},{key:"autoplay",value:function(){var e=this,t=this.mediaEl.play();t&&"function"==typeof t.then?t.then(function(){e.handleRate(),e.handleVolume()}).catch(function(){e.pause()}):this.mediaEl.autoplay=!0}},{key:"isAutoplayEnabled",value:function(){return"Enabled"===this.cache.get("media-autoplay")}},{key:"loadUI",value:function(){this.mediaControls=new c.a(this.mediaContainerEl,this.mediaEl,this.cache),this.addEventListenersForMediaControls(),this.addEventListenersForMediaElement()}},{key:"handleTimeupdateFromMediaControls",value:function(e){this.removePauseEventListener(),this.setMediaTime(e)}},{key:"addEventListenersForMediaControls",value:function(){this.mediaControls.addListener("timeupdate",this.handleTimeupdateFromMediaControls),this.mediaControls.addListener("volumeupdate",this.setVolume),this.mediaControls.addListener("toggleplayback",this.togglePlay),this.mediaControls.addListener("togglemute",this.toggleMute),this.mediaControls.addListener("ratechange",this.handleRate),this.mediaControls.addListener("autoplaychange",this.handleAutoplay)}},{key:"setTimeCode",value:function(){this.mediaControls.setTimeCode(this.mediaEl.currentTime)}},{key:"setMediaTime",value:function(e){this.mediaEl.currentTime=e}},{key:"setVolume",value:function(e){this.cache.set("media-volume",e,!0),this.handleVolume()}},{key:"updateVolumeIcon",value:function(){this.mediaControls.updateVolumeIcon(this.mediaEl.volume)}},{key:"playingHandler",value:function(){this.mediaControls.showPauseIcon(),this.hideLoadingIcon(),this.handleRate(),this.handleVolume(),this.emit("play")}},{key:"progressHandler",value:function(){this.mediaControls.updateProgress()}},{key:"pauseHandler",value:function(){this.mediaControls.showPlayIcon()}},{key:"seekHandler",value:function(){this.hideLoadingIcon(),this.debouncedEmit("seeked",this.mediaEl.currentTime)}},{key:"mediaendHandler",value:function(){this.isAutoplayEnabled()&&this.emit("mediaendautoplay")}},{key:"showPlayButton",value:function(){this.playButtonEl&&this.playButtonEl.classList.remove(h.A)}},{key:"hidePlayButton",value:function(){this.playButtonEl&&this.playButtonEl.classList.add(h.A)}},{key:"resetPlayIcon",value:function(){this.mediaControls.setTimeCode(0),this.hideLoadingIcon(),this.pauseHandler()}},{key:"removePauseEventListener",value:function(){this.mediaEl&&this.pauseListener&&this.mediaEl.removeEventListener("timeupdate",this.pauseListener)}},{key:"isValidTime",value:function(e){return"number"==typeof e&&Number.isFinite(e)&&e>=0&&e<=this.mediaEl.duration}},{key:"play",value:function(e,t){var n=this.isValidTime(e),i=this.isValidTime(t);this.removePauseEventListener(),n&&(i&&e<t&&this.pause(t),this.setMediaTime(e)),(0===arguments.length||n)&&(this.mediaEl.play(),this.handleRate(),this.handleVolume())}},{key:"pause",value:function(e){var t=this,n=this.isValidTime(e);this.removePauseEventListener(),n?(this.pauseListener=function(){t.mediaEl.currentTime>e&&t.pause()},this.mediaEl.addEventListener("timeupdate",this.pauseListener)):(this.mediaEl.pause(),this.emit("pause"))}},{key:"togglePlay",value:function(){this.mediaEl.paused?this.play():this.pause()}},{key:"toggleMute",value:function(){this.mediaEl.volume?(this.oldVolume=this.mediaEl.volume,this.cache.set("media-volume",0,!0)):this.cache.set("media-volume",this.oldVolume,!0),this.handleVolume()}},{key:"hideLoadingIcon",value:function(){this.containerEl&&this.containerEl.classList.remove(h.C)}},{key:"showLoadingIcon",value:function(){this.containerEl&&this.mediaEl&&!this.mediaEl.paused&&!this.mediaEl.ended&&(this.containerEl.classList.add(h.C),this.hidePlayButton())}},{key:"addEventListenersForMediaElement",value:function(){this.mediaEl.addEventListener("timeupdate",this.setTimeCode),this.mediaEl.addEventListener("progress",this.progressHandler),this.mediaEl.addEventListener("volumechange",this.updateVolumeIcon),this.mediaEl.addEventListener("playing",this.playingHandler),this.mediaEl.addEventListener("pause",this.pauseHandler),this.mediaEl.addEventListener("ended",this.resetPlayIcon),this.mediaEl.addEventListener("seeked",this.seekHandler),this.mediaEl.addEventListener("ended",this.mediaendHandler)}},{key:"quickSeek",value:function(e){var t=this.mediaEl.currentTime+e;this.removePauseEventListener(),t=Math.max(0,Math.min(t,this.mediaEl.duration)),this.setMediaTime(t)}},{key:"increaseVolume",value:function(){var e=Math.round(100*(this.mediaEl.volume+.05))/100;e=Math.min(1,e),this.setVolume(e)}},{key:"decreaseVolume",value:function(){var e=Math.round(100*(this.mediaEl.volume-.05))/100;e=Math.max(0,e),this.setVolume(e)}},{key:"onKeydown",value:function(e){if(!this.mediaControls)return!1;switch(e.toLowerCase()){case"tab":case"shift+tab":return this.mediaContainerEl.classList.add(h.x),this.mediaControls.show(),!1;case"space":case"k":this.togglePlay();break;case"arrowleft":this.mediaControls.isVolumeScrubberFocused()?this.decreaseVolume():this.quickSeek(-5);break;case"j":this.quickSeek(-10);break;case"arrowright":this.mediaControls.isVolumeScrubberFocused()?this.increaseVolume():this.quickSeek(5);break;case"l":this.quickSeek(10);break;case"0":case"home":this.setMediaTime(0);break;case"arrowup":this.mediaControls.isTimeScrubberFocused()?this.quickSeek(5):this.increaseVolume();break;case"arrowdown":this.mediaControls.isTimeScrubberFocused()?this.quickSeek(-5):this.decreaseVolume();break;case"shift+>":this.mediaControls.increaseSpeed();break;case"shift+<":this.mediaControls.decreaseSpeed();break;case"f":case"shift+f":this.mediaControls.toggleFullscreen();break;case"m":case"shift+m":this.toggleMute();break;case"c":case"shift+c":this.mediaControls.toggleSubtitles();break;default:return!1}return this.mediaControls.show(),!0}}]),t}(l.a);t.a=v},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(24),s=n.n(a),l=n(68),u=n(1),c=n(4),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},p=function(e){function t(e){i(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.loadeddataHandler=n.loadeddataHandler.bind(n),n.pointerHandler=n.pointerHandler.bind(n),n.waitingHandler=n.waitingHandler.bind(n),n.playingHandler=n.playingHandler.bind(n),n.pauseHandler=n.pauseHandler.bind(n),n.resize=n.resize.bind(n),n}return o(t,e),h(t,[{key:"setup",value:function(){d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setup",this).call(this),this.mediaEl=this.mediaContainerEl.appendChild(document.createElement("video")),this.mediaEl.setAttribute("preload","auto"),this.mediaEl.setAttribute("playsinline",""),this.playButtonEl=this.mediaContainerEl.appendChild(document.createElement("div")),this.playButtonEl.classList.add("bp-media-play-button"),this.playButtonEl.classList.add(u.A),this.playButtonEl.innerHTML=c.q,this.lowerLights()}},{key:"destroy",value:function(){this.mediaEl&&(this.mediaEl.removeEventListener("mousemove",this.mousemoveHandler),this.mediaEl.removeEventListener("click",this.pointerHandler),this.mediaEl.removeEventListener("touchstart",this.pointerHandler),this.mediaEl.removeEventListener("waiting",this.waitingHandler)),this.playButtonEl&&this.playButtonEl.removeEventListener("click",this.togglePlay),d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"loadeddataHandler",value:function(){d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"loadeddataHandler",this).call(this),this.showPlayButton(),this.mediaControls.show()}},{key:"loadUI",value:function(){d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"loadUI",this).call(this)}},{key:"pointerHandler",value:function(e){"touchstart"===e.type?(e.preventDefault(),e.stopPropagation(),this.mediaControls.toggle()):"click"===e.type&&this.togglePlay()}},{key:"playingHandler",value:function(){d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"playingHandler",this).call(this),this.hidePlayButton()}},{key:"pauseHandler",value:function(){d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"pauseHandler",this).call(this),this.showPlayButton(),this.hideLoadingIcon()}},{key:"waitingHandler",value:function(){this.containerEl&&(this.containerEl.classList.add(u.C),this.hidePlayButton())}},{key:"addEventListenersForMediaControls",value:function(){var e=this;d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"addEventListenersForMediaControls",this).call(this),this.mediaControls.on("togglefullscreen",function(){e.toggleFullscreen()})}},{key:"addEventListenersForMediaElement",value:function(){var e=this;d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"addEventListenersForMediaElement",this).call(this),this.mousemoveHandler=s()(function(){e.mediaControls.show()},1e3),this.mediaEl.addEventListener("mousemove",this.mousemoveHandler),this.hasTouch&&this.mediaEl.addEventListener("touchstart",this.pointerHandler),this.mediaEl.addEventListener("click",this.pointerHandler),this.mediaEl.addEventListener("waiting",this.waitingHandler),this.playButtonEl.addEventListener("click",this.togglePlay)}},{key:"showLoadingIcon",value:function(){d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"showLoadingIcon",this).call(this)}},{key:"resize",value:function(){this.mediaControls&&this.mediaControls.resizeTimeScrubber(),d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"resize",this).call(this)}},{key:"allowNavigationArrows",value:function(){return!this.mediaControls||!this.mediaControls.isSettingsVisible()}},{key:"lowerLights",value:function(){this.containerEl&&this.containerEl.classList.add(u.w)}},{key:"onKeydown",value:function(e){return d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onKeydown",this).call(this,e)}}]),t}(l.a);t.a=p},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(69),s=n(10),l=n(2),u=n(11),c=n(1),h=n(176),d=(n.n(h),n(177)),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),f=function(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var r=Object.getPrototypeOf(e);return null===r?void 0:Object(l.k)(r,t,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},v=function(e){function t(e){i(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.loadeddataHandler=n.loadeddataHandler.bind(n),n.adaptationHandler=n.adaptationHandler.bind(n),n.shakaErrorHandler=n.shakaErrorHandler.bind(n),n.requestFilter=n.requestFilter.bind(n),n.handleQuality=n.handleQuality.bind(n),n.handleSubtitle=n.handleSubtitle.bind(n),n.handleAudioTrack=n.handleAudioTrack.bind(n),n.getBandwidthInterval=n.getBandwidthInterval.bind(n),n}return o(t,e),p(t,[{key:"setup",value:function(){f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setup",this).call(this),this.bandwidthHistory=[],this.switchHistory=[],this.hdVideoId=-1,this.sdVideoId=-1,this.textTracks=[],this.audioTracks=[],this.wrapperEl.classList.add("bp-media-dash")}},{key:"destroy",value:function(){this.emit("bandwidthhistory",this.bandwidthHistory),this.emit("switchhistory",this.switchHistory),this.filmstripStatus&&this.filmstripStatus.destroy(),clearInterval(this.statsIntervalId),this.player&&(this.player.destroy(),this.player=void 0),this.mediaControls&&(this.mediaControls.removeListener("qualitychange",this.handleQuality),this.mediaControls.removeListener("subtitlechange",this.handleSubtitle)),this.removeStats(),f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"load",value:function(){var e=this;return this.setup(),this.mediaUrl=this.options.representation.content.url_template,this.watermarkCacheBust=Date.now(),this.mediaEl.addEventListener("loadeddata",this.loadeddataHandler),Promise.all([this.loadAssets(this.getJSAssets()),this.getRepStatus().getPromise()]).then(function(){e.loadDashPlayer(),e.resetLoadTimeout()}).catch(this.handleAssetError)}},{key:"prefetch",value:function(e){var t=e.assets,n=void 0===t||t,i=e.content,r=void 0===i||i;n&&this.prefetchAssets(this.getJSAssets());var o=this.options.representation;if(r&&this.isRepresentationReady(o)){var a=o.content.url_template;Object(l.k)(this.createContentUrlWithAuthParams(a,"manifest.mpd"),"any")}}},{key:"getJSAssets",value:function(){return["third-party/media/"+c.M+"/shaka-player.compiled.js"]}},{key:"loadDashPlayer",value:function(){shaka.polyfill.installAll(),this.adapting=!0,this.player=new shaka.Player(this.mediaEl),this.player.addEventListener("adaptation",this.adaptationHandler),this.player.addEventListener("error",this.shakaErrorHandler),this.player.configure({abr:{enabled:!0},streaming:{bufferingGoal:60,retryParameters:{timeout:0,maxAttempts:100,baseDelay:500,backoffFactor:2,fuzzFactor:.5}}}),this.player.getNetworkingEngine().registerRequestFilter(this.requestFilter),this.player.load(this.mediaUrl)}},{key:"requestFilter",value:function(e,t){var n=this,i=e===shaka.net.NetworkingEngine.RequestType.MANIFEST?"manifest.mpd":void 0;t.uris=t.uris.map(function(e){var t=n.createContentUrlWithAuthParams(e,i);return"manifest.mpd"!==i&&n.options.file.watermark_info.is_watermarked&&(t=Object(l.d)(t,{watermark_content:n.watermarkCacheBust})),t})}},{key:"getActiveTrack",value:function(){return this.player.getVariantTracks().find(function(e){return e.active})}},{key:"showLoadingIcon",value:function(e){this.getActiveTrack().id!==e&&f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"showLoadingIcon",this).call(this)}},{key:"enableVideoId",value:function(e){var t=this.player.getVariantTracks(),n=this.getActiveTrack(),i=t.find(function(t){return t.videoId===e&&t.audioId===n.audioId});i&&i.id!==n.id&&(this.showLoadingIcon(i.id),this.player.selectVariantTrack(i,!0))}},{key:"enableAdaptation",value:function(e){this.adapting=e,this.player.configure({abr:{enabled:e}})}},{key:"handleSubtitle",value:function(){var e=parseInt(this.cache.get("media-subtitles"),10);if(void 0!==this.textTracks[e]){var t=this.textTracks[e];this.player.selectTextTrack(t),this.player.setTextTrackVisibility(!0),this.emit("subtitlechange",t.language)}else this.player.setTextTrackVisibility(!1),this.emit("subtitlechange",null)}},{key:"handleAudioTrack",value:function(){var e=parseInt(this.cache.get("media-audiotracks"),10);if(void 0!==this.audioTracks[e]){var t=this.audioTracks[e];this.player.selectAudioLanguage(t.language,t.role)}}},{key:"handleQuality",value:function(){var e=-1!==this.hdVideoId?this.cache.get("media-quality"):"sd";switch(e){case"hd":this.enableAdaptation(!1),this.enableVideoId(this.hdVideoId);break;case"sd":this.enableAdaptation(!1),this.enableVideoId(this.sdVideoId);break;case"auto":default:this.enableAdaptation(!0)}e&&this.emit("qualitychange",e)}},{key:"adaptationHandler",value:function(){var e=this.getActiveTrack();e.videoId===this.hdVideoId?this.wrapperEl.classList.add("bp-media-controls-is-hd"):this.wrapperEl.classList.remove("bp-media-controls-is-hd"),this.isLoaded()&&(this.adapting&&this.emit("adaptation",e.bandwidth),this.hideLoadingIcon())}},{key:"shakaErrorHandler",value:function(e){var t=new Error("Shaka error. Code = "+e.detail.code+", Category = "+e.detail.category+", Severity = "+e.detail.severity+", Data = "+e.detail.data.toString());t.displayMessage="We're sorry, the preview didn't load. Please refresh the page.",e.detail.severity>1&&this.emit("error",t)}},{key:"addEventListenersForMediaControls",value:function(){f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"addEventListenersForMediaControls",this).call(this),this.mediaControls.addListener("qualitychange",this.handleQuality),this.mediaControls.addListener("subtitlechange",this.handleSubtitle),this.mediaControls.addListener("audiochange",this.handleAudioTrack)}},{key:"loadSubtitles",value:function(){this.textTracks=this.player.getTextTracks().sort(function(e,t){return e.id-t.id}),this.textTracks.length>0&&this.mediaControls.initSubtitles(this.textTracks.map(function(e){return Object(d.a)(e.language)||e.language}),Object(d.a)(this.options.location.locale.substring(0,2)))}},{key:"loadAlternateAudio",value:function(){var e=this.player.getVariantTracks().sort(function(e,t){return e.audioId-t.audioId}),t=[],n=[],i=0;for(i=0;i<e.length;i++){var r=e[i];t.indexOf(r.audioId)<0&&(t.push(r.audioId),n.push(r))}if(this.audioTracks=n.map(function(e){return{language:e.language,role:e.roles[0]}}),this.audioTracks.length>1){var o=this.audioTracks.map(function(e){return Object(d.a)(e.language)||e.language});this.mediaControls.initAlternateAudio(o)}}},{key:"loadeddataHandler",value:function(){this.isDestroyed()||(this.isAutoplayEnabled()&&this.autoplay(),this.calculateVideoDimensions(),this.loadUI(),this.loadFilmStrip(),this.resize(),this.handleVolume(),this.startBandwidthTracking(),this.handleQuality(),this.loadSubtitles(),this.loadAlternateAudio(),this.showPlayButton(),this.loaded=!0,this.emit("load"),this.showMedia(),this.mediaControls.show(),this.mediaContainerEl.focus())}},{key:"loadUI",value:function(){f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"loadUI",this).call(this),-1!==this.hdVideoId&&this.mediaControls.enableHDSettings()}},{key:"loadFilmStrip",value:function(){var e=Object(u.f)(this.options.file,"filmstrip");if(e&&e.metadata&&e.metadata.interval>0){var t=this.createContentUrlWithAuthParams(e.content.url_template);this.filmstripStatus=this.getRepStatus(e),this.mediaControls.initFilmstrip(t,this.filmstripStatus,this.aspect,e.metadata.interval)}}},{key:"calculateVideoDimensions",value:function(){var e=this.player.getVariantTracks(),t=e.reduce(function(e,t){return e.width>t.width?e:t}),n=e.reduce(function(e,t){return e.width<t.width?e:t});this.player.isAudioOnly()?(this.videoWidth=854,this.videoHeight=480):(this.videoWidth=t.width,this.videoHeight=t.height,this.sdVideoId=n.videoId,t.videoId!==n.videoId&&(this.hdVideoId=t.videoId)),this.aspect=this.videoWidth/this.videoHeight}},{key:"resize",value:function(){var e=this.videoWidth||0,n=this.videoHeight||0,i={height:this.wrapperEl.clientHeight,width:this.wrapperEl.clientWidth};if(e<420&&(e=420,n=e/this.aspect),this.mediaEl.style.width="",!s.a.isFullscreen(this.containerEl)&&e<=i.width&&n<=i.height)this.aspect>=1?this.mediaEl.style.width=e+"px":this.mediaEl.style.width=n*this.aspect+"px";else{var r=(i.height-n)/n,o=e+e*r;n+n*((i.width-e)/e)<=i.height?this.mediaEl.style.width=i.width+"px":o<=i.width&&(this.mediaEl.style.width=i.height*this.aspect+"px")}f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"resize",this).call(this)}},{key:"getBandwidthInterval",value:function(){if(!this.isDestroyed()&&this.player&&this.player.getStats&&!this.mediaEl.paused&&!this.mediaEl.ended){var e=this.player.getStats(),t=e.estimatedBandwidth,n=e.switchHistory,i=e.streamBandwidth;this.bandwidthHistory.push({bandwidth:t,stream:i}),this.switchHistory.push({switchHistory:n,stream:i}),this.statsEl&&(this.statsEl.textContent=Math.round(t/1e3)+" kbps")}}},{key:"startBandwidthTracking",value:function(){this.statsIntervalId=setInterval(this.getBandwidthInterval,3e3)}},{key:"removeStats",value:function(){this.statsEl&&this.mediaContainerEl&&this.mediaContainerEl.removeChild(this.statsEl),this.statsEl=void 0}},{key:"toggleStats",value:function(){if(this.statsEl)return void this.removeStats();this.statsEl=this.mediaContainerEl.appendChild(document.createElement("div")),this.statsEl.className="bp-media-dash-stats",this.statsEl.textContent="?!? kbps"}},{key:"onKeydown",value:function(e){return"Shift+I"===e&&this.player?(this.toggleStats(),!0):f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onKeydown",this).call(this,e)}}]),t}(a.a);t.a=v},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(24),s=n.n(a),l=n(9),u=n(5),c=n(25),h=n(61),d=n(186),p=n(10),f=n(39),v=n(36),b=n(1),m=n(11),y=n(2),g=n(4),E=n(187),w=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),k=function(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var r=Object.getPrototypeOf(e);return null===r?void 0:Object(y.k)(r,t,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},_=this.isMobile?500:250,O=function(e){function t(e){i(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleAssetAndRepLoad=n.handleAssetAndRepLoad.bind(n),n.print=n.print.bind(n),n.setPage=n.setPage.bind(n),n.zoomIn=n.zoomIn.bind(n),n.zoomOut=n.zoomOut.bind(n),n.pagerenderedHandler=n.pagerenderedHandler.bind(n),n.pagechangeHandler=n.pagechangeHandler.bind(n),n.pagesinitHandler=n.pagesinitHandler.bind(n),n.enterfullscreenHandler=n.enterfullscreenHandler.bind(n),n.exitfullscreenHandler=n.exitfullscreenHandler.bind(n),n.throttledScrollHandler=n.getScrollHandler().bind(n),n}return o(t,e),w(t,[{key:"setup",value:function(){if(k(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setup",this).call(this),this.docEl=this.containerEl.appendChild(document.createElement("div")),this.docEl.classList.add("bp-doc"),"Safari"===u.a.getName()&&this.docEl.classList.add("is-safari"),this.isMobile){var e=document.createElement("meta");e.setAttribute("name","viewport"),e.setAttribute("content","width=device-width, initial-scale=1, user-scalable=no"),document.getElementsByTagName("head")[0].appendChild(e)}this.viewerEl=this.docEl.appendChild(document.createElement("div")),this.viewerEl.classList.add("pdfViewer"),this.loadTimeout=18e4,this.scaling=!1}},{key:"destroy",value:function(){if(this.unbindDOMListeners(),this.printBlob=null,this.printURL&&URL.revokeObjectURL(this.printURL),this.pageControls&&this.pageControls.removeListener("pagechange",this.setPage),this.controls&&"function"==typeof this.controls.destroy&&this.controls.destroy(),this.findBar&&this.findBar.destroy(),this.pdfLoadingTask)try{this.pdfLoadingTask.destroy()}catch(e){}this.pdfViewer&&(this.pdfViewer.cleanup(),this.pdfViewer.pdfDocument&&this.pdfViewer.pdfDocument.destroy()),this.printPopup&&this.printPopup.destroy(),k(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"prefetch",value:function(e){var t=e.assets,n=void 0===t||t,i=e.preload,r=void 0===i||i,o=e.content,a=void 0===o||o,s=this.options,l=s.file,u=s.representation,c=l&&l.watermark_info&&l.watermark_info.is_watermarked;if(n&&this.prefetchAssets(E.b,E.a),r&&!c){var h=Object(m.f)(l,b.V);if(h&&this.isRepresentationReady(h)){var d=h.content.url_template;Object(y.k)(this.createContentUrlWithAuthParams(d),"blob")}}if(a&&!c&&this.isRepresentationReady(u)){var p=u.content.url_template;Object(y.k)(this.createContentUrlWithAuthParams(p),"any")}}},{key:"showPreload",value:function(){var e=this.options.file,t=e&&e.watermark_info&&e.watermark_info.is_watermarked;if(this.preloader&&!t&&1===this.getCachedPage()){var n=Object(m.f)(e,b.V);if(n&&this.getViewerOption("preload")&&v.a.getStatus(n)===b._12){var i=n.content.url_template,r=this.createContentUrlWithAuthParams(i);this.preloader.showPreload(r,this.containerEl)}}}},{key:"hidePreload",value:function(){this.preloader&&this.preloader.hidePreload()}},{key:"load",value:function(){this.setup(),k(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"load",this).call(this),this.showPreload();var e=this.options.representation.content.url_template;return this.pdfUrl=this.createContentUrlWithAuthParams(e),Promise.all([this.loadAssets(E.b,E.a),this.getRepStatus().getPromise()]).then(this.handleAssetAndRepLoad).catch(this.handleAssetError)}},{key:"handleAssetAndRepLoad",value:function(){this.setupPdfjs(),this.initViewer(this.pdfUrl),this.initPrint(),this.initFind()}},{key:"initFind",value:function(){this.findBarEl=this.containerEl.appendChild(document.createElement("div")),this.findBarEl.classList.add(b.e),this.findController=new PDFJS.PDFFindController({pdfViewer:this.pdfViewer}),this.pdfViewer.setFindController(this.findController);var e=Object(m.d)(this.options.file,b.T);this.getViewerOption("disableFindBar")||(this.findBar=new d.a(this.findBarEl,this.findController,e))}},{key:"find",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.findBar&&(this.setPage(1),this.findBar.setFindFieldElValue(e),this.findBar.findFieldHandler(),t&&this.findBar.open())}},{key:"print",value:function(){var e=this;if(!this.printBlob)return this.fetchPrintBlob(this.pdfUrl).then(this.print),void(this.printDialogTimeout=setTimeout(function(){e.printPopup.show("Preparing to print...","Print",function(){e.printPopup.hide(),e.browserPrint()}),e.printPopup.disableButton(),e.printDialogTimeout=null},500));this.printDialogTimeout||!this.printPopup.isVisible()?(clearTimeout(this.printDialogTimeout),this.browserPrint()):(this.printPopup.enableButton(),this.printPopup.messageEl.textContent="Ready to print.",this.printPopup.loadingIndicator.classList.add(b.A),this.printPopup.printCheckmark.classList.remove(b.A))}},{key:"previousPage",value:function(){this.setPage(this.pdfViewer.currentPageNumber-1)}},{key:"nextPage",value:function(){this.setPage(this.pdfViewer.currentPageNumber+1)}},{key:"setPage",value:function(e){!e||e<1||e>this.pdfViewer.pagesCount||(this.pdfViewer.currentPageNumber=e,this.cachePage(this.pdfViewer.currentPageNumber))}},{key:"getCachedPage",value:function(){var e=1;if(this.cache.has("doc-current-page-map")){e=this.cache.get("doc-current-page-map")[this.options.file.id]||e}return e}},{key:"cachePage",value:function(e){var t={};this.cache.has("doc-current-page-map")&&(t=this.cache.get("doc-current-page-map")),t[this.options.file.id]=e,this.cache.set("doc-current-page-map",t,!0)}},{key:"zoomIn",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=e,n=this.pdfViewer.currentScale;do{n=(1.1*n).toFixed(3),n=Math.min(10,n),t-=1}while(t>0&&n<10);this.pdfViewer.currentScale!==n&&this.emit("zoom",{zoom:n,canZoomOut:!0,canZoomIn:n<10}),this.pdfViewer.currentScaleValue=n}},{key:"zoomOut",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=e,n=this.pdfViewer.currentScale;do{n=(n/1.1).toFixed(3),n=Math.max(.1,n),t-=1}while(t>0&&n>.1);this.pdfViewer.currentScale!==n&&this.emit("zoom",{zoom:n,canZoomOut:n>.1,canZoomIn:!0}),this.pdfViewer.currentScaleValue=n}},{key:"onKeydown",value:function(e){switch(e){case"ArrowLeft":this.previousPage();break;case"ArrowRight":this.nextPage();break;case"[":this.previousPage();break;case"]":this.nextPage();break;default:return!1}return!0}},{key:"initViewer",value:function(e){var t=this;this.bindDOMListeners(),this.pdfViewer=new PDFJS.PDFViewer({container:this.docEl,linkService:new PDFJS.PDFLinkService,enhanceTextSelection:!this.isMobile});var n=this.getViewerOption("rangeChunkSize");n||(n="en-US"===this.options.location.locale?1048576:524288);var i={url:e,rangeChunkSize:n};return u.a.isIOS()&&(i.httpHeaders={"If-None-Match":"webkit-no-cache"}),this.pdfLoadingTask=PDFJS.getDocument(i),this.pdfLoadingTask.then(function(n){t.pdfViewer.setDocument(n);var i=t.pdfViewer.linkService;i instanceof PDFJS.PDFLinkService&&(i.setDocument(n,e),i.setViewer(t.pdfViewer))}).catch(function(e){var n=e;e instanceof Error&&(n.displayMessage="We're sorry, the preview didn't load. This document may be protected."),t.triggerError(e)})}},{key:"resize",value:function(){if(this.pdfViewer&&this.pdfViewer.pageViewsReady){var e=this.pdfViewer.currentPageNumber.currentPageNumber;this.pdfViewer.currentScaleValue=this.pdfViewer.currentScaleValue||"auto",this.pdfViewer.update(),this.setPage(e),k(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"resize",this).call(this)}}},{key:"setupPdfjs",value:function(){var e=this.options,t=e.file,n=e.location,i=t.size,r=t.watermark_info,o=Object(y.e)(n);PDFJS.workerSrc=o("third-party/doc/"+b.K+"/pdf.worker.min.js"),PDFJS.imageResourcesPath=o("third-party/doc/"+b.K+"/images/"),PDFJS.cMapUrl=n.staticBaseURI+"third-party/doc/"+b.K+"/cmaps/",PDFJS.cMapPacked=!0,PDFJS.externalLinkTarget=PDFJS.LinkTarget.BLANK,PDFJS.disableStream=!0,PDFJS.disableFontFace=PDFJS.disableFontFace||u.a.hasFontIssue(),PDFJS.disableRange="en-US"!==n.locale&&i<26214400,PDFJS.disableRange=PDFJS.disableRange||r&&r.is_watermarked,PDFJS.disableTextLayer=!Object(m.d)(t,b.T)||!!this.getViewerOption("disableTextLayer"),PDFJS.maxCanvasPixels=this.isMobile?2949120:PDFJS.maxCanvasPixels,PDFJS.disableCreateObjectURL=!1;var a=PDFJS.PDFPageView.prototype.reset;PDFJS.PDFPageView.prototype.reset=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];a.bind(this)(t),this.loadingIconDiv.classList.add(b.J),this.loadingIconDiv.innerHTML="<div></div>"}}},{key:"initPrint",value:function(){this.printPopup=new f.a(this.containerEl);var e=document.createElement("div");e.className="bp-print-check "+b.A,e.innerHTML=g.r.trim();var t=document.createElement("div");t.classList.add(b.v),t.innerHTML="\n            <div></div>\n            <div></div>\n            <div></div>".trim(),this.printPopup.addContent(t,!0),this.printPopup.addContent(e,!0),this.printPopup.loadingIndicator=t,this.printPopup.printCheckmark=e}},{key:"setupPageIds",value:function(){var e=this.containerEl.querySelectorAll(".page");[].forEach.call(e,function(e){var t=e.dataset.pageNumber;t&&(e.id="bp-page-"+t)})}},{key:"fetchPrintBlob",value:function(e){var t=this;return Object(y.k)(e,"blob").then(function(e){t.printBlob=e})}},{key:"browserPrint",value:function(){if("function"==typeof window.navigator.msSaveOrOpenBlob){window.navigator.msSaveOrOpenBlob(this.printBlob,"print.pdf")?this.emit("printsuccess"):this.emit("printerror")}else{this.printURL||(this.printURL=URL.createObjectURL(this.printBlob));var e=window.open(this.printURL);if(e&&"function"==typeof e.print){var t=u.a.getName();"Chrome"===t?e.addEventListener("load",function(){e.print()}):"Safari"===t&&setTimeout(function(){e.print()},1e3)}!e||e.closed||void 0===e.closed?this.emit("printerror"):this.emit("printsuccess")}}},{key:"loadUI",value:function(){this.controls=new c.a(this.containerEl),this.pageControls=new h.a(this.controls,this.docEl),this.pageControls.addListener("pagechange",this.setPage),this.bindControlListeners()}},{key:"bindDOMListeners",value:function(){this.docEl.addEventListener("pagesinit",this.pagesinitHandler),this.docEl.addEventListener("pagerendered",this.pagerenderedHandler),this.docEl.addEventListener("pagechange",this.pagechangeHandler),this.docEl.addEventListener("scroll",this.throttledScrollHandler),p.a.addListener("enter",this.enterfullscreenHandler),p.a.addListener("exit",this.exitfullscreenHandler),this.isMobile&&(u.a.isIOS()?(this.docEl.addEventListener("gesturestart",this.mobileZoomStartHandler),this.docEl.addEventListener("gestureend",this.mobileZoomEndHandler)):(this.docEl.addEventListener("touchstart",this.mobileZoomStartHandler),this.docEl.addEventListener("touchmove",this.mobileZoomChangeHandler),this.docEl.addEventListener("touchend",this.mobileZoomEndHandler)))}},{key:"unbindDOMListeners",value:function(){this.docEl&&(this.docEl.removeEventListener("pagesinit",this.pagesinitHandler),this.docEl.removeEventListener("pagerendered",this.pagerenderedHandler),this.docEl.removeEventListener("pagechange",this.pagechangeHandler),this.docEl.removeEventListener("scroll",this.throttledScrollHandler),this.isMobile&&(u.a.isIOS()?(this.docEl.removeEventListener("gesturestart",this.mobileZoomStartHandler),this.docEl.removeEventListener("gestureend",this.mobileZoomEndHandler)):(this.docEl.removeEventListener("touchstart",this.mobileZoomStartHandler),this.docEl.removeEventListener("touchmove",this.mobileZoomChangeHandler),this.docEl.removeEventListener("touchend",this.mobileZoomEndHandler)))),p.a.removeListener("enter",this.enterfullscreenHandler),p.a.removeListener("exit",this.exitfullscreenHandler)}},{key:"bindControlListeners",value:function(){}},{key:"pagesinitHandler",value:function(){this.pdfViewer.currentScaleValue="auto",this.loadUI(),this.setPage(this.getCachedPage()),this.docEl.classList.add(b.D),this.loaded||(this.loaded=!0,this.emit("load",{numPages:this.pdfViewer.pagesCount,endProgress:!1,scale:this.pdfViewer.currentScale}),this.setupPageIds())}},{key:"pagerenderedHandler",value:function(e){var t=e.detail?e.detail.pageNumber:void 0;t&&(this.emit("pagerender",t),this.emit("scale",{scale:this.pdfViewer.currentScale,pageNum:t}),this.somePageRendered||(this.hidePreload(),this.emit("progressend"),this.somePageRendered=!0))}},{key:"pagechangeHandler",value:function(e){var t=e.pageNumber;this.pageControls.updateCurrentPage(t),this.loaded&&this.cachePage(t),this.emit("pagefocus",t)}},{key:"enterfullscreenHandler",value:function(){this.pdfViewer.currentScaleValue="page-fit",this.resize()}},{key:"exitfullscreenHandler",value:function(){this.pdfViewer.currentScaleValue="auto",this.resize()}},{key:"getScrollHandler",value:function(){var e=this;return s()(function(){e.scrollTimer&&clearTimeout(e.scrollTimer),e.scrollStarted||(e.emit("scrollstart",{scrollTop:e.docEl.scrollTop,scrollLeft:e.docEl.scrollLeft}),e.scrollStarted=!0),e.scrollTimer=setTimeout(function(){e.emit("scrollend",{scrollTop:e.docEl.scrollTop,scrollLeft:e.docEl.scrollLeft}),e.scrollStarted=!1},_)},200)}}]),t}(l.a);t.a=O},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(6),s=n.n(a),l=n(1),u=n(2),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),h=/pdfWidth:([0-9.]+)pts,pdfHeight:([0-9.]+)pts,numPages:([0-9]+)/,d=2,p=500,f='<div class="'+l.J+'"><div></div></div>',v=function(e){function t(e){i(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.maxZoomScale=l.R,n.cleanupPreload=function(){n.wrapperEl&&(n.wrapperEl.parentNode.removeChild(n.wrapperEl),n.wrapperEl=void 0),n.preloadEl=void 0,n.imageEl=void 0,n.srcUrl&&URL.revokeObjectURL(n.srcUrl)},n.loadHandler=function(){return n.preloadEl&&n.imageEl?n.readEXIF(n.imageEl).then(function(e){var t=e.pdfWidth,i=e.pdfHeight,r=e.numPages,o=n.getScaledDimensions(t,i),a=o.scaledWidth,s=o.scaledHeight;n.scaleAndShowPreload(a,s,Math.min(r,p))}).catch(function(){var e=n.imageEl,t=e.naturalWidth,i=e.naturalHeight,r=n.getScaledDimensions(t,i),o=r.scaledWidth,a=r.scaledHeight;n.scaleAndShowPreload(o,a,d)}):Promise.resolve()},n.previewUI=e,n.wrapperClassName=l.p,n}return o(t,e),c(t,[{key:"showPreload",value:function(e,t){var n=this;return this.containerEl=t,Object(u.k)(e,"blob").then(function(e){n.checkDocumentLoaded()||(n.srcUrl=URL.createObjectURL(e),n.wrapperEl=document.createElement("div"),n.wrapperEl.className=n.wrapperClassName,n.wrapperEl.innerHTML=('\n                <div class="'+l.m+" "+l.B+'">\n                    <img class="'+l.n+'" src="'+n.srcUrl+'" />\n                    <div class="'+l.n+" "+l.o+'">\n                        '+f+"\n                    </div>\n                </div>\n            ").trim(),n.containerEl.appendChild(n.wrapperEl),n.preloadEl=n.wrapperEl.querySelector("."+l.m),n.imageEl=n.preloadEl.querySelector("img."+l.n),n.overlayEl=n.preloadEl.querySelector("."+l.o),n.bindDOMListeners())})}},{key:"scaleAndShowPreload",value:function(e,t,n){if(!this.checkDocumentLoaded()){Object(u.y)(this.imageEl,e,t),Object(u.y)(this.overlayEl,e,t);for(var i=0;i<n-1;i++){var r=document.createElement("div");r.className=l.n,r.innerHTML=f,Object(u.y)(r,e,t),this.preloadEl.appendChild(r)}this.previewUI.hideLoadingIndicator(),this.preloadEl.classList.remove(l.B),this.emit("preload")}}},{key:"hidePreload",value:function(){this.wrapperEl&&(this.unbindDOMListeners(),this.restoreScrollPosition(),this.wrapperEl.classList.add(l.F),this.wrapperEl.addEventListener("transitionend",this.cleanupPreload),this.wrapperEl.addEventListener("scroll",this.cleanupPreload))}},{key:"bindDOMListeners",value:function(){this.imageEl.addEventListener("load",this.loadHandler)}},{key:"unbindDOMListeners",value:function(){this.imageEl.removeEventListener("load",this.loadHandler)}},{key:"restoreScrollPosition",value:function(){var e=this.wrapperEl.scrollTop,t=this.wrapperEl.parentNode.querySelector(".bp-doc");t&&e>0&&(t.scrollTop=e)}},{key:"getScaledDimensions",value:function(e,t){var n=this.wrapperEl,i=n.clientWidth,r=n.clientHeight,o=(i-l.S)/e,a=(r-l.Q)/t,s=e>t,u=s?Math.min(a,o):o;return this.maxZoomScale&&(u=Math.min(this.maxZoomScale,u)),{scaledWidth:Math.floor(u*e),scaledHeight:Math.floor(u*t)}}},{key:"readEXIF",value:function(e){return new Promise(function(t,n){try{EXIF.getData(e,function(){var i=EXIF.getTag(e,"UserComment"),r=i.map(function(e){return String.fromCharCode(e)}).join(""),o=h.exec(r);if(!o||4!==o.length)return void n(new Error("No valid EXIF data found"));var a=parseInt(o[1],10)*l.P,s=parseInt(o[2],10)*l.P,u=parseInt(o[3],10);if(u<=0)return void n(new Error("EXIF num pages data is invalid"));var c=a/s,d=e.naturalWidth/e.naturalHeight;if(Math.abs(c-d)>.025){var p=s/a;if(Math.abs(p-d)>.025)return void n(new Error("EXIF PDF width and height are invalid"));var f=a;a=s,s=f}t({pdfWidth:a,pdfHeight:s,numPages:u})})}catch(e){n(new Error("Error reading EXIF data"))}})}},{key:"checkDocumentLoaded",value:function(){return!!this.containerEl.classList.contains(l.I)&&(this.hidePreload(),!0)}}]),t}(s.a);t.a=v},,,,,,,,,,,,,,,,,,,,,function(e,t,n){e.exports=n(94)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(95),s=(n.n(a),n(6)),l=n.n(s),u=n(24),c=n.n(u),h=n(57),d=n.n(h),p=n(5),f=n(97),v=n(98),b=n(205),m=n(206),y=n(208),g=n(211),E=n(2),w=n(11),k=n(1),_=n(212),O=(n.n(_),"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}),P=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),S=function(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var r=Object.getPrototypeOf(e);return null===r?void 0:Object(E.k)(r,t,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},L=["Office"],C=["INPUT","SELECT","TEXTAREA"],x=Object(E.j)(k.W,document.currentScript),j=function(e){function t(){i(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.open=!1,e.count={success:0,error:0,navigation:0},e.file={},e.previewOptions={},e.options={},e.disabledViewers={},e.token="",e.collection=[],e.loaders=v.a,e.retryCount=0,e.logRetryCount=0,L.forEach(function(t){e.disabledViewers[t]=1}),e.location=x,e.cache=new b.a,e.ui=new y.a,e.browserInfo=p.a.getBrowserInfo(),e.download=e.download.bind(e),e.print=e.print.bind(e),e.handleTokenResponse=e.handleTokenResponse.bind(e),e.handleFileInfoResponse=e.handleFileInfoResponse.bind(e),e.handleFetchError=e.handleFetchError.bind(e),e.handleViewerEvents=e.handleViewerEvents.bind(e),e.triggerError=e.triggerError.bind(e),e.throttledMousemoveHandler=e.getGlobalMousemoveHandler().bind(e),e.navigateLeft=e.navigateLeft.bind(e),e.navigateRight=e.navigateRight.bind(e),e.keydownHandler=e.keydownHandler.bind(e),e}return o(t,e),P(t,[{key:"destroy",value:function(){this.viewer&&"function"==typeof this.viewer.destroy&&this.viewer.destroy(),this.viewer=void 0}},{key:"show",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==t&&"object"===(void 0===t?"undefined":O(t)))throw new Error("Bad access token!");this.previewOptions=Object.assign({},n,{token:t}),this.updateCollection(n.collection),this.load(e)}},{key:"hide",value:function(){this.open=!1,this.destroy(),this.ui.cleanup(),this.file=void 0}},{key:"updateCollection",value:function(e){var t=Array.isArray(e)?e:[],n=[],i=[];t.forEach(function(e){if(e&&"string"==typeof e)i.push(e);else{if(!e||"object"!==(void 0===e?"undefined":O(e))||"string"!=typeof e.id)throw new Error("Bad collection provided!");i.push(e.id),n.push(e)}}),this.updateFileCache(n),this.collection=i,this.file&&this.ui.showNavigation(this.file.id,this.collection)}},{key:"updateFileCache",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=t;Array.isArray(n)||(n=[t]),n.forEach(function(t){t.watermark_info&&t.watermark_info.is_watermarked||Object(w.c)(t)&&Object(w.a)(e.cache,t)})}},{key:"getCurrentViewer",value:function(){return this.viewer}},{key:"getCurrentFile",value:function(){return this.file}},{key:"getCurrentCollection",value:function(){return this.collection}},{key:"getViewers",value:function(){var e=[];return this.loaders.forEach(function(t){e=e.concat(t.getViewers())}),e}},{key:"disableViewers",value:function(e){var t=this;Array.isArray(e)?e.forEach(function(e){t.disabledViewers[e]=1}):e&&(this.disabledViewers[e]=1)}},{key:"enableViewers",value:function(e){var t=this;Array.isArray(e)?e.forEach(function(e){delete t.disabledViewers[e]}):e&&delete this.disabledViewers[e]}},{key:"disableHotkeys",value:function(){this.options.useHotkeys=!1}},{key:"enableHotkeys",value:function(){this.options.useHotkeys=!0}},{key:"resize",value:function(){this.viewer&&"function"==typeof this.viewer.resize&&this.viewer.resize()}},{key:"print",value:function(){Object(w.d)(this.file,k.T)&&Object(w.b)(this.viewer,"print")&&this.viewer.print()}},{key:"download",value:function(){var e=this.options,t=e.apiHost,n=e.queryParams;if(Object(w.d)(this.file,k.T)){var i=Object(E.d)(Object(w.e)(this.file.id,t),n);Object(E.k)(i,this.getRequestHeaders()).then(function(e){Object(E.r)(e.download_url)})}}},{key:"updateToken",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.previewOptions.token=e,t&&this.load(this.file.id)}},{key:"prefetch",value:function(e){var t=e.fileId,n=e.token,i=e.sharedLink,r=void 0===i?"":i,o=e.sharedLinkPassword,a=void 0===o?"":o,s=e.preload,l=void 0!==s&&s,u=void 0,c=void 0,h=void 0;try{if(u=this.cache.get(t),c=u?this.getLoader(u):null,!(h=c?c.determineViewer(u):null))return}catch(e){return}var d={viewer:h,file:u,token:n,representation:c.determineRepresentation(u,h)};l&&(d.sharedLink=r,d.sharedLinkPassword=a);var p=new h.CONSTRUCTOR(this.createViewerOptions(d));"function"==typeof p.prefetch&&p.prefetch({assets:!0,preload:l||p.getViewerOption("preload"),content:!l})}},{key:"prefetchViewers",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.getViewers().filter(function(e){return-1!==t.indexOf(e.NAME)}).forEach(function(t){var n=new t.CONSTRUCTOR(e.createViewerOptions({viewer:t}));"function"==typeof n.prefetch&&n.prefetch({assets:!0,preload:!1,content:!1})})}},{key:"load",value:function(e){this.destroy(),this.open=!0,this.logger=new f.a(this.location.locale,this.browserInfo),clearTimeout(this.retryTimeout);var t=this.file?this.file.id:void 0;if("string"==typeof e)this.file=this.cache.get(e)||{id:e};else if(Object(w.c)(e))this.file=e;else{if(!e||"string"!=typeof e.id)throw new Error("File is not a well-formed Box File object. See FILE_FIELDS in file.js for a list of required fields.");this.file={id:e.id}}this.file.id===t?this.retryCount+=1:this.retryCount=0,Object(g.a)(this.file.id,this.previewOptions.token).then(this.handleTokenResponse).catch(this.handleFetchError)}},{key:"handleTokenResponse",value:function(e){if(this.retryCount>0)return void this.loadFromServer();this.parseOptions(this.previewOptions,e),this.container=this.ui.setup(this.options,this.keydownHandler,this.navigateLeft,this.navigateRight,this.throttledMousemoveHandler),this.ui.showLoadingIndicator(),this.ui.startProgressBar(),this.ui.showNavigation(this.file.id,this.collection),Object(w.c)(this.file)?(Object(w.a)(this.cache,this.file),this.loadFromCache()):this.loadFromServer()}},{key:"parseOptions",value:function(e,t){var n=this,i=Object.assign({},e);this.options={},this.options.container=i.container,this.options.token=t[this.file.id],this.options.sharedLink=i.sharedLink,this.options.sharedLinkPassword=i.sharedLinkPassword,this.options.apiHost=i.apiHost?i.apiHost.replace(/\/$/,""):k.a,this.options.appHost=i.appHost?i.appHost.replace(/\/$/,""):k.b,this.options.header=i.header||"light",this.options.logoUrl=i.logoUrl||"",this.options.showDownload=!!i.showDownload,this.options.showAnnotations=!!i.showAnnotations,this.options.useHotkeys=!1!==i.useHotkeys,this.options.box3dApplication=i.box3dApplication,this.options.boxAnnotations=i.boxAnnotations,this.options.viewers=i.viewers||{},this.options.skipServerUpdate=!!i.skipServerUpdate,this.options.queryParams=i.queryParams||{},this.loaders=(i.loaders||[]).concat(v.a),Object.keys(this.options.viewers).forEach(function(e){var t=n.options.viewers[e].disabled;!0===t?n.disableViewers(e):!1===t&&n.enableViewers(e)})}},{key:"createViewerOptions",value:function(e){return d()(Object.assign({},this.options,e,{location:this.location,cache:this.cache,ui:this.ui}))}},{key:"loadFromCache",value:function(){this.logger.setCached(),this.loadViewer(),this.options.skipServerUpdate||this.loadFromServer()}},{key:"loadFromServer",value:function(){var e=this.options,t=e.apiHost,n=e.queryParams,i=Object(E.d)(Object(w.g)(this.file.id,t),n);Object(E.k)(i,this.getRequestHeaders()).then(this.handleFileInfoResponse).catch(this.handleFetchError)}},{key:"handleFileInfoResponse",value:function(e){if(this.open&&(!this.file||this.file.id===e.id))try{this.file=e,this.logger.setFile(e);var t=this.cache.get(e.id),n=e.watermark_info&&e.watermark_info.is_watermarked;n?Object(w.h)(this.cache,e):Object(w.a)(this.cache,e);(!t||!Object(w.c)(t)||t.file_version.sha1!==e.file_version.sha1||n)&&(this.logger.setCacheStale(),this.loadViewer())}catch(e){this.triggerError(e instanceof Error?e:new Error("We're sorry, the preview didn't load. Please refresh the page."))}}},{key:"loadViewer",value:function(){if(this.open){if(!Object(w.d)(this.file,k.U))throw new Error("We're sorry, you don't have permission to preview this file.");Object(w.d)(this.file,k.T)&&this.options.showDownload&&p.a.canDownload()&&this.ui.showLoadingDownloadButton(this.download);var e=this.getLoader(this.file);if(!e)throw new Error(k.L[this.file.extension]||"We're sorry, the preview didn't load. This file type may not be supported.");var t=e.determineViewer(this.file,Object.keys(this.disabledViewers));this.logger.setType(t.NAME);var n=e.determineRepresentation(this.file,t),i=this.createViewerOptions({viewer:t,representation:n,container:this.container,file:this.file});i.logger=this.logger,this.viewer=new t.CONSTRUCTOR(i),this.attachViewerListeners(),this.viewer.load(),this.emit("viewer",this.viewer),this.retryCount=0}}},{key:"attachViewerListeners",value:function(){this.viewer.addListener("error",this.triggerError),this.viewer.addListener("viewerevent",this.handleViewerEvents)}},{key:"handleViewerEvents",value:function(e){switch(e.event){case"download":this.download();break;case"reload":this.show(this.file.id,this.previewOptions);break;case"load":this.finishLoading(e.data);break;case"progressstart":this.ui.startProgressBar();break;case"progressend":this.ui.finishProgressBar();break;case"notificationshow":this.ui.showNotification(e.data);break;case"notificationhide":this.ui.hideNotification();break;case"mediaendautoplay":this.navigateRight();break;default:this.emit(e.event,e.data),this.emit("viewerevent",e)}}},{key:"emit",value:function(e,n){try{S(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"emit",this).call(this,e,n)}catch(e){}}},{key:"finishLoading",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(w.d)(this.file,k.T)&&this.options.showDownload&&p.a.canDownload()&&(this.ui.showDownloadButton(this.download),Object(w.b)(this.viewer,"print")&&!p.a.isMobile()&&this.ui.showPrintButton(this.print));var t=e.error;t?(this.count.error+=1,this.emit("load",{error:t,metrics:this.logger.done(this.count),file:this.file}),"function"==typeof window.callPhantom&&window.callPhantom(0)):(this.count.success+=1,this.emit("load",{viewer:this.viewer,metrics:this.logger.done(this.count),file:this.file}),this.logPreviewEvent(this.file.id,this.options),"function"==typeof window.callPhantom&&window.callPhantom(1)),!1!==e.endProgress&&this.ui.finishProgressBar(),this.viewer&&this.viewer.containerEl&&this.viewer.containerEl.focus(),this.ui.hideLoadingIndicator(),this.prefetchNextFiles()}},{key:"logPreviewEvent",value:function(e,t){var n=this;this.logRetryCount=this.logRetryCount||0;var i=t.apiHost,r=t.token,o=t.sharedLink,a=t.sharedLinkPassword,s=Object(E.l)({},r,o,a);Object(E.t)(i+"/2.0/events",s,{event_type:"preview",source:{type:"file",id:e}}).then(function(){n.logRetryCount=0}).catch(function(){if(n.logRetryCount+=1,n.logRetryCount>3)return void(n.logRetryCount=0);clearTimeout(n.logRetryTimeout),n.logRetryTimeout=setTimeout(function(){n.logPreviewEvent(e,t)},500*n.logRetryCount)})}},{key:"handleFetchError",value:function(e){var t=this;if(this.open){if(this.cache.unset(this.file.id),this.retryCount>5){var n="We're sorry, the preview didn't load. Please refresh the page.";return e.response&&429===e.response.status&&(n="We're sorry, the preview didn't load because your request was rate limited. Please wait a few minutes and try again."),void this.triggerError(new Error(n))}clearTimeout(this.retryTimeout),this.retryTimeout=setTimeout(function(){t.load(t.file.id)},500*this.retryCount)}}},{key:"getErrorViewer",value:function(){return new m.a(this.createViewerOptions({viewer:{NAME:"Error"},container:this.container,file:this.file}))}},{key:"triggerError",value:function(e){this.open&&(this.open=!1,this.cache.unset(this.file.id),this.destroy(),this.viewer=this.getErrorViewer(),this.attachViewerListeners(),this.viewer.load(e))}},{key:"getRequestHeaders",value:function(e){var t=p.a.canPlayDash()&&!this.disabledViewers.Dash?k._19:k._20,n={"X-Rep-Hints":""+k._16+k._17+k._18+t};return Object(E.l)(n,e||this.options.token,this.options.sharedLink,this.options.sharedLinkPassword)}},{key:"prefetchNextFiles",value:function(){var e=this,t=this.options,n=t.apiHost,i=t.queryParams,r=t.skipServerUpdate;if(!(this.collection.length<2||r)){this.prefetchedCollection=this.prefetchedCollection||[];var o=this.collection.indexOf(this.file.id),a=this.collection.slice(o+1,o+4+1).filter(function(t){return-1===e.prefetchedCollection.indexOf(t)});0!==a.length&&Object(g.a)(a,this.previewOptions.token).then(function(t){a.forEach(function(r){var o=t[r],a=Object(E.d)(Object(w.g)(r,n),i);Object(E.k)(a,e.getRequestHeaders(o)).then(function(t){Object(w.a)(e.cache,t),e.prefetchedCollection.push(t.id),e.prefetch({fileId:t.id,token:o})}).catch(function(e){})})}).catch(function(){})}}},{key:"getGlobalMousemoveHandler",value:function(){var e=this;return c()(function(){if(clearTimeout(e.timeoutHandler),e.container){var t=!!e.viewer;e.container.classList.remove(k.H),t&&!e.viewer.allowNavigationArrows()||e.container.classList.add(k.H),e.timeoutHandler=setTimeout(function(){e.container&&e.container.classList.remove(k.H)},1500)}},1e3,!0)}},{key:"navigateToIndex",value:function(e){var t=this.collection[e];this.emit("navigate",t),this.count.navigation+=1,this.load(t)}},{key:"navigateLeft",value:function(){var e=this.collection.indexOf(this.file.id),t=0===e?0:e-1;t!==e&&this.navigateToIndex(t)}},{key:"navigateRight",value:function(){var e=this.collection.indexOf(this.file.id),t=e===this.collection.length-1?this.collection.length-1:e+1;t!==e&&this.navigateToIndex(t)}},{key:"getLoader",value:function(e){var t=this;return this.loaders.find(function(n){return n.canLoad(e,Object.keys(t.disabledViewers))})}},{key:"keydownHandler",value:function(e){var t=e.target;if(this.options.useHotkeys&&!(!t||C.indexOf(t.nodeName)>-1||"DIV"===t.nodeName&&t.getAttribute("contenteditable"))){var n=!1,i=Object(E.i)(e);if(i){if(this.viewer&&"function"==typeof this.viewer.onKeydown&&(n=!!this.viewer.onKeydown(i)),!n)switch(i){case"ArrowLeft":this.navigateLeft(),n=!0;break;case"ArrowRight":this.navigateRight(),n=!0}n&&(e.preventDefault(),e.stopPropagation())}}}}]),t}(l.a);e.Box=e.Box||{},e.Box.Preview=j,t.default=j}.call(t,n(13))},function(e,t){!function(){var e={};if(!Object.setPrototypeOf&&!e.__proto__){var t=Object.getPrototypeOf;Object.getPrototypeOf=function(e){return e.__proto__?e.__proto__:t.call(Object,e)}}}(),"function"!=typeof Object.assign&&function(){Object.assign=function(e){"use strict";if(void 0===e||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(void 0!==i&&null!==i)for(var r in i)i.hasOwnProperty(r)&&(t[r]=i[r])}return t}}(),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{configurable:!0,enumerable:!1,writable:!0,value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var i=arguments[1],r=0;r<n;){var o=t[r];if(e.call(i,o,r,t))return o;r++}}}),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{configurable:!0,enumerable:!1,writable:!0,value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var i=arguments[1],r=0;r<n;){var o=t[r];if(e.call(i,o,r,t))return r;r++}return-1}}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{configurable:!0,enumerable:!1,writable:!0,value:function(e,t){if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),i=n.length>>>0;if(0===i)return!1;for(var r=0|t,o=Math.max(r>=0?r:i-Math.abs(r),0);o<i;){if(function(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)}(n[o],e))return!0;o++}return!1}}),String.prototype.endsWith||Object.defineProperty(String.prototype,"endsWith",{configurable:!0,enumerable:!1,writable:!0,value:function(e,t){var n=this.toString();("number"!=typeof t||!isFinite(t)||Math.floor(t)!==t||t>n.length)&&(t=n.length),t-=e.length;var i=n.indexOf(e,t);return-1!==i&&i===t}})},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o="box-content-preview",a="1.23.0",s=function(){function e(t,n){i(this,e),this.start=Date.now(),this.log={locale:t,event:"preview",browser:n,client:{name:o,version:a},converted:!0,cache:{hit:!1,stale:!1},time:{conversion:0,rendering:0,total:0}}}return r(e,[{key:"setCached",value:function(){this.log.cache.hit=!0}},{key:"setCacheStale",value:function(){this.log.cache.stale=!0}},{key:"setUnConverted",value:function(){this.log.converted=!1,this.log.time.conversion=Date.now()-this.start}},{key:"setPreloaded",value:function(){this.log.time.preload=Date.now()-this.start}},{key:"setFile",value:function(e){this.log.file=e}},{key:"setType",value:function(e){this.log.type=e}},{key:"done",value:function(e){return this.log.count=e,this.log.time.total=Date.now()-this.start,this.log.time.rendering=this.log.time.total-this.log.time.conversion,this.log}}]),e}();t.a=s},function(e,t,n){"use strict";var i=n(99),r=n(151),o=n(158),a=n(160),s=n(166),l=n(178),u=n(184),c=n(192),h=n(201),d=n(203);t.a=[a.a,d.a,u.a,o.a,l.a,s.a,r.a,i.a,c.a,h.a]},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(8),s=n(100),l=n(149),u=n(1),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),h=[{NAME:"Image",CONSTRUCTOR:s.a,REP:u.O,EXT:["svg","gif"]},{NAME:"MultiImage",CONSTRUCTOR:l.a,REP:"png",EXT:["tif","tiff"],ASSET:"{page}.png"},{NAME:"Image",CONSTRUCTOR:s.a,REP:"jpg",EXT:["jpeg","jpg"],ASSET:"1.jpg"},{NAME:"Image",CONSTRUCTOR:s.a,REP:"png",EXT:["ai","bmp","dcm","eps","gif","png","ps","psd","svs","tga","tif","tiff"],ASSET:"1.png"}],d=function(e){function t(){i(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.viewers=h,e}return o(t,e),c(t,[{key:"determineRepresentation",value:function(e,t){return e.representations.entries.find(function(e){return(!e.properties||"false"!==e.properties.paged)&&t.REP===e.representation})}}]),t}(a.a);t.a=new d},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(5),s=n(58),l=n(4),u=n(1),c=n(2),h=n(148),d=(n.n(h),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),p=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},f=function(e){function t(e){i(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.rotateLeft=n.rotateLeft.bind(n),n.isMobile&&(n.handleOrientationChange=n.handleOrientationChange.bind(n)),n}return o(t,e),d(t,[{key:"setup",value:function(){p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setup",this).call(this),this.wrapperEl=this.containerEl.appendChild(document.createElement("div")),this.wrapperEl.classList.add("bp-image"),this.imageEl=this.wrapperEl.appendChild(document.createElement("img")),this.imageEl.setAttribute("data-page-number",1),this.imageEl.classList.add(u.B),this.currentRotationAngle=0}},{key:"load",value:function(){var e=this;this.setup(),p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"load",this).call(this);var n=this.options,i=n.representation,r=n.viewer,o=i.content.url_template;return this.bindDOMListeners(),this.getRepStatus().getPromise().then(function(){e.imageEl.src=e.createContentUrlWithAuthParams(o,r.ASSET)}).catch(this.handleAssetError)}},{key:"prefetch",value:function(e){var t=e.content,n=void 0===t||t,i=this.options,r=i.file,o=i.representation,a=i.viewer,s=r&&r.watermark_info&&r.watermark_info.is_watermarked;if(n&&!s&&this.isRepresentationReady(o)){var l=o.content.url_template;document.createElement("img").src=this.createContentUrlWithAuthParams(l,a.ASSET)}}},{key:"updatePannability",value:function(){this.imageEl&&(this.isRotated()?this.isPannable=this.imageEl.height>this.wrapperEl.clientWidth||this.imageEl.width>this.wrapperEl.clientHeight:this.isPannable=this.imageEl.width>this.wrapperEl.clientWidth||this.imageEl.height>this.wrapperEl.clientHeight,this.didPan=!1,this.updateCursor())}},{key:"rotateLeft",value:function(){this.currentRotationAngle=(this.currentRotationAngle-90)%3600%360,this.imageEl.setAttribute("data-rotation-angle",this.currentRotationAngle),this.imageEl.style.transform="rotate("+this.currentRotationAngle+"deg)",this.emit("rotate"),this.handleOrientationChange(),this.setScale(this.imageEl.offsetwidth,this.imageEl.offsetHeight)}},{key:"zoom",value:function(e){var t=void 0,n=void 0,i=this.imageEl.getBoundingClientRect(),r=i.height,o=i.width,a=o/r,s={width:this.wrapperEl.clientWidth-15,height:this.wrapperEl.clientHeight-15},l=a>=1;switch(e){case"in":l?t=1.2*o:n=1.2*r;break;case"out":l?t=o/1.2:n=r/1.2;break;case"reset":return this.imageEl.style.width="",this.imageEl.style.height="",this.adjustImageZoomPadding(),void this.zoom();default:if(o>s.width||r>s.height){var u=Math.min(s.width/o,s.height/r);l?t=o*u:n=r*u}else if(l){var c=this.isRotated()?this.imageEl.getAttribute("originalHeight"):this.imageEl.getAttribute("originalWidth");t=Math.min(s.width,c)}else{var h=this.isRotated()?this.imageEl.getAttribute("originalWidth"):this.imageEl.getAttribute("originalHeight");n=Math.min(s.height,h)}}if(this.isRotated()){var d=t;t=n,n=d}this.imageEl.style.width=t?t+"px":"",this.imageEl.style.height=n?n+"px":"",this.adjustImageZoomPadding(),setTimeout(this.updatePannability,50),this.setScale(t,n),this.emit("zoom",{newScale:[t||o,n||r],canZoomIn:!0,canZoomOut:!0})}},{key:"setScale",value:function(e,t){this.scale=e?e/this.imageEl.getAttribute("originalWidth"):t/this.imageEl.getAttribute("originalHeight"),this.rotationAngle=this.currentRotationAngle%3600%360,this.emit("scale",{scale:this.scale,rotationAngle:this.rotationAngle})}},{key:"loadUI",value:function(){p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"loadUI",this).call(this),this.controls.add("Rotate left",this.rotateLeft,"bp-image-rotate-left-icon",l.s),this.controls.add("Enter fullscreen",this.toggleFullscreen,"bp-enter-fullscreen-icon",l.l),this.controls.add("Exit fullscreen",this.toggleFullscreen,"bp-exit-fullscreen-icon",l.m)}},{key:"print",value:function(){this.printframe=Object(c.q)(this.imageEl.outerHTML),this.printframe.contentWindow.focus(),this.printImage=this.printframe.contentDocument.querySelector("img"),this.printImage.style.display="block",this.printImage.style.margin="0 auto","Explorer"===a.a.getName()||"Edge"===a.a.getName()?this.printframe.contentWindow.document.execCommand("print",!1,null):this.printframe.contentWindow.print(),this.emit("printsuccess")}},{key:"isRotated",value:function(){return Math.abs(this.currentRotationAngle)%180==90}},{key:"adjustImageZoomPadding",value:function(){var e=0,t=0,n=0,i=0,r=this.wrapperEl.getBoundingClientRect(),o={width:this.wrapperEl.clientWidth-15,height:this.wrapperEl.clientHeight-15};this.isRotated()?(n=r.width>this.imageEl.clientHeight?r.width:this.imageEl.clientHeight,i=r.height>this.imageEl.clientWidth?r.height:this.imageEl.clientWidth):(n=r.width>this.imageEl.clientWidth?r.width:this.imageEl.clientWidth,i=r.height>this.imageEl.clientHeight?r.height:this.imageEl.clientHeight),e=(n-this.imageEl.clientWidth)/2,t=(i-this.imageEl.clientHeight)/2,this.imageEl.style.left=e+"px",this.imageEl.style.top=t+"px",this.wrapperEl.scrollLeft=(this.wrapperEl.scrollWidth-o.width)/2,this.wrapperEl.scrollTop=(this.wrapperEl.scrollHeight-o.height)/2}},{key:"bindDOMListeners",value:function(){p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"bindDOMListeners",this).call(this),this.imageEl.addEventListener("load",this.finishLoading),this.imageEl.addEventListener("error",this.errorHandler),this.isMobile&&this.imageEl.addEventListener("orientationchange",this.handleOrientationChange)}},{key:"unbindDOMListeners",value:function(){p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"unbindDOMListeners",this).call(this),this.imageEl&&(this.imageEl.removeEventListener("load",this.finishLoading),this.imageEl.removeEventListener("error",this.errorHandler)),this.isMobile&&this.imageEl.removeEventListener("orientationchange",this.handleOrientationChange)}},{key:"handleOrientationChange",value:function(){this.adjustImageZoomPadding(),this.scale=this.imageEl.clientWidth/this.imageEl.getAttribute("originalWidth"),this.rotationAngle=this.currentRotationAngle%3600%360,this.emit("scale",{scale:this.scale,rotationAngle:this.rotationAngle})}}]),t}(s.a);t.a=f},function(e,t,n){var i;!function(r){function o(e){return e&&(e=e.toString().replace(u.pluses,"%20"),e=decodeURIComponent(e)),e}function a(e){var t=u.uri_parser,n=["source","protocol","authority","userInfo","user","password","host","port","isColonUri","relative","path","directory","file","query","anchor"],i=t.exec(e||""),r={};return n.forEach(function(e,t){r[e]=i[t]||""}),r}function s(e){var t,n,i,r,a,s,l,c=[];if(void 0===e||null===e||""===e)return c;for(0===e.indexOf("?")&&(e=e.substring(1)),n=e.toString().split(u.query_separator),t=0,l=n.length;t<l;t++)i=n[t],0!==(r=i.indexOf("="))&&(a=o(i.substring(0,r)),s=o(i.substring(r+1)),c.push(-1===r?[i,null]:[a,s]));return c}function l(e){this.uriParts=a(e),this.queryPairs=s(this.uriParts.query),this.hasAuthorityPrefixUserPref=null}var u={starts_with_slashes:/^\/+/,ends_with_slashes:/\/+$/,pluses:/\+/g,query_separator:/[&;]/,uri_parser:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*)(?::([^:@]*))?)?@)?(\[[0-9a-fA-F:.]+\]|[^:\/?#]*)(?::(\d+|(?=:)))?(:)?)((((?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/};Array.prototype.forEach||(Array.prototype.forEach=function(e,t){var n,i;if(null==this)throw new TypeError(" this is null or not defined");var r=Object(this),o=r.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(arguments.length>1&&(n=t),i=0;i<o;){var a;i in r&&(a=r[i],e.call(n,a,i,r)),i++}}),["protocol","userInfo","host","port","path","anchor"].forEach(function(e){l.prototype[e]=function(t){return void 0!==t&&(this.uriParts[e]=t),this.uriParts[e]}}),l.prototype.hasAuthorityPrefix=function(e){return void 0!==e&&(this.hasAuthorityPrefixUserPref=e),null===this.hasAuthorityPrefixUserPref?-1!==this.uriParts.source.indexOf("//"):this.hasAuthorityPrefixUserPref},l.prototype.isColonUri=function(e){if(void 0===e)return!!this.uriParts.isColonUri;this.uriParts.isColonUri=!!e},l.prototype.query=function(e){var t,n,i,r="";for(void 0!==e&&(this.queryPairs=s(e)),t=0,i=this.queryPairs.length;t<i;t++)n=this.queryPairs[t],r.length>0&&(r+="&"),null===n[1]?r+=n[0]:(r+=n[0],r+="=",void 0!==n[1]&&(r+=encodeURIComponent(n[1])));return r.length>0?"?"+r:r},l.prototype.getQueryParamValue=function(e){var t,n,i;for(n=0,i=this.queryPairs.length;n<i;n++)if(t=this.queryPairs[n],e===t[0])return t[1]},l.prototype.getQueryParamValues=function(e){var t,n,i,r=[];for(t=0,i=this.queryPairs.length;t<i;t++)n=this.queryPairs[t],e===n[0]&&r.push(n[1]);return r},l.prototype.deleteQueryParam=function(e,t){var n,i,r,a,s,l=[];for(n=0,s=this.queryPairs.length;n<s;n++)i=this.queryPairs[n],r=o(i[0])===o(e),a=i[1]===t,(1!==arguments.length||r)&&(2!==arguments.length||r&&a)||l.push(i);return this.queryPairs=l,this},l.prototype.addQueryParam=function(e,t,n){return 3===arguments.length&&-1!==n?(n=Math.min(n,this.queryPairs.length),this.queryPairs.splice(n,0,[e,t])):arguments.length>0&&this.queryPairs.push([e,t]),this},l.prototype.hasQueryParam=function(e){var t,n=this.queryPairs.length;for(t=0;t<n;t++)if(this.queryPairs[t][0]==e)return!0;return!1},l.prototype.replaceQueryParam=function(e,t,n){var i,r,a=-1,s=this.queryPairs.length;if(3===arguments.length){for(i=0;i<s;i++)if(r=this.queryPairs[i],o(r[0])===o(e)&&decodeURIComponent(r[1])===o(n)){a=i;break}a>=0&&this.deleteQueryParam(e,o(n)).addQueryParam(e,t,a)}else{for(i=0;i<s;i++)if(r=this.queryPairs[i],o(r[0])===o(e)){a=i;break}this.deleteQueryParam(e),this.addQueryParam(e,t,a)}return this},["protocol","hasAuthorityPrefix","isColonUri","userInfo","host","port","path","query","anchor"].forEach(function(e){var t="set"+e.charAt(0).toUpperCase()+e.slice(1);l.prototype[t]=function(t){return this[e](t),this}}),l.prototype.scheme=function(){var e="";return this.protocol()?(e+=this.protocol(),this.protocol().indexOf(":")!==this.protocol().length-1&&(e+=":"),e+="//"):this.hasAuthorityPrefix()&&this.host()&&(e+="//"),e},l.prototype.origin=function(){var e=this.scheme();return this.userInfo()&&this.host()&&(e+=this.userInfo(),this.userInfo().indexOf("@")!==this.userInfo().length-1&&(e+="@")),this.host()&&(e+=this.host(),(this.port()||this.path()&&this.path().substr(0,1).match(/[0-9]/))&&(e+=":"+this.port())),e},l.prototype.addTrailingSlash=function(){var e=this.path()||"";return"/"!==e.substr(-1)&&this.path(e+"/"),this},l.prototype.toString=function(){var e,t=this.origin();return this.isColonUri()?this.path()&&(t+=":"+this.path()):this.path()?(e=this.path(),u.ends_with_slashes.test(t)||u.starts_with_slashes.test(e)?(t&&t.replace(u.ends_with_slashes,"/"),e=e.replace(u.starts_with_slashes,"/")):t+="/",t+=e):this.host()&&(this.query().toString()||this.anchor())&&(t+="/"),this.query().toString()&&(t+=this.query().toString()),this.anchor()&&(0!==this.anchor().indexOf("#")&&(t+="#"),t+=this.anchor()),t},l.prototype.clone=function(){return new l(this.toString())},void 0!==(i=function(){return l}.call(t,n,t,e))&&(e.exports=i)}()},function(e,t){e.exports='<svg fill="#fff" height="24" viewBox="0 0 24 24" width="24" focusable="false">\n    <path d="M7 10l5 5 5-5z"/>\n    <path d="M0 0h24v24H0z" fill="none"/>\n</svg>\n'},function(e,t){e.exports='<svg fill="#fff" height="24" viewBox="0 0 24 24" width="24" focusable="false">\n    <path d="M7 14l5-5 5 5z"/>\n    <path d="M0 0h24v24H0z" fill="none"/>\n</svg>\n'},function(e,t){e.exports='<svg fill="#000" height="24" viewBox="0 0 24 24" width="24" focusable="false">\n    <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/>\n    <path d="M0 0h24v24H0z" fill="none"/>\n</svg>\n'},function(e,t){e.exports='<svg width="24" height="24" viewBox="0 0 24 24" focusable="false">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M15 3l2.3 2.3-2.89 2.87 1.42 1.42L18.7 6.7 21 9V3h-6zM3 3v6l2.3-2.3 2.87 2.89 1.42-1.42L6.7 5.3 9 3H3zm11.41 12.83l2.89 2.87L15 21h6v-6l-2.3 2.3-2.87-2.89-1.42 1.42zM5.3 17.3L3 15v6h6l-2.3-2.3 2.89-2.87-1.42-1.42L5.3 17.3z" fill="#fff" />\n        <path d="M0 0h24v24H0z" />\n    </g>\n</svg>\n\n'},function(e,t){e.exports='<svg width="24" height="24" viewBox="0 0 24 24" focusable="false">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z" />\n        <path d="M19.58 3l-2.87 2.89-2.3-2.3v6h6l-2.3-2.3L21 4.42 19.58 3zM4.42 3L3 4.42l2.89 2.87-2.3 2.3h6v-6l-2.3 2.3L4.42 3zm9.99 11.41v6l2.3-2.3L19.58 21 21 19.58l-2.89-2.87 2.3-2.3h-6zm-10.82 0l2.3 2.3L3 19.58 4.42 21l2.87-2.89 2.3 2.3v-6h-6z" fill="#fff" />\n    </g>\n</svg>\n'},function(e,t){e.exports='<svg fill="#fff" height="24" viewBox="0 0 24 24" width="24" focusable="false">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M7.11 8.53L5.7 7.11C4.8 8.27 4.24 9.61 4.07 11h2.02c.14-.87.49-1.72 1.02-2.47zM6.09 13H4.07c.17 1.39.72 2.73 1.62 3.89l1.41-1.42c-.52-.75-.87-1.59-1.01-2.47zm1.01 5.32c1.16.9 2.51 1.44 3.9 1.61V17.9c-.87-.15-1.71-.49-2.46-1.03L7.1 18.32zM13 4.07V1L8.45 5.55 13 10V6.09c2.84.48 5 2.94 5 5.91s-2.16 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93s-3.05-7.44-7-7.93z"/>\n</svg>\n'},function(e,t){e.exports='<svg fill="#fff" height="24" viewBox="0 0 24 24" width="24" focusable="false">\n    <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>\n    <path d="M0 0h24v24H0V0z" fill="none"/>\n    <path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"/>\n</svg>\n'},function(e,t){e.exports='<svg fill="#fff" height="24" viewBox="0 0 24 24" width="24" focusable="false">\n    <path d="M0 0h24v24H0V0z" fill="none"/>\n    <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14zM7 9h5v1H7z"/>\n</svg>\n'},function(e,t){e.exports='<svg fill="#999EA4" height="24" viewBox="0 0 24 24" width="24" focusable="false">\n    <path d="M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"/>\n    <path d="M0-.5h24v24H0z" fill="none"/>\n</svg>\n'},function(e,t){e.exports='<svg fill="#999EA4" height="24" viewBox="0 0 24 24" width="24" focusable="false">\n    <path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"/>\n    <path d="M0-.25h24v24H0z" fill="none"/>\n</svg>\n'},function(e,t){e.exports='<svg fill="#22A7F0" height="24" viewBox="0 0 24 24" width="24" focusable="false">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"/>\n</svg>\n'},function(e,t){e.exports='<svg version="1.1" width="24" height="24" viewBox="0 0 24 24" enable-background="new 0 0 24 24" focusable="false">\n    <path fill="#fff" d="M19.4,13c0-0.3,0.1-0.6,0.1-1s0-0.7-0.1-1l2.1-1.6c0.2-0.1,0.2-0.4,0.1-0.6l-2-3.5c-0.1-0.2-0.4-0.3-0.6-0.2l-2.5,1 c-0.5-0.4-1.1-0.7-1.7-1l-0.4-2.7C14.5,2.2,14.2,2,14,2h-4C9.8,2,9.5,2.2,9.5,2.4L9.1,5.1C8.5,5.3,8,5.7,7.4,6.1l-2.5-1 C4.7,5,4.5,5.1,4.3,5.3l-2,3.5C2.2,8.9,2.3,9.2,2.5,9.4L4.6,11c0,0.3-0.1,0.6-0.1,1s0,0.7,0.1,1l-2.1,1.6c-0.2,0.1-0.2,0.4-0.1,0.6 l2,3.5C4.5,18.9,4.7,19,5,18.9l2.5-1c0.5,0.4,1.1,0.7,1.7,1l0.4,2.6c0,0.2,0.2,0.4,0.5,0.4h4c0.2,0,0.5-0.2,0.5-0.4l0.4-2.6 c0.6-0.2,1.2-0.6,1.7-1l2.5,1c0.2,0.1,0.5,0,0.6-0.2l2-3.5c0.1-0.2,0.1-0.5-0.1-0.6L19.4,13z M12,15.5c-1.9,0-3.5-1.6-3.5-3.5 s1.6-3.5,3.5-3.5s3.5,1.6,3.5,3.5S13.9,15.5,12,15.5z"></path>\n</svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="160" viewBox="0 0 32 32"><path fill="#fff" d="M25 27H7V5h13l5 5v17"/><path fill="#955ca5" d="M20 4H7a.94.94 0 0 0-1 1v22a.94.94 0 0 0 1 1h18a.94.94 0 0 0 1-1V9.9zm5 23H7V5h13v4a.94.94 0 0 0 1 1h4z"/><path fill="#955ca5" d="M19 20.1V17h-6v4.5a1.5 1.5 0 1 1-1.5-1.5.9.9 0 0 1 .5.1V13h8v8.5a1.5 1.5 0 1 1-1.5-1.5.9.9 0 0 1 .5.1zM13 16h6v-2h-6z"/></svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="160" viewBox="0 0 32 32"><path fill="#fff" d="M25 27H7V5h13l5 5v17"/><path fill="#0061d5" d="M20 4H7a1 1 0 0 0-1 1v22a1 1 0 0 0 1 1h18a1 1 0 0 0 1-1V9.89zm5 23H7V5h13v4a1 1 0 0 0 1 1h4z"/><path fill="#980de0" d="M18.85 14.5H10.1a.75.75 0 0 0 0 1.5h7.7z"/><path fill="#0061d5" d="M16.7 17.5h-6.6a.76.76 0 0 0 0 1.52h5.59z"/><path fill="#00c9c1" d="M14.7 20.5h-4.6a.75.75 0 0 0 0 1.5H14l.05-.25c.05-.15.05-.4.15-.5z"/><path fill="#000123" d="M19.7 14.95a2.57 2.57 0 0 0 .6.6 2.17 2.17 0 0 0 .75.35l-4.6 6.45-.3.3-1.55 1.15c-.1.1-.2 0-.15-.1l.45-1.9a1.5 1.5 0 0 1 .2-.4zm1-1.5a1 1 0 0 1 1.25.9 6.38 6.38 0 0 1-.5.85 4.86 4.86 0 0 1-.75-.3 1.7 1.7 0 0 1-.65-.65z"/></svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="160" viewBox="0 0 32 32"><path fill="#fff" d="M25 27H7V5h13l5 5v17"/><path fill="#e33d55" d="M20 19h1v1h-1zM20 13h-3v1h2v3h1v-4M19 23h-2v1h3v-4h-1v3M21 18h1v1h-1zM20 17h1v1h-1zM11 24h3v-1h-2v-3h-1v4M10 19h1v1h-1zM10 17h1v1h-1zM9 18h1v1H9zM12 14h2v-1h-3v4h1v-3"/><path fill="#e33d55" d="M20 4H7a.94.94 0 0 0-1 1v22a.94.94 0 0 0 .88 1H25a.94.94 0 0 0 1-1V9.9zm5 23H7V5h13v4a.94.94 0 0 0 .88 1H25z"/></svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="160" viewBox="0 0 32 32"><path fill="#fff" d="M25 27H7V5h13l5 5v17"/><path fill="#d0011b" d="M20 4H7a1 1 0 0 0-1 1v22a1 1 0 0 0 1 1h18a1 1 0 0 0 1-1V9.89zm5 23H7V5h13v4a1 1 0 0 0 1 1h4z"/><path fill="#d0011b" d="M10 19h11v1H10zM10 21h11v1H10zM15 23h6v1h-6zM16.55 12.44V10h-2.1V12.44H12v2.12h2.45V17h2.1v-2.44H19v-2.12h-2.45"/></svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="160" viewBox="0 0 32 32"><path fill="#fff" d="M25 27H7V5h13l5 5v17"/><path fill="#737f8b" d="M20 4H7a1 1 0 0 0-1 1v22a1 1 0 0 0 1 1h18a1 1 0 0 0 1-1V9.89zm5 23H7V5h13v4a1 1 0 0 0 1 1h4z"/></svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="160" viewBox="0 0 32 32"><path fill="#fff" d="M25 27H7V5h13l5 5v17"/><path fill="#2a62b9" d="M20 4H7a1 1 0 0 0-1 1v22a1 1 0 0 0 1 1h18a1 1 0 0 0 1-1V9.89zm5 23H7V5h13v4a1 1 0 0 0 1 1h4z"/><path fill="#2a62b9" d="M10 20h8v1h-8zm0-3h11v1H10zm0-3h11v1H10z"/></svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" id="Layer_1" width="160" viewBox="0 0 32 32"><style>.st0{fill:#FFFFFF;} .st1{fill:#207245;}</style><path d="M25 27H7V5h13l5 5z" class="st0"/><path d="M20 4H7c-.6 0-1 .4-1 1v22c0 .6.4 1 1 1h18c.6 0 1-.4 1-1V9.9L20 4zm5 23H7V5h13v4c0 .6.4 1 1 1h4v17z" class="st1"/><path d="M10 13h3v2h-3zm4 0h3v2h-3zm4 0h3v2h-3zm-8 3h3v2h-3zm4 0h3v2h-3zm4 0h3v2h-3zm-8 3h3v2h-3zm4 0h3v2h-3zm4 0h3v2h-3zm-8 3h3v2h-3zm4 0h3v2h-3zm4 0h3v2h-3z" class="st1"/></svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" id="Layer_1" width="160" viewBox="0 0 32 32"><style>.st0{fill:#FFFFFF;} .st1{fill:#4083F7;}</style><path d="M25 27H7V5h13l5 5v17z" class="st0"/><path d="M20 4H7c-.6 0-1 .4-1 1v22c0 .6.4 1 1 1h18c.6 0 1-.4 1-1V9.9L20 4zm5 23H7V5h13v4c0 .6.4 1 1 1h4v17z" class="st1"/><path d="M10 15h11v1H10v-1zm0 2h11v1H10v-1zm0 2h11v1H10v-1zm0 2h8v1h-8v-1z" class="st1"/></svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="160" viewBox="0 0 32 32"><path fill="#fff" d="M25 27H7V5h13l5 5z"/><path fill="#21a464" d="M20 4H7a.94.94 0 0 0-1 1v22a.94.94 0 0 0 1 1h18a.94.94 0 0 0 1-1V9.9zm5 23H7V5h13v4a.94.94 0 0 0 1 1h4z"/><path fill="#21a464" d="M20 13h-9a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-8a1 1 0 0 0-1-1zm-5 9h-4v-2h4zm0-3h-4v-2h4zm0-3h-4v-2h4zm5 6h-4v-2h4zm0-3h-4v-2h4zm0-3h-4v-2h4z"/></svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" id="Layer_1" width="160" viewBox="0 0 32 32"><style>.st0{fill:#FFFFFF;} .st1{fill:#F7BA00;}</style><path d="M25 27H7V5h13l5 5z" class="st0"/><path d="M20 4H7c-.6 0-1 .4-1 1v22c0 .6.4 1 1 1h18c.6 0 1-.4 1-1V9.9L20 4zm5 23H7V5h13v4c0 .6.4 1 1 1h4v17z" class="st1"/><path d="M10 14v9c0 .6.4 1 1 1h9c.6 0 1-.4 1-1v-9c0-.6-.4-1-1-1h-9c-.6 0-1 .4-1 1zm10 7h-9v-5h9v5z" class="st1"/></svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="160" viewBox="0 0 32 32"><path fill="#fff" d="M25 27H7V5h13l5 5v17"/><path fill="#f7931d" d="M20 4H7a1 1 0 0 0-1 1v22a1 1 0 0 0 1 1h18a1 1 0 0 0 1-1V9.89zm5 23H7V5h13v4a1 1 0 0 0 1 1h4z"/><path fill="#f7931d" d="M14 14.85L12.89 18h2.25zm2.16 6l-.68-2h-2.83l-.71 2H11l2.61-7.1h.88l2.61 7.1zM18.99 13.7h.89v7.1h-.89z"/></svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="160" viewBox="0 0 32 32"><path fill="#fff" d="M25 27H7V5h13l5 5v17"/><path fill="#3fb87f" d="M20 4H7a1 1 0 0 0-1 1v22a1 1 0 0 0 1 1h18a1 1 0 0 0 1-1V9.89zm5 23H7V5h13v4a1 1 0 0 0 1 1h4z"/><path fill="#3fb87f" d="M18 17a2 2 0 1 1 2-2 2 2 0 0 1-2 2zm-.6 4.09l-3.12-3.71a.41.41 0 0 0-.58-.06l-.06.06L9 23h13l-2.72-3.6a.35.35 0 0 0-.6 0z"/></svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="160" viewBox="0 0 32 32"><path fill="#fff" d="M25 27H7V5h13l5 5v17"/><path fill="#157ef8" d="M20 4H7a.94.94 0 0 0-1 1v22a.94.94 0 0 0 1 1h18a.94.94 0 0 0 1-1V9.9zm5 23H7V5h13v4a.94.94 0 0 0 1 1h4z"/><path fill="#157ef8" d="M21.19 18.24a.44.44 0 0 1-.09.12l-.12.09H10a.44.44 0 0 1-.12-.09.51.51 0 0 1-.09-.12.51.51 0 0 1 0-.14v-.6h11.5v.6a.48.48 0 0 1-.1.14zM10 17s.14-2.51.18-3.36v-.4a1.44 1.44 0 0 1 0-.2.65.65 0 0 1 .06-.19.66.66 0 0 1 .12-.16.63.63 0 0 1 .16-.11.65.65 0 0 1 .19-.06h.77v-.56a1.9 1.9 0 0 1 0-.26.83.83 0 0 1 .25-.49.72.72 0 0 1 .2-.13.94.94 0 0 1 .29-.09h1.48a.15.15 0 0 0 .13 0l.16-.22a.48.48 0 0 1 .12-.1l.16-.05h1.38l.16.05a.56.56 0 0 1 .14.1.52.52 0 0 1 .1.14.59.59 0 0 1 .06.16.71.71 0 0 1 0 .16 1 1 0 0 1 0 .23.58.58 0 0 1-.06.16.57.57 0 0 1-.24.24l-.16.06h-1.38a.63.63 0 0 1-.16-.05l-.1-.07-.16-.17a.17.17 0 0 0-.12-.07h-1.55a.35.35 0 0 0-.14.14.32.32 0 0 0 0 .1 1.06 1.06 0 0 0 0 .18v.57h8.27a.65.65 0 0 1 .19.06.65.65 0 0 1 .16.11.62.62 0 0 1 .12.16.65.65 0 0 1 .06.19 1.18 1.18 0 0 1 0 .2v.32c0 .65.18 3.43.18 3.43H10zm3 6.5h2V19h1v4.5h2a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1z"/></svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="160" viewBox="0 0 32 32"><path fill="#fff" d="M25 27H7V5h13l5 5v17"/><path fill="#22a7f0" d="M20 4H7a1 1 0 0 0-1 1v22a1 1 0 0 0 1 1h18a1 1 0 0 0 1-1V9.89zm5 23H7V5h13v4a1 1 0 0 0 1 1h4z"/><path fill="#22a7f0" d="M12.43 21.8c-.24.13-.43 0-.43-.27v-8c0-.28.2-.4.43-.27l7.14 4a.25.25 0 0 1 0 .48z"/></svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" id="Layer_1" width="160" viewBox="0 0 32 32"><style>.st0{fill:#FFFFFF;} .st1{fill:#2ABB80;}</style><path d="M25 27H7V5h13l5 5z" class="st0"/><path d="M20 4H7c-.6 0-1 .4-1 1v22c0 .6.4 1 1 1h18c.6 0 1-.4 1-1V9.9L20 4zm5 23H7V5h13v4c0 .6.4 1 1 1h4v17z" class="st1"/><path d="M21.5 23.5h-12c-.3 0-.5-.2-.5-.5s.2-.5.5-.5h12c.3 0 .5.2.5.5s-.2.5-.5.5zm0-2H20c-.3 0-.5-.2-.5-.5v-6c0-.3.2-.5.5-.5h1.5c.3 0 .5.2.5.5v6c0 .3-.2.5-.5.5zm-3.5 0h-1.5c-.3 0-.5-.2-.5-.5v-8.5c0-.3.2-.4.5-.4H18c.3 0 .5.1.5.4V21c0 .3-.2.5-.5.5zm-3.5 0H13c-.3 0-.5-.2-.5-.5v-4.5c0-.3.2-.5.5-.5h1.5c.3 0 .5.2.5.5V21c0 .3-.2.5-.5.5zm-3.5 0H9.5c-.3 0-.5-.2-.5-.5v-1.5c0-.3.2-.5.5-.5H11c.3 0 .5.2.5.5V21c0 .3-.2.5-.5.5z" class="st1"/></svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="160" viewBox="0 0 32 32"><path fill="#fff" d="M25 27H7V5h13l5 5v17"/><path fill="#f7931d" d="M20 4H7a.94.94 0 0 0-1 1v22a.94.94 0 0 0 1 1h18a.94.94 0 0 0 1-1V9.9zm5 23H7V5h13v4a.94.94 0 0 0 1 1h4z"/><path fill="none" d="M12 15.2a.84.84 0 0 1 .4-.7l3.6-1.9a1.39 1.39 0 0 1 .9 0l3.6 1.9a.75.75 0 0 1 .4.7v4.9a.84.84 0 0 1-.4.7l-3.6 1.9a1.39 1.39 0 0 1-.9 0l-3.6-1.9a.84.84 0 0 1-.4-.7z"/><path fill="#f7931d" d="M19.5 14.4l-3.6-1.9a1.39 1.39 0 0 0-.9 0l-3.5 1.9a1 1 0 0 0-.5.8v4.9a.84.84 0 0 0 .4.7l3.6 1.9a1.39 1.39 0 0 0 .9 0l3.6-1.9a1.16 1.16 0 0 0 .5-.7v-4.9a1.37 1.37 0 0 0-.5-.8zM12 20v-4.7l3.4-1.8 3.5 1.8-3.5 2.1v4.4z"/></svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="160" viewBox="0 0 32 32"><path fill="#fff" d="M25 27H7V5h13l5 5v17"/><path fill="#f49d31" d="M20 4H7a.94.94 0 0 0-1 1v22a.94.94 0 0 0 1 1h18a.94.94 0 0 0 1-1V9.9zm5 23H7V5h13v4a.94.94 0 0 0 1 1h4z"/><path fill="#f49d31" d="M25 24H10.5a.5.5 0 0 1 0-1H25zm-4.35-10.45a.47.47 0 0 1 .06.63c-.14.24-1.65 1.76-2.57 2.68l-.07.07c-.45.45-.4.56-.39.6s.08.2 0 .29a.18.18 0 0 1-.24 0 .5.5 0 0 1 0-.54 2.15 2.15 0 0 1 .41-.52A31.57 31.57 0 0 0 20.37 14v-.17l-.27-.27c-.94 1-2.16 2.25-3.53 3.56L15.47 16c1.44-1.42 2.85-2.76 4-3.77a.76.76 0 0 1 1-.11.72.72 0 0 1-.1 1l-.08.09.29.28zM13 20.42a8.94 8.94 0 0 1-1.09.83l-.67-.65a8.84 8.84 0 0 1 .86-1.06c.59-.67 1.8-1.91 3-3.09l1.1 1.06c-1.28 1.16-2.56 2.33-3.2 2.91zm-2.7 1.75a.11.11 0 0 1-.14 0 .1.1 0 0 1 0-.14c.24-.35.46-.6.69-.93l.5.48c-.35.21-.69.36-1.05.59z"/></svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="160" viewBox="0 0 32 32"><path fill="#fff" d="M25 27H7V5h13l5 5v17"/><path fill="#e33d55" d="M20 4H7a1 1 0 0 0-1 1v22a1 1 0 0 0 1 1h18a1 1 0 0 0 1-1V9.89zm5 23H7V5h13v4a1 1 0 0 0 1 1h4z"/><path fill="#e33d55" d="M21.53 20.17a2 2 0 0 0-1.76-.93 10 10 0 0 0-1.54.11 4.77 4.77 0 0 0 3.13.81 1 1 0 0 1-.84.86 2.4 2.4 0 0 1-1.52-.21 17.59 17.59 0 0 1-1.73-1 .55.55 0 0 0-.54-.09l-2.58.93a.85.85 0 0 0-.37.3c-1.29 1.95-2.44 3-2.93 3.06s-1.13-.18-.86-1.37 1.23-1.49 2.29-1.74c-1.08.8-1.5 1.42-1.41 2.1a.83.83 0 0 0 .13-.14 24.24 24.24 0 0 0 3.8-5.45.4.4 0 0 0 0-.41 6.94 6.94 0 0 1-.9-3.66c.26-2.53 2.55-1.55 2 .38a1.87 1.87 0 0 0-.51-1.1c-.29-.22-.54-.12-.59.23a5.77 5.77 0 0 0 .51 3.35 5.46 5.46 0 0 0 .46-2.2.9.9 0 0 1 .52.62 2.8 2.8 0 0 1-.08 1.62c-.08.28-.2.56-.28.84a.34.34 0 0 0 0 .27c.37.42.75.82 1.15 1.22a.36.36 0 0 0 .3 0 7.22 7.22 0 0 1 2.11-.44 1.82 1.82 0 0 1 2 1.62zm-6-2.12l-1 1.84 1.9-.88z"/></svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" id="Layer_1" width="160" viewBox="0 0 32 32"><style>.st0{fill:#FFFFFF;} .st1{fill:#B84729;}</style><path d="M25 27H7V5h13l5 5z" class="st0"/><path d="M20 4H7c-.6 0-1 .4-1 1v22c0 .6.4 1 1 1h18c.6 0 1-.4 1-1V9.9L20 4zm5 23H7V5h13v4c0 .6.4 1 1 1h4v17z" class="st1"/><path d="M10 20h11v1H10zm0 2h11v1H10zm5-9c-1.7 0-3 1.3-3 3s1.3 3 3 3 3-1.3 3-3h-3v-3z" class="st1"/><path d="M16 12v3h3c0-1.7-1.3-3-3-3z" class="st1"/></svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="160" viewBox="0 0 32 32"><path fill="#fff" d="M25 27H7V5h13l5 5v17"/><path fill="#f7931d" d="M20 4H7a1 1 0 0 0-1 1v22a1 1 0 0 0 1 1h18a1 1 0 0 0 1-1V9.89zm5 23H7V5h13v4a1 1 0 0 0 1 1h4z"/><path fill="#f7931d" d="M10.35 22.41l-.7-.71 4.88-4.86 2.49 2.47 4.63-4.61.7.71-5.33 5.32-2.49-2.48-4.18 4.16"/></svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="160px" viewBox="0 0 32 32"><title>SPREADSHEET</title><polygon points="25 27 7 27 7 5 20 5 25 10 25 27" style="fill:#fff"/><path d="M20,4H7A1,1,0,0,0,6,5V27a1,1,0,0,0,1,1H25a1,1,0,0,0,1-1V9.89Zm5,23H7V5H20V9a1,1,0,0,0,1,1h4Z" style="fill:#3fb87f"/><path d="M21,13H11a1,1,0,0,0-1,1v8a1,1,0,0,0,1,1H21a1,1,0,0,0,1-1V14A1,1,0,0,0,21,13ZM11,14h3v2H11Zm0,3h3v2H11Zm0,5V20h3v2Zm10,0H15V20h6Zm0-3H15V17h6Zm-6-3V14h6v2Z" style="fill:#3fb87f"/></svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" id="Layer_1" width="160" viewBox="0 0 32 32"><style>.st0{fill:#FFFFFF;} .st1{fill:#2A5696;}</style><path d="M25 27H7V5h13l5 5z" class="st0"/><path d="M20 4H7c-.6 0-1 .4-1 1v22c0 .6.4 1 1 1h18c.6 0 1-.4 1-1V9.9L20 4zm5 23H7V5h13v4c0 .6.4 1 1 1h4v17z" class="st1"/><path d="M10 13h11v1H10zm0 2h11v1H10zm0 2h11v1H10zm0 2h11v1H10zm0 2h11v1H10z" class="st1"/></svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="160" viewBox="0 0 32 32"><path fill="#fff" d="M25 27H7V5h13l5 5v17"/><path fill="#737f8b" d="M11 25h1v1h-1zM11 23h1v1h-1zM11 21h1v1h-1zM11 19h1v1h-1zM11 17h1v1h-1zM11 15h1v1h-1zM11 13h1v1h-1zM11 11h1v1h-1zM11 9h1v1h-1zM11 7h1v1h-1zM11 5h1v1h-1zM12 24h1v1h-1zM12 22h1v1h-1zM12 20h1v1h-1zM12 18h1v1h-1zM12 16h1v1h-1zM12 14h1v1h-1zM12 12h1v1h-1zM12 10h1v1h-1zM12 8h1v1h-1zM12 6h1v1h-1z"/><path fill="#737f8b" d="M20 4H7a.94.94 0 0 0-1 1v22a.94.94 0 0 0 1 1h18a.94.94 0 0 0 1-1V9.9zm5 23H7V5h13v4a.94.94 0 0 0 1 1h4z"/><path fill="#737f8b" d="M12 26h1v1h-1z"/></svg>\n'},function(e,t){e.exports='<svg width="24" height="22" viewBox="0 0 24 22" focusable="false">\n  <g fill="none" fill-rule="evenodd">\n    <path d="M0-1h24v24H0"/>\n    <path d="M18.49 4.48c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm-3.6 13.9l1-4.4 2.1 2v6h2v-7.5l-2.1-2 .6-3c1.3 1.5 3.3 2.5 5.5 2.5v-2c-1.9 0-3.5-1-4.3-2.4l-1-1.6c-.4-.6-1-1-1.7-1-.3 0-.5.1-.8.1l-5.2 2.2v4.7h2v-3.4l1.8-.7-1.6 8.1-4.9-1-.4 2 7 1.4z" fill="#FFF"/>\n    <path d="M3 7h6M5 3h6M1 11h6" stroke="#FFF" stroke-width="2" stroke-linecap="square"/>\n  </g>\n</svg>\n'},function(e,t){e.exports='<svg fill="#fff" height="24" viewBox="0 0 24 24" width="24" focusable="false">\n    <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>\n    <path d="M0 0h24v24H0z" fill="none"/>\n</svg>\n'},function(e,t){e.exports='<svg fill="#fff" height="24" viewBox="0 0 24 24" width="24" focusable="false">\n    <path d="M8 5v14l11-7z"/>\n    <path d="M0 0h24v24H0z" fill="none"/>\n</svg>\n'},function(e,t){e.exports='<svg fill="#fff" height="48" viewBox="0 0 24 24" width="48" focusable="false">\n    <path d="M8 5v14l11-7z"/>\n    <path d="M0 0h24v24H0z" fill="none"/>\n</svg>\n'},function(e,t){e.exports='<svg fill="#fff" height="24" viewBox="0 0 24 24" width="24" focusable="false">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z"/>\n</svg>\n'},function(e,t){e.exports='<svg width="24" height="24" viewBox="0 0 24 24" focusable="false">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0V0z" />\n        <path d="M2.045 17.25c1.114 1.296 5.66 1.487 7.033.268 1.374-1.22 1.367-1.733 2.972-1.733 1.692 0 1.436-.02 3.122 1.732 1.687 1.752 5.973.84 6.9-.268.927-1.11 1.507-7.72 0-10.038-1.507-2.317-18.38-2.25-20.027 0-1.647 2.252-1.114 8.74 0 10.037z" stroke="#FFF" stroke-width="2" />\n    </g>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="-11 13 24 24" focusable="false">\n  <path class="icon" fill="#494949" d="M-4 23l5 5 5-5H-4z"/>\n  <path fill="none" d="M-11 13h24v24h-24V13z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="-11 13 24 24" focusable="false">\n  <path class="icon" fill="#494949" d="M-4 27l5-5 5 5H-4z"/>\n  <path fill="none" d="M-11 13h24v24h-24V13z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="-11 13 24 24" focusable="false">\n  <path class="icon" fill="#494949" d="M6 21l-1-1-4 4-4-4-1 1 4 4-4 4 1 1 4-4 4 4 1-1-4-4 4-4z"/>\n  <path fill="none" d="M-11 13h24v24h-24V13z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="-11 13 24 24" focusable="false">\n  <path class="icon" fill="#494949" d="M3.3 26.3h-.5l-.2-.2c.7-.8 1.1-1.8 1.1-2.9 0-2.5-2-4.5-4.5-4.5s-4.5 2-4.5 4.5 2 4.5 4.5 4.5c1.1 0 2.1-.4 2.9-1.1l.2.2v.5l3.4 3.4 1-1-3.4-3.4zm-4.1 0c-1.7 0-3.1-1.4-3.1-3.1s1.4-3.1 3.1-3.1 3.1 1.4 3.1 3.1-1.4 3.1-3.1 3.1z"/>\n  <path fill="none" d="M-11 13h24v24h-24V13z"/>\n</svg>\n'},function(e,t){e.exports='<svg width="16" height="16" viewBox="0 0 16 16" focusable="false">\n  <path d="M4.187 6.48L3.067 7.6l3.6 3.6 8-8-1.12-1.12-6.88 6.88-2.48-2.48zM14.4 8c0 3.52-2.88 6.4-6.4 6.4-3.52 0-6.4-2.88-6.4-6.4 0-3.52 2.88-6.4 6.4-6.4.64 0 1.2.08 1.76.24L11.04.56C10.08.24 9.04 0 8 0 3.6 0 0 3.6 0 8s3.6 8 8 8 8-3.6 8-8h-1.6z" fill="#22A7F0" fill-rule="evenodd"/>\n</svg>\n'},function(e,t){},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(58),s=n(61),l=n(150),u=(n.n(l),n(4)),c=n(1),h=n(2),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),p=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},f=function(e){function t(e){i(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.setPage=n.setPage.bind(n),n.scrollHandler=n.scrollHandler.bind(n),n.handlePageChangeFromScroll=n.handlePageChangeFromScroll.bind(n),n}return o(t,e),d(t,[{key:"setup",value:function(){p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setup",this).call(this),this.wrapperEl=this.containerEl.appendChild(document.createElement("div")),this.wrapperEl.classList.add("bp-images-wrapper"),this.imageEl=this.wrapperEl.appendChild(document.createElement("div")),this.imageEl.classList.add("bp-images"),this.singleImageEls=[this.imageEl.appendChild(document.createElement("img"))],this.loadTimeout=6e4,this.currentPageNumber=1,this.previousScrollTop=0}},{key:"destroy",value:function(){var e=this;this.singleImageEls&&this.singleImageEls.length>0&&this.singleImageEls.forEach(function(t,n){e.unbindImageListeners(n)}),this.pageControls&&this.pageControls.removeListener("pagechange",this.setPage),p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"load",value:function(){var e=this;return this.setup(),p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"load",this).call(this),this.imageEl.classList.add(c.B),this.bindImageListeners(0),this.bindDOMListeners(),this.getRepStatus().getPromise().then(function(){var t=e.options.representation.content.url_template;e.imageUrls=e.constructImageUrls(t),e.imageUrls.forEach(function(t,n){return e.setupImageEls(t,n)}),e.wrapperEl.addEventListener("scroll",e.scrollHandler,!0)}).catch(this.handleAssetError)}},{key:"constructImageUrls",value:function(e){var t=this.options,n=t.viewer,i=t.representation,r=i.metadata,o=n.ASSET;this.pagesCount=r.pages;for(var a=this.createContentUrlWithAuthParams(e,o),s=[],l=1;l<=this.pagesCount;l++)s.push(a.replace("{page}",l));return s}},{key:"setupImageEls",value:function(e,t){0!==t&&(this.singleImageEls[t]=this.imageEl.appendChild(document.createElement("img")),this.bindImageListeners(t)),this.singleImageEls[t].setAttribute("data-page-number",t+1),this.singleImageEls[t].classList.add("page"),this.singleImageEls[t].src=e}},{key:"updatePannability",value:function(){this.wrapperEl&&(this.isPannable=this.imageEl.clientWidth>this.wrapperEl.clientWidth,this.didPan=!1,this.updateCursor())}},{key:"zoom",value:function(e){var t=void 0,n=this.imageEl.parentNode.clientWidth,i=this.imageEl.clientWidth;switch(e){case"in":t=i+100;break;case"out":t=i-100;break;default:t=n}this.imageEl.style.width=t+"px",this.imageEl.parentNode.scrollLeft=(this.imageEl.parentNode.scrollWidth-n)/2,this.setScale(this.imageEl.offsetWidth,this.imageEl.offsetHeight),this.emit("zoom"),setTimeout(this.updatePannability,50),this.setPage(this.currentPageNumber)}},{key:"setScale",value:function(e,t){var n=this.singleImageEls[0];this.scale=e?e/n.naturalWidth:t/n.naturalHeight,this.emit("scale",{scale:this.scale})}},{key:"loadUI",value:function(){p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"loadUI",this).call(this),this.pageControls=new s.a(this.controls,this.wrapperEl),this.bindPageControlListeners()}},{key:"bindPageControlListeners",value:function(){this.pageControls.add(this.currentPageNumber,this.pagesCount),this.pageControls.addListener("pagechange",this.setPage),this.controls.add("Enter fullscreen",this.toggleFullscreen,"bp-enter-fullscreen-icon",u.l),this.controls.add("Exit fullscreen",this.toggleFullscreen,"bp-exit-fullscreen-icon",u.m)}},{key:"bindImageListeners",value:function(e){0===e&&this.singleImageEls[e].addEventListener("load",this.finishLoading),this.singleImageEls[e].addEventListener("error",this.errorHandler)}},{key:"unbindImageListeners",value:function(e){0===e&&this.singleImageEls[e].removeEventListener("load",this.finishLoading),this.singleImageEls[e].removeEventListener("error",this.errorHandler)}},{key:"previousPage",value:function(){this.setPage(this.currentPageNumber-1)}},{key:"nextPage",value:function(){this.setPage(this.currentPageNumber+1)}},{key:"setPage",value:function(e){this.isValidPageChange(e)&&(this.singleImageEls[e-1].scrollIntoView(),this.updateCurrentPage(e))}},{key:"updateCurrentPage",value:function(e){this.isValidPageChange(e)&&(this.currentPageNumber=e,this.pageControls.updateCurrentPage(e),this.emit("pagefocus",{pageNumber:e}))}},{key:"isValidPageChange",value:function(e){return e>=1&&e<=this.pagesCount&&e!==this.currentPageNumber}},{key:"scrollHandler",value:function(){if(!this.scrollCheckHandler){var e=this.handlePageChangeFromScroll;this.scrollCheckHandler=window.requestAnimationFrame(e)}}},{key:"handlePageChangeFromScroll",value:function(){var e=Object(h.s)(this.currentPageNumber,this.previousScrollTop,this.singleImageEls[this.currentPageNumber-1],this.wrapperEl);this.updateCurrentPage(e),this.scrollCheckHandler=null,this.previousScrollTop=this.wrapperEl.scrollTop}}]),t}(a.a);t.a=f},function(e,t){},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(62),s=n(5),l=n(2),u=n(152),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),h=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},d=[{NAME:"Image360",CONSTRUCTOR:u.a,REP:"3d",EXT:["jpg","jpeg","png","ai","bmp","dcm","eps","gif","ps","psd","svg","svs","tga","tif","tiff"]}],p=function(e){function t(){i(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.viewers=d,e}return o(t,e),c(t,[{key:"determineViewer",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=h(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"determineViewer",this).call(this,e,n);if(i&&!s.a.hasWebGL()){var r=Object(l.w)("We're sorry, your browser doesn't support preview for {1}.",["360-degree images"]);throw new Error(r)}return i}}]),t}(a.a);t.a=new p},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(153),s=(n.n(a),n(63)),l=n(37),u=n(156),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),h=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},d=function(e){function t(){return i(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),c(t,[{key:"setup",value:function(){h(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setup",this).call(this),this.wrapperEl.classList.add("bp-image-360"),this.loadTimeout=12e4}},{key:"createSubModules",value:function(){this.controls=new l.a(this.wrapperEl),this.renderer=new u.a(this.wrapperEl,this.boxSdk)}}]),t}(s.a);t.a=d},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(29),s=n(157),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},c=function(e){function t(){return i(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),l(t,[{key:"destroy",value:function(){this.cleanupTexture(),u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"cleanupTexture",value:function(){this.imageAsset&&(this.imageAsset.destroy(),this.imageAsset=null),this.textureAsset&&(this.textureAsset.destroy(),this.textureAsset=null),this.skybox&&(this.getSkyboxComponent().setAttribute("skyboxTexture",null),this.skybox=null)}},{key:"getSkyboxComponent",value:function(){return this.skybox||(this.skybox=this.getScene().getComponentByScriptId("skybox_renderer")),this.skybox}},{key:"load",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n;return i.sceneEntities=i.sceneEntities||s.a,u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"load",this).call(this,e,i).then(this.loadPanoramaFile.bind(this,e)).then(this.onSceneLoad.bind(this))}},{key:"loadPanoramaFile",value:function(e){var t=this;return this.box3d.importEntitiesFromUrl(e).then(function(){return t.imageAsset=t.box3d.getAssetByClass(Box3D.ImageAsset),t.textureAsset=t.box3d.createTexture2d(),t.textureAsset.setProperties({imageId:t.imageAsset.id,wrapModeV:"clampToEdge",wrapModeU:"clampToEdge"}),new Promise(function(e){t.textureAsset.load(function(){t.skybox=t.getSkyboxComponent(),t.skybox.enable(),t.skybox.setAttribute("skyboxTexture",t.textureAsset.id),e()})})},function(){return t.onUnsupportedRepresentation()})}},{key:"enableVr",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"enableVr",this).call(this),this.getSkyboxComponent().setAttribute("stereoEnabled",!0)}},{key:"disableVr",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"disableVr",this).call(this),this.getSkyboxComponent().setAttribute("stereoEnabled",!1)}}]),t}(a.a);t.a=c},function(e,t,n){"use strict";var i=n(5);t.a=[{id:"CAMERA_ID",type:"camera",parentId:"SCENE_ID",properties:{near:.05,far:200,fov:70},components:[{name:"Render View",enabled:!0,scriptId:"vr_render_view"},{name:"Orbit Camera",attributes:{panEnabled:!1,zoomEnabled:!0,inertialDamping:.2,lookSpeed:.5},enabled:!0,scriptId:"orbit_camera"},{name:"VR Camera Controller",enabled:!0,scriptId:"vr_camera_controller"}]},{id:"SCENE_ID",type:"scene",children:["CAMERA_ID"],components:[{name:"Skybox",attributes:{size:100},scriptId:"skybox_renderer",enabled:!1}]},{id:"APP_ASSET_ID",type:"application",properties:{startupSceneId:"SCENE_ID"},components:[{name:"Renderer",attributes:{antialias:!i.a.isMobile(),maxTextureSize2d:8192,renderOnDemand:!0},scriptId:"box3d_renderer",isBuiltIn:!0,enabled:!0},{name:"Debug Performance",scriptId:"debug_performance",enabled:!1},{name:"Input",scriptId:"input",isBuiltIn:!0,enabled:!0,attributes:{mouseEvents:{enable:!0,scroll:!0,preventScrollDefault:!0,move:!0,down:!0,preventDownDefault:!1,up:!0,doubleClick:!0,leave:!0,contextMenu:!0,preventContextMenuDefault:!0,dragBufferDistance:12,eventHandler:!0},touchEvents:{enable:!0,start:!0,preventStartDefault:!1,end:!0,doubleTap:!0,cancel:!0,leave:!0,move:!0,preventMoveDefault:!0,dragBufferDistance:12,eventHandler:!0},keyEvents:{enable:!0,down:!0,up:!0,preventDefault:!1,eventHandler:!0}}},{name:"VR Presenter",scriptId:"vr_presenter"}]}]},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(8),s=n(159),l=n(1),u=[{NAME:"SWF",CONSTRUCTOR:s.a,REP:l.O,EXT:["swf"]}],c=function(e){function t(){i(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.viewers=u,e}return o(t,e),t}(a.a);t.a=new c},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(9),s=n(1),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},c={allowfullscreen:"true",allowFullScreen:"true",allownetworking:"none",allowNetworking:"none",allowscriptaccess:"never",allowScriptAccess:"never",wmode:"transparent"},h=["third-party/swf/"+s._14+"/swfobject.js"],d=function(e){function t(){var e,n,o,a;i(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=o=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),o.postLoad=function(){var e=o.options.representation.content.url_template;swfobject.embedSWF(o.createContentUrlWithAuthParams(e),o.playerEl.id,"100%","100%","9",null,null,c,null,function(){o.isDestroyed()||(o.loaded=!0,o.emit("load"))})},a=n,r(o,a)}return o(t,e),l(t,[{key:"setup",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setup",this).call(this),this.playerEl=this.containerEl.appendChild(document.createElement("div")),this.playerEl.id="flash-player"}},{key:"load",value:function(){return this.setup(),u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"load",this).call(this),this.loadAssets(h).then(this.postLoad).catch(this.handleAssetError)}},{key:"prefetch",value:function(e){var t=e.assets;(void 0===t||t)&&this.prefetchAssets(h)}}]),t}(a.a);t.a=d},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(8),s=n(66),l=n(162),u=n(164),c=n(2),h=n(1),d=n(40),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),f=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},v=[{NAME:"CSV",CONSTRUCTOR:u.a,REP:"text",EXT:["csv","tsv"]},{NAME:"Markdown",CONSTRUCTOR:l.a,REP:"text",EXT:["md"]},{NAME:"Text",CONSTRUCTOR:s.a,REP:h.O,EXT:d.c},{NAME:"Text",CONSTRUCTOR:s.a,REP:"text",EXT:d.d}],b=function(e){function t(){i(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.viewers=v,e}return o(t,e),p(t,[{key:"determineViewer",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"determineViewer",this).call(this,e,n);if(!i||!Object(c.n)(e))return i}}]),t}(a.a);t.a=new b},function(e,t){},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(25),s=n(66),l=n(1),u=n(4),c=n(163),h=(n.n(c),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),d=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},p="third-party/text/"+l._15+"/",f=function(e){function t(){return i(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),h(t,[{key:"setup",value:function(){d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setup",this).call(this),this.codeEl.parentNode.removeChild(this.codeEl),this.codeEl=null,this.markdownEl=this.textEl.appendChild(document.createElement("article")),this.markdownEl.classList.add("markdown-body")}},{key:"getJS",value:function(){return d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getJS",this).call(this).concat(p+"remarkable.min.js")}},{key:"getCSS",value:function(){return d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getCSS",this).call(this).concat(p+"github-markdown.min.css")}},{key:"print",value:function(){var e=this;if(!this.printReady)return this.preparePrint(this.getCSS().concat("preview.css")),this.printPopup.show("Preparing to print...","Print",function(){e.printPopup.hide(),e.printIframe()}),void this.printPopup.disableButton();this.printIframe()}},{key:"finishLoading",value:function(e){var t=this.initRemarkable();this.markdownEl.innerHTML=t.render(e),this.loadUI(),this.textEl.classList.remove(l.A),this.loaded=!0,this.emit("load"),this.truncated&&this.showTruncatedDownloadButton()}},{key:"loadUI",value:function(){this.controls=new a.a(this.containerEl),this.controls.add("Enter fullscreen",this.toggleFullscreen,"bp-enter-fullscreen-icon",u.l),this.controls.add("Exit fullscreen",this.toggleFullscreen,"bp-exit-fullscreen-icon",u.m)}},{key:"initRemarkable",value:function(){var e=new Remarkable({breaks:!0,linkify:!0,linkTarget:"_blank",typographer:!0,highlight:function(e,t){if(t&&hljs.getLanguage(t))try{return hljs.highlight(t,e).value}catch(e){}try{return hljs.highlightAuto(e).value}catch(e){}return""}}),t=e.renderer.rules.link_open;return e.renderer.rules.link_open=function(e,n,i){return t(e,n,i).slice(0,-1)+' rel="noopener noreferrer">'},e}}]),t}(s.a);t.a=f},function(e,t){},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(67),s=n(2),l=n(1),u=n(165),c=(n.n(u),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),h=function(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var r=Object.getPrototypeOf(e);return null===r?void 0:Object(s.k)(r,t,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},d=["third-party/text/"+l._15+"/papaparse.min.js","csv.js"],p=function(e){function t(){return i(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),c(t,[{key:"setup",value:function(){h(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setup",this).call(this),this.csvEl=this.containerEl.appendChild(document.createElement("div")),this.csvEl.className="bp-text bp-text-csv"}},{key:"destroy",value:function(){this.csvComponent&&this.csvComponent.destroy(),h(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"load",value:function(){var e=this;this.setup(),h(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"load",this).call(this);var n=this.options,i=n.representation,r=n.location,o=i.content.url_template,a=Object(s.e)(r),l=a(d[0]);return Promise.all([this.loadAssets(d),this.getRepStatus().getPromise()]).then(function(){Object(s.k)(l,"blob").then(function(t){var n=URL.createObjectURL(t);Papa.SCRIPT_PATH=n;var i=e.createContentUrlWithAuthParams(o);Papa.parse(i,{download:!0,error:function(t,n,i,r){e.emit("error",r)},complete:function(t){!e.isDestroyed()&&t&&(e.data=t.data,e.finishLoading(),URL.revokeObjectURL(n))}})})}).catch(this.handleAssetError)}},{key:"prefetch",value:function(e){var t=e.assets,n=void 0===t||t,i=e.content,r=void 0===i||i;n&&this.prefetchAssets(d);var o=this.options.representation;if(r&&this.isRepresentationReady(o)){var a=o.content.url_template;Object(s.k)(this.createContentUrlWithAuthParams(a),"any")}}},{key:"resize",value:function(){this.csvComponent&&this.csvComponent.renderCSV(),h(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"resize",this).call(this)}},{key:"finishLoading",value:function(){this.csvComponent=new BoxCSV(this.csvEl,this.data),this.csvComponent.renderCSV(),this.loadUI(),this.loaded=!0,this.emit("load")}}]),t}(a.a);t.a=p},function(e,t){},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(8),s=n(2),l=n(167),u=n(174),c=n(70),h=n(1),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),p=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},f=["3g2","3gp","avi","flv","m2v","m2ts","m4v","mkv","mov","mp4","mpeg","mpg","mts","ogg","qt","ts","wmv"],v=[{NAME:"MP3",CONSTRUCTOR:l.a,REP:h.O,EXT:["mp3"]},{NAME:"Dash",CONSTRUCTOR:c.a,REP:"dash",EXT:f},{NAME:"MP4",CONSTRUCTOR:u.a,REP:"mp4",EXT:f},{NAME:"MP3",CONSTRUCTOR:l.a,REP:"mp3",EXT:["aac","aif","aifc","aiff","amr","au","flac","m4a","mp3","ra","wav","wma"]}],b=function(e){function t(){i(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.viewers=v,e}return o(t,e),d(t,[{key:"determineViewer",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"determineViewer",this).call(this,e,n);if(i&&Object(s.x)(e)){var r=Object(s.w)("We're sorry, your browser doesn't support preview for {1}.",["360-degree videos"]);throw new Error(r)}return i}}]),t}(a.a);t.a=new b},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(68),s=n(173),l=(n.n(s),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),u=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},c=function(e){function t(){return i(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),l(t,[{key:"setup",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setup",this).call(this),this.wrapperEl.classList.add("bp-media-mp3"),this.mediaEl=this.mediaContainerEl.appendChild(document.createElement("audio")),this.mediaEl.setAttribute("preload","auto")}},{key:"loadUI",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"loadUI",this).call(this),this.mediaControls.show(),this.mediaControls.resizeTimeScrubber()}}]),t}(a.a);t.a=c},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(6),s=n.n(a),l=n(169),u=n.n(l),c=n(170),h=n(172),d=n(10),p=n(2),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),v=["bp-media-volume-icon-is-mute","bp-media-volume-icon-is-low","bp-media-volume-icon-is-medium","bp-media-volume-icon-is-high"],b=function(e){function t(e,n,o){i(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.containerEl=e,a.mediaEl=n,a.cache=o,Object(p.m)(a.containerEl,u.a),a.wrapperEl=a.containerEl.querySelector(".bp-media-controls-wrapper"),a.timeScrubberEl=a.wrapperEl.querySelector(".bp-media-time-scrubber-container"),a.volScrubberEl=a.wrapperEl.querySelector(".bp-media-volume-scrubber-container"),a.volScrubberWrapperEl=a.wrapperEl.querySelector(".bp-media-volume-scrubber-container-wrapper"),a.playButtonEl=a.wrapperEl.querySelector(".bp-media-playpause-icon"),a.setLabel(a.playButtonEl,"Play"),a.volButtonEl=a.wrapperEl.querySelector(".bp-media-volume-icon"),a.setLabel(a.volButtonEl,"Mute"),a.timecodeEl=a.wrapperEl.querySelector(".bp-media-controls-timecode"),a.durationEl=a.wrapperEl.querySelector(".bp-media-controls-duration"),a.fullscreenButtonEl=a.wrapperEl.querySelector(".bp-media-fullscreen-icon"),a.setLabel(a.fullscreenButtonEl,"Enter fullscreen"),a.settingsButtonEl=a.wrapperEl.querySelector(".bp-media-gear-icon"),a.setLabel(a.settingsButtonEl,"Settings"),a.subtitlesButtonEl=a.wrapperEl.querySelector(".bp-media-cc-icon"),a.setLabel(a.subtitlesButtonEl,"Subtitles/Closed Captions"),a.mouseenterHandler=a.mouseenterHandler.bind(a),a.mouseleaveHandler=a.mouseleaveHandler.bind(a),a.scrubberExpand=a.scrubberExpand.bind(a),a.scrubberHide=a.scrubberHide.bind(a),a.scrubberMouseDownHandler=a.scrubberMouseDownHandler.bind(a),a.scrubberMouseUpHandler=a.scrubberMouseUpHandler.bind(a),a.togglePlay=a.togglePlay.bind(a),a.toggleMute=a.toggleMute.bind(a),a.toggleFullscreen=a.toggleFullscreen.bind(a),a.toggleFullscreenIcon=a.toggleFullscreenIcon.bind(a),a.toggleSettings=a.toggleSettings.bind(a),a.toggleSubtitles=a.toggleSubtitles.bind(a),a.setFilmstrip=a.setFilmstrip.bind(a),a.filmstripShowHandler=a.filmstripShowHandler.bind(a),a.filmstripHideHandler=a.filmstripHideHandler.bind(a),a.timeScrubbingStopHandler=a.timeScrubbingStopHandler.bind(a),a.handleRate=a.handleRate.bind(a),a.handleQuality=a.handleQuality.bind(a),a.handleAutoplay=a.handleAutoplay.bind(a),a.handleSubtitle=a.handleSubtitle.bind(a),a.handleAudioTrack=a.handleAudioTrack.bind(a),a.setDuration(a.mediaEl.duration),a.setupSettings(),a.setupScrubbers(),a.attachEventHandlers(),a}return o(t,e),f(t,[{key:"destroy",value:function(){this.removeAllListeners(),document.removeEventListener("mouseup",this.timeScrubbingStopHandler),document.removeEventListener("mousemove",this.filmstripShowHandler),this.volButtonEl&&this.volScrubberWrapperEl&&this.removeVolumeScrubberWrapperExpansionHandlers(),this.timeScrubber&&(this.timeScrubber.getHandleEl().removeEventListener("mousedown",this.timeScrubbingStartHandler),this.timeScrubber.getConvertedEl().removeEventListener("mousemove",this.filmstripShowHandler),this.timeScrubber.getConvertedEl().removeEventListener("mouseleave",this.filmstripHideHandler),this.timeScrubber.destroy(),this.timeScrubber=void 0),this.volScrubber&&(this.volScrubber.destroy(),this.volScrubber=void 0),this.settings&&(this.settings.removeListener("quality",this.handleQuality),this.settings.removeListener("speed",this.handleRate),this.settings.removeListener("subtitles",this.handleSubtitle),this.settings.removeListener("autoplay",this.handleAutoplay),this.settings.destroy(),this.settings=void 0),this.playButtonEl&&Object(p.v)(this.playButtonEl,this.togglePlayHandler),this.volButtonEl&&Object(p.v)(this.volButtonEl,this.toggleMuteHandler),this.fullscreenButtonEl&&Object(p.v)(this.fullscreenButtonEl,this.toggleFullscreenHandler),this.settingsButtonEl&&Object(p.v)(this.settingsButtonEl,this.toggleSettingsHandler),this.subtitlesButtonEl&&Object(p.v)(this.subtitlesButtonEl,this.toggleSubtitlesHandler),this.wrapperEl&&(this.wrapperEl.removeEventListener("mouseenter",this.mouseenterHandler),this.wrapperEl.removeEventListener("mouseleave",this.mouseleaveHandler)),d.a&&(d.a.removeListener("exit",this.toggleFullscreenIcon),d.a.removeListener("enter",this.toggleFullscreenIcon)),this.wrapperEl=void 0,this.timeScrubberEl=void 0,this.volScrubberEl=void 0,this.playButtonEl=void 0,this.volButtonEl=void 0,this.timecodeEl=void 0,this.durationEl=void 0,this.fullscreenButtonEl=void 0,this.settingsButtonEl=void 0,this.filmstripContainerEl=void 0,this.filmstripEl=void 0,this.filmstripTimeEl=void 0}},{key:"handleRate",value:function(){this.emit("ratechange")}},{key:"handleQuality",value:function(){this.emit("qualitychange")}},{key:"handleSubtitle",value:function(){this.emit("subtitlechange")}},{key:"handleAudioTrack",value:function(){this.emit("audiochange")}},{key:"handleAutoplay",value:function(){this.emit("autoplaychange")}},{key:"setupSettings",value:function(){this.settings=new h.a(this.containerEl,this.cache),this.settings.addListener("quality",this.handleQuality),this.settings.addListener("speed",this.handleRate),this.settings.addListener("autoplay",this.handleAutoplay)}},{key:"getTimeFromScrubber",value:function(){return this.timeScrubber.getValue()*this.mediaEl.duration}},{key:"setupScrubbers",value:function(){var e=this;this.timeScrubber=new c.a(this.timeScrubberEl,"Media Slider",0,Math.floor(this.mediaEl.duration),0,0,1),this.setTimeCode(0),this.timeScrubber.on("valuechange",function(){e.emit("timeupdate",e.getTimeFromScrubber())}),this.volScrubber=new c.a(this.volScrubberEl,"Volume Slider",0,100,1,1,1),this.volScrubber.setAriaValues(100,"100% Volume"),this.volScrubber.on("valuechange",function(){e.emit("volumeupdate",e.volScrubber.getValue())})}},{key:"formatTime",value:function(e){var t=Math.floor(e/3600),n=Math.floor(e%3600/60),i=Math.floor(e%3600%60),r=t>0?t.toString()+":":"",o=i<10?"0"+i.toString():i.toString(),a=n.toString();return t>0&&n<10&&(a="0"+a),""+r+a+":"+o}},{key:"setDuration",value:function(e){this.durationEl.textContent=this.formatTime(e||0)}},{key:"setTimeCode",value:function(e){var t=this.mediaEl.duration;this.timeScrubber.setValue(t?(e||0)/t:0),this.timecodeEl.textContent=this.formatTime(e||0),this.timeScrubber.setAriaValues(Math.floor(e),this.timecodeEl.textContent+" of "+this.durationEl.textContent)}},{key:"updateProgress",value:function(){var e=this.mediaEl.buffered,t=this.mediaEl.duration||1,n=e.length,i=n?e.end(n-1):0;this.timeScrubber.setBufferedValue(i/t)}},{key:"toggleMute",value:function(){this.show(),this.emit("togglemute")}},{key:"togglePlay",value:function(){this.show(),this.emit("toggleplayback")}},{key:"toggleFullscreen",value:function(){this.show(),this.emit("togglefullscreen")}},{key:"toggleFullscreenIcon",value:function(){d.a.isFullscreen(this.containerEl)?(this.setLabel(this.fullscreenButtonEl,"Exit fullscreen"),this.containerEl.classList.add("bp-is-fullscreen")):(this.setLabel(this.fullscreenButtonEl,"Enter fullscreen"),this.containerEl.classList.remove("bp-is-fullscreen"))}},{key:"toggleSettings",value:function(){this.show(),this.isSettingsVisible()?this.settings.hide():this.settings.show()}},{key:"toggleSubtitles",value:function(){this.show(),this.settings.toggleSubtitles(),this.emit("togglesubtitles")}},{key:"setLabel",value:function(e,t){e.setAttribute("aria-label",t),e.setAttribute("title",t)}},{key:"isSettingsVisible",value:function(){return!!this.settings&&this.settings.isVisible()}},{key:"showPauseIcon",value:function(){this.wrapperEl.classList.add("bp-media-is-playing"),this.setLabel(this.playButtonEl,"Pause")}},{key:"showPlayIcon",value:function(){this.wrapperEl.classList.remove("bp-media-is-playing"),this.setLabel(this.playButtonEl,"Play")}},{key:"updateVolumeIcon",value:function(e){var t=this;v.forEach(function(e){t.volButtonEl.classList.remove(e)}),this.volButtonEl.classList.add(v[Math.ceil(3*e)]),this.volScrubber.setValue(e);var n=Math.floor(100*e);this.volScrubber.setAriaValues(n,n+"% Volume");var i=0===Math.ceil(3*e)?"Unmute":"Mute";this.setLabel(this.volButtonEl,i)}},{key:"increaseSpeed",value:function(){this.settings.increaseSpeed()}},{key:"decreaseSpeed",value:function(){this.settings.decreaseSpeed()}},{key:"scrubberMouseUpHandler",value:function(){this.volScrubbing=!1,this.volScrubberWrapperEl.classList.remove("bp-media-controls-volume-scrubber-expand"),document.removeEventListener("mouseup",this.scrubberMouseUpHandler),document.removeEventListener("mouseleave",this.scrubberMouseUpHandler)}},{key:"scrubberMouseDownHandler",value:function(){this.volScrubbing=!0,document.addEventListener("mouseup",this.scrubberMouseUpHandler),document.addEventListener("mouseleave",this.scrubberMouseUpHandler)}},{key:"scrubberExpand",value:function(){this.volScrubberWrapperEl.classList.add("bp-media-controls-volume-scrubber-expand")}},{key:"scrubberHide",value:function(){this.volScrubbing||this.volScrubberWrapperEl.classList.remove("bp-media-controls-volume-scrubber-expand")}},{key:"attachVolumeScrubberWrapperExpansionHandlers",value:function(){this.volScrubbing=!1,this.volButtonEl.addEventListener("mouseenter",this.scrubberExpand),this.volButtonEl.addEventListener("mouseleave",this.scrubberHide),this.volScrubberEl.addEventListener("mouseenter",this.scrubberExpand),this.volScrubberEl.addEventListener("mouseleave",this.scrubberHide),this.volScrubberEl.addEventListener("mousedown",this.scrubberMouseDownHandler),this.volScrubberEl.addEventListener("mouseup",this.scrubberMouseUpHandler),this.volScrubberEl.addEventListener("focus",this.scrubberExpand),this.volScrubberEl.addEventListener("blur",this.scrubberHide)}},{key:"removeVolumeScrubberWrapperExpansionHandlers",value:function(){this.volButtonEl.removeEventListener("mouseenter",this.scrubberExpand),this.volButtonEl.removeEventListener("mouseleave",this.scrubberHide),this.volScrubberEl.removeEventListener("mouseenter",this.scrubberExpand),this.volScrubberEl.removeEventListener("mouseleave",this.scrubberHide),this.volScrubberEl.removeEventListener("mousedown",this.scrubberMouseDownHandler),this.volScrubberEl.removeEventListener("mouseup",this.scrubberMouseUpHandler),this.volScrubberEl.removeEventListener("focus",this.scrubberExpand),this.volScrubberEl.removeEventListener("blur",this.scrubberHide)}},{key:"attachEventHandlers",value:function(){this.wrapperEl.addEventListener("mouseenter",this.mouseenterHandler),this.wrapperEl.addEventListener("mouseleave",this.mouseleaveHandler),this.attachVolumeScrubberWrapperExpansionHandlers(),this.togglePlayHandler=Object(p.a)(this.togglePlay),this.toggleMuteHandler=Object(p.a)(this.toggleMute),this.toggleFullscreenHandler=Object(p.a)(this.toggleFullscreen),this.toggleSettingsHandler=Object(p.a)(this.toggleSettings),this.toggleSubtitlesHandler=Object(p.a)(this.toggleSubtitles),Object(p.b)(this.playButtonEl,this.togglePlayHandler),Object(p.b)(this.volButtonEl,this.toggleMuteHandler),Object(p.b)(this.fullscreenButtonEl,this.toggleFullscreenHandler),Object(p.b)(this.settingsButtonEl,this.toggleSettingsHandler),Object(p.b)(this.subtitlesButtonEl,this.toggleSubtitlesHandler),d.a.addListener("exit",this.toggleFullscreenIcon),d.a.addListener("enter",this.toggleFullscreenIcon)}},{key:"mouseenterHandler",value:function(){this.preventHiding=!0,this.show()}},{key:"mouseleaveHandler",value:function(){this.preventHiding=!1,this.show()}},{key:"show",value:function(){var e=this;this.wrapperEl&&this.wrapperEl.parentNode&&(this.wrapperEl.parentNode.classList.add("bp-media-controls-is-visible"),clearTimeout(this.autoHideTimeout),this.autoHideTimeout=setTimeout(function(){e.hide()},2e3))}},{key:"hide",value:function(){if(this.preventHiding||this.isSettingsVisible())return void this.show();this.wrapperEl&&this.wrapperEl.parentNode&&(this.wrapperEl.parentNode.classList.remove("bp-media-controls-is-visible"),this.filmstripHideHandler())}},{key:"toggle",value:function(){this.isVisible()?(this.preventHiding=!1,this.settings.hide(),this.hide()):this.show()}},{key:"isVisible",value:function(){return this.wrapperEl.parentNode.classList.contains("bp-media-controls-is-visible")}},{key:"resizeTimeScrubber",value:function(){this.timeScrubber&&this.timeScrubber.resize(32)}},{key:"setFilmstrip",value:function(){this.filmstripEl&&(this.filmstripEl.src=this.filmstripUrl)}},{key:"initFilmstrip",value:function(e,t,n,i){var r=this;this.filmstripUrl=e,this.filmstripInterval=i,this.filmstripContainerEl=this.containerEl.appendChild(document.createElement("div")),this.filmstripContainerEl.className="bp-media-filmstrip-container",this.filmstripContainerEl.innerHTML='<div class="bp-media-crawler-wrapper"><div class="bp-crawler"><div></div><div></div><div></div></div></div>',this.filmstripEl=this.filmstripContainerEl.appendChild(document.createElement("img")),this.filmstripEl.className="bp-media-filmstrip",this.filmstripTimeEl=this.filmstripContainerEl.appendChild(document.createElement("div")),this.filmstripTimeEl.className="bp-media-filmstrip-timecode";var o=90*n;this.timeScrubber.getHandleEl().addEventListener("mousedown",this.timeScrubbingStartHandler),this.hasTouch&&this.timeScrubberEl.addEventListener("touchstart",this.timeScrubbingStartHandler),this.timeScrubber.getConvertedEl().addEventListener("mousemove",this.filmstripShowHandler),this.timeScrubber.getConvertedEl().addEventListener("mouseleave",this.filmstripHideHandler),this.filmstripEl.onload=function(){r.filmstripContainerEl&&(r.filmstripContainerEl.style.width=o+2+"px",r.filmstripContainerEl.querySelector(".bp-media-crawler-wrapper").style.display="none")},t.getPromise().then(this.setFilmstrip)}},{key:"timeScrubbingStartHandler",value:function(){this.isScrubbing=!0,this.preventHiding=!0,document.addEventListener("mouseup",this.timeScrubbingStopHandler),this.hasTouch&&document.addEventListener("touchend",this.timeScrubbingStopHandler),document.addEventListener("mousemove",this.filmstripShowHandler),this.hasTouch&&document.addEventListener("touchmove",this.show)}},{key:"timeScrubbingStopHandler",value:function(e){this.isScrubbing=!1,this.preventHiding=!1,document.removeEventListener("mouseup",this.timeScrubbingStopHandler),document.removeEventListener("mousemove",this.filmstripShowHandler),document.removeEventListener("touchend",this.timeScrubbingStopHandler),document.removeEventListener("touchmove",this.show),this.timeScrubberEl.contains(e.target)||(this.filmstripContainerEl.style.display="none")}},{key:"computeFilmstripPositions",value:function(e,t,n,i){var r=this.timeScrubber.computeScrubberPosition(e)*this.mediaEl.duration,o=Math.floor(r/this.filmstripInterval),a=i/100,s=o%100*-1*a,l=-90*Math.floor(o/100);i||(s=0,l=0,a=160);var u=Math.max(0,e-t-a/2);return{time:r,left:s,top:l,containerLeft:Math.min(u,n-a)}}},{key:"filmstripShowHandler",value:function(e){if(!this.isSettingsVisible()){var t=this.containerEl.getBoundingClientRect(),n=e.pageX,i=this.computeFilmstripPositions(n,t.left,t.width,this.filmstripEl.naturalWidth);this.filmstripEl.style.left=i.left+"px",this.filmstripEl.style.top=i.top+"px",this.filmstripContainerEl.style.display="block",this.filmstripContainerEl.style.left=i.containerLeft+"px",this.filmstripTimeEl.textContent=this.formatTime(i.time)}}},{key:"filmstripHideHandler",value:function(){!this.isScrubbing&&this.filmstripEl&&(this.filmstripContainerEl.style.display="none")}},{key:"isTimeScrubberFocused",value:function(){return document.activeElement===this.timeScrubberEl}},{key:"isVolumeScrubberFocused",value:function(){return document.activeElement===this.volScrubberEl}},{key:"initSubtitles",value:function(e,t){this.settings.addListener("subtitles",this.handleSubtitle),this.settings.loadSubtitles(e,t)}},{key:"initAlternateAudio",value:function(e){this.settings.addListener("audiotracks",this.handleAudioTrack),this.settings.loadAlternateAudio(e)}},{key:"enableHDSettings",value:function(){this.settings.enableHD()}}]),t}(s.a);t.a=b},function(e,t){e.exports='<div class="bp-media-controls-wrapper">\n    <div class="bp-media-time-scrubber-container" tabindex="0"></div>\n    <div class="bp-media-controls-container">\n        <button class="bp-media-controls-btn bp-media-playpause-icon">\n            <svg class="bp-media-play-icon" fill="#fff" height="24" viewBox="0 0 24 24" width="24" focusable="false">\n                <path d="M8 5v14l11-7z"/>\n                <path d="M0 0h24v24H0z" fill="none"/>\n            </svg>\n            <svg class="bp-media-pause-icon" fill="#fff" height="24" viewBox="0 0 24 24" width="24" focusable="false">\n                <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>\n                <path d="M0 0h24v24H0z" fill="none"/>\n            </svg>\n        </button>\n        <button class="bp-media-controls-btn bp-media-volume-icon bp-media-volume-icon-is-high">\n            <svg viewBox="-3 5 24 24" width="24" height="24" focusable="false">\n                <path fill="#FFF" d="M0 14v6h4l5 5V9l-5 5H0z" />\n                <path fill="none" d="M-3 5h24v24H-3V5z" />\n            </svg>\n            <svg class="bp-media-volume-icon-mute" viewBox="-3 5 24 24" width="24" height="24" focusable="false">\n                <path fill="none" d="M-3 5h24v24H-3V5z" />\n                <path fill="#fff" d="M15.5 20.2l-2-2-2 2-1.2-1.2 2-2-2-2 1.2-1.2 2 2 2-2 1.2 1.2-2 2 2 2" />\n            </svg>\n            <svg class="bp-media-volume-icon-medium" viewBox="-3 5 24 24" width="24" height="24" focusable="false">\n                <path fill="#FFF" d="M13.5 17c0-1.8-1-3.3-2.5-4v8c1.5-.7 2.5-2.2 2.5-4z" />\n                <path fill="none" d="M-3 5h24v24H-3V5z" />\n            </svg>\n            <svg class="bp-media-volume-icon-high" viewBox="-3 5 24 24" width="24" height="24" focusable="false">\n                <path fill="#FFF" d="M13.5 17c0-1.8-1-3.3-2.5-4v8c1.5-.7 2.5-2.2 2.5-4zM11 8.2v2.1c2.9.9 5 3.5 5 6.7s-2.1 5.9-5 6.7v2.1c4-.9 7-4.5 7-8.8s-3-7.9-7-8.8z" />\n                <path fill="none" d="M-3 5h24v24H-3V5z" />\n            </svg>\n        </button>\n        <div class="bp-media-volume-scrubber-container-wrapper">\n            <div class="bp-media-volume-scrubber-container" tabindex="0"></div>\n        </div>\n        <label class="bp-media-controls-label bp-media-controls-timecode">00:00</label>\n        <span class="bp-media-controls-label">&nbsp;&#47;&nbsp;</span>\n        <label class="bp-media-controls-label bp-media-controls-duration">00:00</label>\n        <button class="bp-media-controls-btn bp-media-cc-icon" aria-pressed="false">\n            <div class="bp-media-controls-cc-icon-text">CC</div>\n        </button>\n        <button class="bp-media-controls-btn bp-media-gear-icon" aria-haspopup="true">\n            <svg width="24" height="24" viewBox="0 0 24 24" focusable="false">\n                <path fill="#fff" d="M19.4 13c0-.3.1-.6.1-1s0-.7-.1-1l2.1-1.6c.2-.1.2-.4.1-.6l-2-3.5c-.1-.2-.4-.3-.6-.2l-2.5 1c-.5-.4-1.1-.7-1.7-1l-.4-2.7c.1-.2-.2-.4-.4-.4h-4c-.2 0-.5.2-.5.4l-.4 2.7c-.6.2-1.1.6-1.7 1l-2.5-1c-.2-.1-.4 0-.6.2l-2 3.5c-.1.1 0 .4.2.6L4.6 11c0 .3-.1.6-.1 1s0 .7.1 1l-2.1 1.6c-.2.1-.2.4-.1.6l2 3.5c.1.2.3.3.6.2l2.5-1c.5.4 1.1.7 1.7 1l.4 2.6c0 .2.2.4.5.4h4c.2 0 .5-.2.5-.4l.4-2.6c.6-.2 1.2-.6 1.7-1l2.5 1c.2.1.5 0 .6-.2l2-3.5c.1-.2.1-.5-.1-.6L19.4 13zM12 15.5c-1.9 0-3.5-1.6-3.5-3.5s1.6-3.5 3.5-3.5 3.5 1.6 3.5 3.5-1.6 3.5-3.5 3.5z"/>\n            </svg>\n            <span class="bp-media-controls-hd">HD</span>\n        </button>\n        <button class="bp-media-controls-btn bp-media-fullscreen-icon">\n            <svg class="bp-enter-fullscreen-icon" width="24" height="24" viewBox="0 0 24 24" focusable="false">\n                <g fill="none" fill-rule="evenodd">\n                    <path d="M15 3l2.3 2.3-2.89 2.87 1.42 1.42L18.7 6.7 21 9V3h-6zM3 3v6l2.3-2.3 2.87 2.89 1.42-1.42L6.7 5.3 9 3H3zm11.41 12.83l2.89 2.87L15 21h6v-6l-2.3 2.3-2.87-2.89-1.42 1.42zM5.3 17.3L3 15v6h6l-2.3-2.3 2.89-2.87-1.42-1.42L5.3 17.3z" fill="#fff" />\n                    <path d="M0 0h24v24H0z" />\n                </g>\n            </svg>\n            <svg class="bp-exit-fullscreen-icon" width="24" height="24" viewBox="0 0 24 24" focusable="false">\n                <g fill="none" fill-rule="evenodd">\n                    <path d="M0 0h24v24H0z" />\n                    <path d="M19.58 3l-2.87 2.89-2.3-2.3v6h6l-2.3-2.3L21 4.42 19.58 3zM4.42 3L3 4.42l2.89 2.87-2.3 2.3h6v-6l-2.3 2.3L4.42 3zm9.99 11.41v6l2.3-2.3L19.58 21 21 19.58l-2.89-2.87 2.3-2.3h-6zm-10.82 0l2.3 2.3L3 19.58 4.42 21l2.87-2.89 2.3 2.3v-6h-6z" fill="#fff" />\n                </g>\n            </svg>\n        </button>\n    </div>\n</div>\n'},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(6),s=n.n(a),l=n(171),u=n.n(l),c=n(5),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=0,p=1,f="bp-media-scrubber-touch",v=function(e){function t(e,n,o,a){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:d,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:p,h=arguments.length>6&&void 0!==arguments[6]?arguments[6]:p;i(this,t);var v=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return v.containerEl=e,v.containerEl.setAttribute("role","slider"),v.containerEl.setAttribute("aria-label",n),v.containerEl.setAttribute("title",n),v.containerEl.setAttribute("aria-valuemin",o),v.containerEl.setAttribute("aria-valuemax",a),v.containerEl.setAttribute("aria-valuenow",s),v.containerEl.innerHTML=u.a.replace(/>\s*</g,"><"),v.scrubberContainerEl=v.containerEl.querySelector(".bp-media-scrubber-container"),v.scrubberWrapperEl=v.containerEl.querySelector(".bp-media-scrubber-wrapper"),v.scrubberEl=v.containerEl.querySelector(".bp-media-scrubber"),v.bufferedEl=v.scrubberEl.querySelector(".bp-media-scrubber-buffered"),v.convertedEl=v.scrubberEl.querySelector(".bp-media-scrubber-converted"),v.playedEl=v.scrubberEl.querySelector(".bp-media-scrubber-played"),v.handleEl=v.scrubberEl.querySelector(".bp-media-scrubber-handle"),v.hasTouch=c.a.hasTouch(),v.setConvertedValue(h),v.setBufferedValue(l),v.setValue(s),v.pointerUpHandler=v.pointerUpHandler.bind(v),v.scrubbingHandler=v.scrubbingHandler.bind(v),v.pointerDownHandler=v.pointerDownHandler.bind(v),v.playedEl.addEventListener("mousedown",v.pointerDownHandler),v.convertedEl.addEventListener("mousedown",v.pointerDownHandler),v.handleEl.addEventListener("mousedown",v.pointerDownHandler),v.hasTouch&&(v.scrubberContainerEl.addEventListener("touchstart",v.pointerDownHandler),v.scrubberWrapperEl.classList.add(f)),v}return o(t,e),h(t,[{key:"destroy",value:function(){this.removeAllListeners(),this.destroyDocumentHandlers(),this.playedEl.removeEventListener("mousedown",this.pointerDownHandler),this.convertedEl.removeEventListener("mousedown",this.pointerDownHandler),this.handleEl.removeEventListener("mousedown",this.pointerDownHandler),this.scrubberContainerEl.removeEventListener("touchstart",this.pointerDownHandler),this.scrubberContainerEl=void 0,this.scrubberWrapperEl=void 0,this.scrubberEl=void 0,this.bufferedEl=void 0,this.convertedEl=void 0,this.playedEl=void 0,this.handleEl=void 0,this.containerEl.innerHTML=""}},{key:"resize",value:function(e){this.scrubberWrapperEl.style.width=this.containerEl.clientWidth-e+"px"}},{key:"setAriaValues",value:function(e,t){this.containerEl.setAttribute("aria-valuenow",e),this.containerEl.setAttribute("aria-valuetext",t)}},{key:"setValue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d;e!==this.value&&(this.value=Math.max(Math.min(e,this.convertedValue),d),this.playedEl.style.width=100*this.value+"%",this.handleEl.style.left=100*this.value+"%")}},{key:"setBufferedValue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p;e!==this.bufferedValue&&(this.bufferedValue=Math.max(Math.min(e,this.convertedValue),this.value||d),this.bufferedEl.style.width=100*this.bufferedValue+"%")}},{key:"setConvertedValue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p;e!==this.convertedValue&&(this.convertedValue=Math.max(Math.min(Math.max(e,this.convertedValue||d),p),d),this.convertedEl.style.width=100*this.convertedValue+"%")}},{key:"computeScrubberPosition",value:function(e){var t=this.scrubberEl.getBoundingClientRect(),n=(e-t.left)/t.width;return Math.max(Math.min(n,p),d)}},{key:"scrubbingHandler",value:function(e){e.preventDefault();var t=e.pageX;e.touches&&(t=e.touches[0].pageX);var n=this.computeScrubberPosition(t);this.setValue(n),this.emit("valuechange")}},{key:"pointerDownHandler",value:function(e){!("number"!=typeof e.button||e.button<2)||e.ctrlKey||e.metaKey||(this.scrubbingHandler(e),document.addEventListener("mouseup",this.pointerUpHandler),document.addEventListener("mouseleave",this.pointerUpHandler),document.addEventListener("mousemove",this.scrubbingHandler),this.hasTouch?(document.addEventListener("touchmove",this.scrubbingHandler),document.addEventListener("touchend",this.pointerUpHandler)):this.scrubberWrapperEl.classList.add("bp-media-scrubber-hover"),e.preventDefault())}},{key:"pointerUpHandler",value:function(){this.scrubberWrapperEl.classList.remove("bp-media-scrubber-hover"),this.destroyDocumentHandlers()}},{key:"destroyDocumentHandlers",value:function(){document.removeEventListener("mousemove",this.scrubbingHandler),document.removeEventListener("mouseup",this.pointerUpHandler),document.removeEventListener("mouseleave",this.pointerUpHandler),this.hasTouch&&(document.removeEventListener("touchmove",this.scrubbingHandler),document.removeEventListener("touchend",this.pointerUpHandler))}},{key:"getValue",value:function(){return this.value}},{key:"getHandleEl",value:function(){return this.handleEl}},{key:"getConvertedEl",value:function(){return this.convertedEl}}]),t}(s.a);t.a=v},function(e,t){e.exports='<div class="bp-media-scrubber-container">\n    <div class="bp-media-scrubber-wrapper">\n        <div class="bp-media-scrubber">\n            <div class="bp-media-scrubber-underlay"></div>\n            <div class="bp-media-scrubber-buffered"></div>\n            <div class="bp-media-scrubber-converted"></div>\n            <div class="bp-media-scrubber-played"></div>\n            <div class="bp-media-scrubber-handle"></div>\n        </div>\n    </div>\n</div>\n'},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(6),s=n.n(a),l=n(2),u=n(4),c=n(1),h=n(5),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),p="bp-media-settings-subtitles-unavailable",f="bp-media-settings-audiotracks-unavailable",v="bp-media-settings-hd-unavailable",b="bp-media-settings-autoplay-unavailable",m=["0.5","1.0","1.25","1.5","2.0"],y='<div class="bp-media-settings">\n    <div class="bp-media-settings-menu-main bp-media-settings-menu" role="menu">\n        <div class="bp-media-settings-item bp-media-settings-item-autoplay" data-type="autoplay" tabindex="0" role="menuitem" aria-haspopup="true">\n            <div class="bp-media-settings-label" aria-label="Autoplay">Autoplay</div>\n            <div class="bp-media-settings-value">Disabled</div>\n            <div class="bp-media-settings-arrow">'+u.e+'</div>\n        </div>\n        <div class="bp-media-settings-item bp-media-settings-item-speed" data-type="speed" tabindex="0" role="menuitem" aria-haspopup="true">\n            <div class="bp-media-settings-label" aria-label="Speed">Speed</div>\n            <div class="bp-media-settings-value">Normal</div>\n            <div class="bp-media-settings-arrow">'+u.e+'</div>\n        </div>\n        <div class="bp-media-settings-item bp-media-settings-item-quality" data-type="quality" tabindex="0" role="menuitem" aria-haspopup="true">\n            <div class="bp-media-settings-label" aria-label="Quality">Quality</div>\n            <div class="bp-media-settings-value">Auto</div>\n            <div class="bp-media-settings-arrow">'+u.e+'</div>\n        </div>\n        <div class="bp-media-settings-item bp-media-settings-item-subtitles bp-media-settings-is-hidden" data-type="subtitles" tabindex="0" role="menuitem" aria-haspopup="true">\n            <div class="bp-media-settings-label" aria-label="Subtitles/CC">Subtitles/CC</div>\n            <div class="bp-media-settings-value">Off</div>\n            <div class="bp-media-settings-arrow">'+u.e+'</div>\n        </div>\n        <div class="bp-media-settings-item bp-media-settings-item-audiotracks bp-media-settings-is-hidden" data-type="audiotracks" tabindex="0" role="menuitem" aria-haspopup="true">\n            <div class="bp-media-settings-label" aria-label="Audio">Audio</div>\n            <div class="bp-media-settings-value"></div>\n            <div class="bp-media-settings-arrow">'+u.e+'</div>\n        </div>\n    </div>\n    <div class="bp-media-settings-menu-autoplay bp-media-settings-menu" role="menu">\n        <div class="bp-media-settings-sub-item bp-media-settings-sub-item-autoplay" data-type="menu" tabindex="0" role="menuitem" aria-haspopup="true">\n            <div class="bp-media-settings-arrow">'+u.d+'</div>\n            <div class="bp-media-settings-label" aria-label="Autoplay">Autoplay</div>\n        </div>\n        <div class="bp-media-settings-sub-item" data-type="autoplay" data-value="Disabled" tabindex="0" role="menuitemradio">\n            <div class="bp-media-settings-icon">'+u.f+'</div>\n            <div class="bp-media-settings-value">Disabled</div>\n        </div>\n        <div class="bp-media-settings-sub-item" data-type="autoplay" data-value="Enabled" tabindex="0" role="menuitemradio">\n            <div class="bp-media-settings-icon">'+u.f+'</div>\n            <div class="bp-media-settings-value">Enabled</div>\n        </div>\n    </div>\n    <div class="bp-media-settings-menu-speed bp-media-settings-menu" role="menu">\n        <div class="bp-media-settings-sub-item bp-media-settings-sub-item-speed" data-type="menu" tabindex="0" role="menuitem" aria-haspopup="true">\n            <div class="bp-media-settings-arrow">'+u.d+'</div>\n            <div class="bp-media-settings-label" aria-label="Speed">Speed</div>\n        </div>\n        <div class="bp-media-settings-sub-item" data-type="speed" data-value="0.5" tabindex="0" role="menuitemradio">\n            <div class="bp-media-settings-icon">'+u.f+'</div>\n            <div class="bp-media-settings-value">0.5</div>\n        </div>\n        <div class="bp-media-settings-sub-item bp-media-settings-selected" data-type="speed" data-value="1.0" tabindex="0" role="menuitemradio" aria-checked="true">\n            <div class="bp-media-settings-icon">'+u.f+'</div>\n            <div class="bp-media-settings-value">Normal</div>\n        </div>\n        <div class="bp-media-settings-sub-item" data-type="speed" data-value="1.25" tabindex="0" role="menuitemradio">\n            <div class="bp-media-settings-icon">'+u.f+'</div>\n            <div class="bp-media-settings-value">1.25</div>\n        </div>\n        <div class="bp-media-settings-sub-item" data-type="speed" data-value="1.5" tabindex="0" role="menuitemradio">\n            <div class="bp-media-settings-icon">'+u.f+'</div>\n            <div class="bp-media-settings-value">1.5</div>\n        </div>\n        <div class="bp-media-settings-sub-item" data-type="speed" data-value="2.0" tabindex="0" role="menuitemradio">\n            <div class="bp-media-settings-icon">'+u.f+'</div>\n            <div class="bp-media-settings-value">2.0</div>\n        </div>\n    </div>\n    <div class="bp-media-settings-menu-quality bp-media-settings-menu bp-media-settings-is-hidden" data-disabled="true" role="menu">\n        <div class="bp-media-settings-sub-item bp-media-settings-sub-item-quality" data-type="menu" tabindex="0" role="menuitem" aria-haspopup="true">\n            <div class="bp-media-settings-arrow">'+u.d+'</div>\n            <div class="bp-media-settings-label" aria-label="Quality">Quality</div>\n        </div>\n        <div class="bp-media-settings-sub-item" data-type="quality" data-value=sd tabindex="0" role="menuitemradio">\n            <div class="bp-media-settings-icon">'+u.f+'</div>\n            <div class="bp-media-settings-value">480p</div>\n        </div>\n        <div class="bp-media-settings-sub-item" data-type="quality" data-value=hd tabindex="0" role="menuitemradio">\n            <div class="bp-media-settings-icon">'+u.f+'</div>\n            <div class="bp-media-settings-value">1080p</div>\n        </div>\n        <div class="bp-media-settings-sub-item bp-media-settings-selected" data-type="quality" data-value=auto tabindex="0" role="menuitemradio" aria-checked="true">\n            <div class="bp-media-settings-icon">'+u.f+'</div>\n            <div class="bp-media-settings-value">Auto</div>\n        </div>\n    </div>\n    <div class="bp-media-settings-menu-subtitles bp-media-settings-menu bp-media-settings-is-hidden" role="menu">\n        <div class="bp-media-settings-sub-item bp-media-settings-sub-item-subtitles" data-type="menu" tabindex="0" role="menuitem" aria-haspopup="true">\n            <div class="bp-media-settings-arrow">'+u.d+'</div>\n            <div class="bp-media-settings-label" aria-label="Subtitles/CC">Subtitles/CC</div>\n        </div>\n        <div class="bp-media-settings-sub-item bp-media-settings-selected" data-type="subtitles" data-value="-1" tabindex="0" role="menuitemradio" aria-checked="true">\n            <div class="bp-media-settings-icon">'+u.f+'</div>\n            <div class="bp-media-settings-value">Off</div>\n        </div>\n    </div>\n    <div class="bp-media-settings-menu-audiotracks bp-media-settings-menu bp-media-settings-is-hidden" role="menu">\n        <div class="bp-media-settings-sub-item bp-media-settings-sub-item-audiotracks" data-type="menu" tabindex="0" role="menuitem" aria-haspopup="true">\n            <div class="bp-media-settings-arrow">'+u.d+'</div>\n            <div class="bp-media-settings-label" aria-label="Audio">Audio</div>\n        </div>\n    </div>\n</div>',g='<div class="bp-media-settings-sub-item" data-type="{{dataType}}" data-value="{{dataValue}}" tabindex="0" role="menuitemradio">\n    <div class="bp-media-settings-icon">'+u.f+'</div>\n    <div class="bp-media-settings-value"></div>\n</div>',E=function(e){function t(e,n){i(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return o.visible=!1,o.subtitles=[],o.language=void 0,o.toggleToSubtitle=void 0,o.containerEl=e,o.cache=n,o.handleTransitionEnd=o.handleTransitionEnd.bind(o),o.blurHandler=o.blurHandler.bind(o),o.menuEventHandler=o.menuEventHandler.bind(o),Object(l.m)(o.containerEl,y,e.querySelector(".bp-media-controls-wrapper")),o.settingsEl=o.containerEl.querySelector(".bp-media-settings"),o.firstMenuItem=o.settingsEl.querySelectorAll(".bp-media-settings-item")[0],o.settingsButtonEl=o.containerEl.querySelector(".bp-media-gear-icon"),o.ccButtonEl=o.containerEl.querySelector(".bp-media-cc-icon"),Object(l.b)(o.settingsEl,o.menuEventHandler),o.containerEl.classList.add(p),o.containerEl.classList.add(f),o.containerEl.classList.add(v),o.settingsEl.addEventListener("transitionend",o.handleTransitionEnd),h.a.isMobile()&&o.containerEl.classList.add(b),o.init(),o}return o(t,e),d(t,[{key:"init",value:function(){var e=this.cache.get("media-speed")||"1.0",t=this.cache.get("media-autoplay")||"Disabled";this.chooseOption("quality","sd",!1),this.chooseOption("speed",e),this.chooseOption("autoplay",t)}},{key:"destroy",value:function(){this.settingsEl&&(Object(l.v)(this.settingsEl,this.menuEventHandler),this.settingsEl.removeEventListener("transitionend",this.handleTransitionEnd)),document.removeEventListener("click",this.blurHandler)}},{key:"reset",value:function(){this.settingsEl.className="bp-media-settings";var e=this.settingsEl.querySelector(".bp-media-settings-menu-main");this.setMenuContainerDimensions(e)}},{key:"getMediaSpeeds",value:function(){return m}},{key:"increaseSpeed",value:function(){var e=parseFloat(this.cache.get("media-speed")||"1.0"),t=m.filter(function(t){return parseFloat(t)>e});t.length>0&&this.chooseOption("speed",t[0])}},{key:"decreaseSpeed",value:function(){var e=parseFloat(this.cache.get("media-speed")||"1.0"),t=m.filter(function(t){return parseFloat(t)<e});t.length>0&&this.chooseOption("speed",t[t.length-1])}},{key:"setMenuContainerDimensions",value:function(e){this.settingsEl.style.width=e.offsetWidth+18+"px";var t=[].reduce.call(e.children,function(e,t){return e+t.offsetHeight},0);this.settingsEl.style.height=t+18+"px"}},{key:"findParentDataType",value:function(e){for(var t=e;t&&t!==this.settingsEl;){if("string"==typeof t.getAttribute("data-type"))return t;t=t.parentNode}return null}},{key:"showSubMenu",value:function(e){var t=this.settingsEl.querySelector(".bp-media-settings-menu-"+e);if(!t.getAttribute("data-disabled")){this.settingsEl.classList.add("bp-media-settings-show-"+e),this.setMenuContainerDimensions(t);this.settingsEl.querySelector('[data-type="'+e+'"].bp-media-settings-sub-item.bp-media-settings-selected').focus()}}},{key:"menuItemSelect",value:function(e){var t=e.getAttribute("data-type"),n=e.getAttribute("data-value");this.settingsEl.classList.add("bp-media-settings-in-transition"),"menu"===t?(this.reset(),this.firstMenuItem.focus()):t&&n?this.chooseOption(t,n):t&&this.showSubMenu(t)}},{key:"menuEventHandler",value:function(e){var t=this.findParentDataType(e.target);if(t){if("click"===e.type)this.menuItemSelect(t);else if("keydown"===e.type){var n=Object(l.i)(e).toLowerCase(),i=t.parentElement,r=[].filter.call(i.children,function(e){return null!==e.offsetParent}),o=[].findIndex.call(r,function(e){return e.contains(t)});switch(n){case"space":case"enter":this.containerEl.classList.add(c.x),this.menuItemSelect(t);break;case"arrowup":if(this.containerEl.classList.add(c.x),o>0){var a=r[o-1];a.focus()}break;case"arrowdown":if(this.containerEl.classList.add(c.x),o>=0&&o<r.length-1){var s=r[o+1];s.focus()}break;case"arrowleft":o>=0&&!r[o].classList.contains("bp-media-settings-item")&&(this.reset(),this.firstMenuItem.focus());break;case"arrowright":if(o>=0){var u=r[o],h=u.getAttribute("data-type");u.classList.contains("bp-media-settings-item")&&"menu"!==h&&this.showSubMenu(h)}break;case"escape":this.hide(),this.settingsButtonEl.focus();break;default:return}e.preventDefault(),e.stopPropagation()}"keydown"===e.type&&(e.preventDefault(),e.stopPropagation())}}},{key:"handleTransitionEnd",value:function(){this.settingsEl.classList.remove("bp-media-settings-in-transition")}},{key:"getSelectedOption",value:function(e){return this.settingsEl.querySelector('[data-type="'+e+'"].bp-media-settings-sub-item.bp-media-settings-selected')}},{key:"chooseOption",value:function(e,t){(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])&&this.cache.set("media-"+e,t,!0),this.emit(e);var n=this.settingsEl.querySelector('[data-type="'+e+'"][data-value="'+t+'"]'),i=n.querySelector(".bp-media-settings-value").textContent;this.settingsEl.querySelector('[data-type="'+e+'"] .bp-media-settings-value').textContent=i;var r=this.getSelectedOption(e);r&&(r.classList.remove("bp-media-settings-selected"),r.removeAttribute("aria-checked")),n.classList.add("bp-media-settings-selected"),n.setAttribute("aria-checked","true"),this.reset(),this.firstMenuItem.focus(),"subtitles"===e&&this.handleSubtitleSelection(r.getAttribute("data-value"),t)}},{key:"handleSubtitleSelection",value:function(e,t){"-1"===t?(e!==t&&(this.toggleToSubtitle=e),this.containerEl.classList.remove("bp-media-settings-subtitles-on"),this.ccButtonEl.setAttribute("aria-pressed","false")):(this.containerEl.classList.add("bp-media-settings-subtitles-on"),this.ccButtonEl.setAttribute("aria-pressed","true"))}},{key:"blurHandler",value:function(e){if(!this.settingsEl.contains(e.target)){var t=Object(l.i)(e);if("Escape"===t)return this.hide(),e.preventDefault(),void e.stopPropagation();this.settingsButtonEl.contains(e.target)||"click"!==e.type&&"Space"!==t&&"Enter"!==t||this.hide()}}},{key:"isVisible",value:function(){return this.visible}},{key:"show",value:function(){this.visible=!0,this.containerEl.classList.add("bp-media-settings-is-open"),this.firstMenuItem.focus(),document.addEventListener("click",this.blurHandler,!0),document.addEventListener("keydown",this.blurHandler,!0)}},{key:"hide",value:function(){this.reset(),this.containerEl.classList.remove("bp-media-settings-is-open"),this.visible=!1,document.removeEventListener("click",this.blurHandler,!0),document.removeEventListener("keydown",this.blurHandler,!0)}},{key:"areSubtitlesOn",value:function(){return"-1"!==this.getSelectedOption("subtitles").getAttribute("data-value")}},{key:"hasSubtitles",value:function(){return!!this.settingsEl.querySelector('[data-type="subtitles"][data-value="0"].bp-media-settings-sub-item')}},{key:"toggleSubtitles",value:function(){var e=this;if(this.areSubtitlesOn())this.chooseOption("subtitles","-1");else if(void 0!==this.toggleToSubtitle)this.chooseOption("subtitles",this.toggleToSubtitle.toString());else{var t=this.subtitles.findIndex(function(t){return t===e.language});-1===t&&-1===(t=this.subtitles.findIndex(function(e){return"English"===e}))&&(t=0),this.chooseOption("subtitles",t.toString())}}},{key:"loadSubtitles",value:function(e,t){var n=this.settingsEl.querySelector(".bp-media-settings-menu-subtitles");this.subtitles=e,this.language=t,this.subtitles.forEach(function(e,t){Object(l.m)(n,g.replace(/{{dataType}}/g,"subtitles").replace(/{{dataValue}}/g,t)),n.lastChild.querySelector(".bp-media-settings-value").textContent=e}),this.containerEl.classList.remove(p);var i=this.cache.get("media-subtitles");null!==i&&"-1"!==i&&this.toggleSubtitles(),this.reset()}},{key:"loadAlternateAudio",value:function(e){var t=this.settingsEl.querySelector(".bp-media-settings-menu-audiotracks");e.forEach(function(e,n){Object(l.m)(t,g.replace(/{{dataType}}/g,"audiotracks").replace(/{{dataValue}}/g,n));var i=t.lastChild.querySelector(".bp-media-settings-value"),r="Track "+(n+1);"und"!==e&&(r=r+" ("+e+")"),i.textContent=r}),this.chooseOption("audiotracks","0"),this.containerEl.classList.remove(f),this.reset()}},{key:"enableHD",value:function(){this.containerEl.classList.remove(v),this.containerEl.querySelector(".bp-media-settings-menu-quality").setAttribute("data-disabled","");var e=this.cache.get("media-quality")||"auto";this.chooseOption("quality",e)}}]),t}(s.a);t.a=E},function(e,t){},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(69),s=n(175),l=(n.n(s),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),u=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},c=function(e){function t(){return i(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),l(t,[{key:"setup",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setup",this).call(this),this.wrapperEl.classList.add("bp-media-mp4")}}]),t}(a.a);t.a=c},function(e,t){},function(e,t){},function(e,t,n){"use strict";function i(e){return r[e.toLowerCase()]}t.a=i;var r={af:"Afrikaans",afr:"Afrikaans",alb:"Albanian",sq:"Albanian",sqi:"Albanian",ar:"Arabic",ara:"Arabic",arm:"Armenian",hy:"Armenian",hye:"Armenian",be:"Belarusian",bel:"Belarusian",ben:"Bengali",bn:"Bengali",bos:"Bosnian",bs:"Bosnian",bg:"Bulgarian",bul:"Bulgarian",bur:"Burmese",my:"Burmese",mya:"Burmese",ca:"Catalan",cat:"Catalan",khm:"Central Khmer",km:"Central Khmer",chi:"Chinese",zh:"Chinese",zho:"Chinese",hr:"Croatian",hrv:"Croatian",ces:"Czech",cs:"Czech",cze:"Czech",da:"Danish",dan:"Danish",dut:"Dutch",nl:"Dutch",nld:"Dutch",en:"English",eng:"English",est:"Estonian",et:"Estonian",fil:"Filipino",fi:"Finnish",fin:"Finnish",fr:"French",fra:"French",fre:"French",gl:"Galician",glg:"Galician",lg:"Ganda",lug:"Ganda",geo:"Georgian",ka:"Georgian",kat:"Georgian",de:"German",deu:"German",ger:"German",hat:"Haitian Creole",ht:"Haitian Creole",he:"Hebrew",heb:"Hebrew",hi:"Hindi",hin:"Hindi",hmn:"Hmong",hu:"Hungarian",hun:"Hungarian",ice:"Icelandic",is:"Icelandic",isl:"Icelandic",id:"Indonesian",ind:"Indonesian",ga:"Irish",gle:"Irish",it:"Italian",ita:"Italian",ja:"Japanese",jpn:"Japanese",kaz:"Kazakh",kk:"Kazakh",ko:"Korean",kor:"Korean",ku:"Kurdish",kur:"Kurdish",lao:"Lao",lo:"Lao",lav:"Latvian",lv:"Latvian",lit:"Lithuanian",lt:"Lithuanian",lb:"Luxembourgish",ltz:"Luxembourgish",may:"Malay",ms:"Malay",msa:"Malay",el:"Greek",ell:"Greek",gre:"Greek",mn:"Mongolian",mon:"Mongolian",no:"Norwegian",nor:"Norwegian",fa:"Persian",fas:"Persian",per:"Persian",pl:"Polish",pol:"Polish",por:"Portuguese",pt:"Portuguese",ro:"Romanian",ron:"Romanian",rum:"Romanian",ru:"Russian",rus:"Russian",scc:"Serbian",sr:"Serbian",srp:"Serbian",ii:"Sichuan Yi",iii:"Sichuan Yi",scn:"Sicilian",sk:"Slovak",slk:"Slovak",slo:"Slovak",sl:"Slovenian",slv:"Slovenian",so:"Somali",som:"Somali",es:"Spanish",spa:"Spanish",sw:"Swahili",swa:"Swahili",sv:"Swedish",swe:"Swedish",gsw:"Swiss German",tgl:"Tagalog",tl:"Tagalog",te:"Telugu",tel:"Telugu",th:"Thai",tha:"Thai",bo:"Tibetan",bod:"Tibetan",tib:"Tibetan",tr:"Turkish",tur:"Turkish",uk:"Ukrainian",ukr:"Ukrainian",uz:"Uzbek",uzb:"Uzbek",vi:"Vietnamese",vie:"Vietnamese"}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(62),s=n(5),l=n(2),u=n(179),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),h=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},d=["3g2","3gp","avi","m2v","m2ts","m4v","mkv","mov","mp4","mpeg","mpg","mts","qt","wmv"],p=["Chrome","Edge","Firefox","Opera","Safari"],f=[{NAME:"Video360",CONSTRUCTOR:u.a,REP:"dash",EXT:d}],v=function(e){function t(){i(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.viewers=f,e}return o(t,e),c(t,[{key:"determineViewer",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=h(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"determineViewer",this).call(this,e,n);if(i){var r=s.a.getName(),o=s.a.isIOS();if(!p.some(function(e){return e===r})||o||!s.a.hasWebGL()){var a=Object(l.w)("We're sorry, your browser doesn't support preview for {1}.",["360-degree videos"]);throw new Error(a)}}return i}}]),t}(a.a);t.a=new v},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(10),s=n(70),l=n(180),u=n(181),c=n(182),h=n(14),d=n(65),p=n(183),f=(n.n(p),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),v=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},b={imageId:"VIDEO_ID",minFilter:"linear",magFilter:"linear",wrapModeV:"clampToEdge",wrapModeU:"clampToEdge"},m=function(e){function t(e){i(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.create360Environment=n.create360Environment.bind(n),n.handleToggleVr=n.handleToggleVr.bind(n),n.handleShowVrButton=n.handleShowVrButton.bind(n),n.onCanvasMouseDown=n.onCanvasMouseDown.bind(n),n.onCanvasMouseUp=n.onCanvasMouseUp.bind(n),n}return o(t,e),f(t,[{key:"setup",value:function(){v(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setup",this).call(this),this.destroyed=!1,this.mediaEl.style.display="none",this.mediaContainerEl.style.width="100%",this.mediaContainerEl.style.height="100%",this.wrapperEl.classList.add("bp-video-360")}},{key:"destroy",value:function(){v(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this.skybox&&(this.skybox.setAttribute("skyboxTexture",null),this.skybox=null),this.textureAsset&&(this.textureAsset.destroy(),this.textureAsset=null),this.videoAsset&&(this.videoAsset.destroy(),this.videoAsset=null),this.controls&&(this.destroyControls(),this.controls=null),this.renderer&&(this.renderer.getBox3D().off("mouseDown",this.onCanvasMouseDown),this.renderer.getBox3D().off("mouseUp",this.onCanvasMouseUp),this.renderer.removeListener(h.h,this.handleShowVrButton),this.renderer.destroy(),this.renderer=null)}},{key:"getJSAssets",value:function(){return v(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getJSAssets",this).call(this).concat(d.a)}},{key:"loadeddataHandler",value:function(){var e=this,n=this.options,i=n.token,r=n.apiHost;this.renderer=new u.a(this.mediaContainerEl,new BoxSDK({token:i,apiBase:r})),this.renderer.on(h.h,this.handleShowVrButton),this.renderer.staticBaseURI=this.options.location.staticBaseURI,this.options.sceneEntities=c.a,this.renderer.initBox3d(this.options).then(this.create360Environment).then(function(){v(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"loadeddataHandler",e).call(e),e.createControls(),e.renderer.initVr()})}},{key:"createControls",value:function(){if(this.controls=new l.a(this.mediaContainerEl),this.controls.on(h.j,this.handleToggleVr),this.renderer&&this.renderer.getBox3D()){var e=this.renderer.getBox3D(),t=e.canvas;t&&(t.addEventListener("mousemove",this.mousemoveHandler),this.hasTouch&&t.addEventListener("touchstart",this.pointerHandler))}}},{key:"destroyControls",value:function(){if(this.controls.removeListener(h.j,this.handleToggleVr),this.controls.destroy(),this.renderer&&this.renderer.getBox3D()){var e=this.renderer.getBox3D(),t=e.canvas;t&&(t.removeEventListener("mousemove",this.mousemoveHandler),t.removeEventListener("touchstart",this.pointerHandler))}}},{key:"resize",value:function(){v(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"resize",this).call(this),this.renderer&&this.renderer.resize()}},{key:"create360Environment",value:function(){var e=this;return this.skybox=this.renderer.getScene().getComponentByScriptId("skybox_renderer"),this.videoAsset=this.renderer.getBox3D().createVideo({loop:!1,generateMipmaps:!1,querySelector:"."+this.mediaContainerEl.className+" video",autoPlay:!1,muted:!1},"VIDEO_ID"),this.textureAsset=this.renderer.getBox3D().createTexture2d(b,"VIDEO_TEX_ID"),new Promise(function(t){e.textureAsset.load(function(){e.skybox.setAttribute("skyboxTexture",e.textureAsset.id),e.skybox.enable(),e.renderer.getBox3D().on("mouseDown",e.onCanvasMouseDown),t()})})}},{key:"toggleFullscreen",value:function(){a.a.toggle(this.wrapperEl)}},{key:"handleToggleVr",value:function(){this.renderer.toggleVr(),this.renderer.vrEnabled?this.skybox.setAttribute("stereoEnabled",!1):(this.mediaEl.paused&&this.mediaEl.play(),this.skybox.setAttribute("stereoEnabled",!0))}},{key:"handleShowVrButton",value:function(){this.controls.showVrButton()}},{key:"onCanvasMouseDown",value:function(){this.renderer.getBox3D().once("mouseUp",this.onCanvasMouseUp)}},{key:"onCanvasMouseUp",value:function(){var e=this.renderer.getInputController();!e||e.getPreviousMouseDragState()||e.getPreviousTouchDragState()||this.togglePlay()}}]),t}(s.a);t.a=m},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(6),s=n.n(a),l=n(14),u=n(4),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),h=function(e){function t(e){i(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.vrButtonEl=null,n.el=e,n.handleToggleVr=n.handleToggleVr.bind(n),n.addUi(),n.attachEventHandlers(),n}return o(t,e),c(t,[{key:"addUi",value:function(){var e=this.el.querySelector(".bp-media-controls-container");this.vrButtonEl=e.appendChild(document.createElement("button")),this.vrButtonEl.classList.add("bp-media-controls-btn"),this.vrButtonEl.setAttribute("aria-label","Toggle VR display"),this.vrButtonEl.setAttribute("title","Toggle VR display"),this.vrButtonEl.classList.add("bp-is-hidden"),this.vrButtonEl.appendChild(document.createElement("span")).innerHTML=u.b}},{key:"attachEventHandlers",value:function(){this.vrButtonEl&&this.vrButtonEl.addEventListener("click",this.handleToggleVr)}},{key:"detachEventHandlers",value:function(){this.vrButtonEl&&this.vrButtonEl.removeEventListener("click",this.handleToggleVr)}},{key:"handleToggleVr",value:function(){this.emit(l.j)}},{key:"showVrButton",value:function(){this.vrButtonEl&&this.vrButtonEl.classList.remove("bp-is-hidden")}},{key:"destroy",value:function(){this.removeAllListeners(),this.detachEventHandlers(),this.vrButtonEl&&this.vrButtonEl.parentElement&&this.vrButtonEl.parentElement.removeChild(this.vrButtonEl),this.vrButtonEl=null,this.el=null,this.handleToggleVr=null}}]),t}(s.a);t.a=h},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(29),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},u=function(e){function t(){return i(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"getInputController",value:function(){if(!this.inputController){var e=this.box3d.getApplication();if(!e)return null;this.inputController=e.getComponentByScriptName("Input")}return this.inputController}},{key:"destroy",value:function(){this.inputController=null,l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}}]),t}(a.a);t.a=u},function(e,t,n){"use strict";var i=n(5);t.a=[{id:"CAMERA_ID",type:"camera",parentId:"SCENE_ID",properties:{near:.05,far:200,fov:70},components:[{name:"Render View",enabled:!0,scriptId:"vr_render_view"},{name:"Orbit Camera",attributes:{panEnabled:!1,zoomEnabled:!0,inertialDamping:.2,lookSpeed:.5},enabled:!0,scriptId:"orbit_camera"},{name:"VR Camera Controller",enabled:!0,scriptId:"vr_camera_controller"}]},{id:"SCENE_ID",type:"scene",children:["CAMERA_ID"],components:[{name:"Skybox",attributes:{size:100},scriptId:"skybox_renderer",enabled:!1}]},{id:"APP_ASSET_ID",type:"application",properties:{startupSceneId:"SCENE_ID"},components:[{name:"Renderer",attributes:{antialias:!i.a.isMobile(),renderOnDemand:!0},scriptId:"box3d_renderer",isBuiltIn:!0,enabled:!0},{name:"Debug Performance",scriptId:"debug_performance",enabled:!1},{name:"Input",scriptId:"input",isBuiltIn:!0,enabled:!0,attributes:{mouseEvents:{enable:!0,scroll:!0,preventScrollDefault:!0,move:!0,down:!0,preventDownDefault:!1,up:!0,doubleClick:!0,leave:!0,contextMenu:!0,preventContextMenuDefault:!0,dragBufferDistance:12,eventHandler:!0},touchEvents:{enable:!0,start:!0,preventStartDefault:!1,end:!0,doubleTap:!0,cancel:!0,leave:!0,move:!0,preventMoveDefault:!0,dragBufferDistance:12,eventHandler:!0},keyEvents:{enable:!0,down:!0,up:!0,preventDefault:!1,eventHandler:!0}}},{name:"VR Presenter",scriptId:"vr_presenter"}]}]},function(e,t){},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(8),s=n(11),l=n(185),u=n(189),c=n(36),h=n(1),d=n(40),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),f=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},v=[{NAME:"Presentation",CONSTRUCTOR:u.a,REP:"pdf",EXT:["odp","ppt","pptx"]},{NAME:"Document",CONSTRUCTOR:l.a,REP:"pdf",EXT:d.a},{NAME:"Presentation",CONSTRUCTOR:u.a,REP:"pdf",EXT:d.a},{NAME:"Document",CONSTRUCTOR:l.a,REP:h.O,EXT:["pdf","lcdpdf"]},{NAME:"Presentation",CONSTRUCTOR:u.a,REP:h.O,EXT:["pdf","lcdpdf"]}],b=function(e){function t(){i(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.viewers=v,e}return o(t,e),p(t,[{key:"determineRepresentation",value:function(e,n){var i=void 0,r=f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"determineRepresentation",this).call(this,e,n),o=c.a.getStatus(r);return"pdf"===e.extension&&"pdf"===r.representation&&o!==h._12&&(i=Object(s.f)(e,h.O)),i||r}}]),t}(a.a);t.a=new b},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(71),s=n(72),l=n(10),u=n(4),c=n(188),h=(n.n(c),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),d=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},p=function(e){function t(){return i(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),h(t,[{key:"setup",value:function(){var e=this;d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setup",this).call(this),this.docEl.classList.add("bp-doc-document"),this.preloader=new s.a(this.previewUI),this.preloader.addListener("preload",function(){e.options.logger.setPreloaded(),e.resetLoadTimeout()})}},{key:"destroy",value:function(){d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this.preloader.removeAllListeners("preload")}},{key:"onKeydown",value:function(e){return"Shift++"===e?(this.zoomIn(),!0):"Shift+_"===e?(this.zoomOut(),!0):"ArrowUp"===e&&l.a.isFullscreen(this.containerEl)?(this.previousPage(),!0):"ArrowDown"===e&&l.a.isFullscreen(this.containerEl)?(this.nextPage(),!0):d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onKeydown",this).call(this,e)}},{key:"bindControlListeners",value:function(){d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"bindControlListeners",this).call(this),this.controls.add("Zoom out",this.zoomOut,"bp-doc-zoom-out-icon",u.v),this.controls.add("Zoom in",this.zoomIn,"bp-doc-zoom-in-icon",u.u),this.pageControls.add(this.pdfViewer.currentPageNumber,this.pdfViewer.pagesCount),this.controls.add("Enter fullscreen",this.toggleFullscreen,"bp-enter-fullscreen-icon",u.l),this.controls.add("Exit fullscreen",this.toggleFullscreen,"bp-exit-fullscreen-icon",u.m)}}]),t}(a.a);t.a=p},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(6),s=n.n(a),l=n(2),u=n(1),c=n(4),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=function(e){function t(e,n,o){i(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(a.opened=!1,a.bar=e,a.findController=n,a.currentMatch=0,a.canDownload=o,null===a.findController)throw new Error("DocFindBar cannot be used without a PDFFindController instance.");return a.displayFindBarHandler=a.displayFindBarHandler.bind(a),a.findFieldHandler=a.findFieldHandler.bind(a),a.barKeyDownHandler=a.barKeyDownHandler.bind(a),a.findNextHandler=a.findNextHandler.bind(a),a.findPreviousHandler=a.findPreviousHandler.bind(a),a.findController.updateUIState=a.updateUIState.bind(a),a.findController.updateUIResultsCount=a.updateUIResultsCount.bind(a),a.bar.classList.add(u.A),a.createFindField(),a.createFindButtons(),a.findPreviousButtonEl=a.bar.querySelector(".bp-doc-find-prev"),a.findNextButtonEl=a.bar.querySelector(".bp-doc-find-next"),a.findCloseButtonEl=a.bar.querySelector(".bp-doc-find-close"),a.bindDOMListeners(),a}return o(t,e),h(t,[{key:"createFindField",value:function(){var e=document.createElement("span");e.classList.add("bp-doc-find-search"),e.innerHTML=c.t.trim(),this.bar.appendChild(e),this.findFieldEl=document.createElement("input"),this.findFieldEl.classList.add("bp-doc-find-field"),this.bar.appendChild(this.findFieldEl),this.findResultsCountEl=document.createElement("span"),this.findResultsCountEl.classList.add("bp-doc-find-results-count"),this.findResultsCountEl.classList.add(u.A),this.bar.appendChild(this.findResultsCountEl)}},{key:"createFindButtons",value:function(){var e=('<button class="bp-doc-find-prev">'+c.k+"</button>").trim(),t=('<button class="bp-doc-find-next">'+c.j+"</button>").trim(),n=('<button class="bp-doc-find-close">'+c.g+"</button>").trim();this.findButtonContainerEl=document.createElement("span"),this.findButtonContainerEl.classList.add("bp-doc-find-controls"),this.findButtonContainerEl.innerHTML=e+t+n,this.bar.appendChild(this.findButtonContainerEl)}},{key:"destroy",value:function(){this.currentMatch=0,this.unbindDOMListeners(),this.bar&&this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar)}},{key:"dispatchFindEvent",value:function(e,t){this.findController.executeCommand(e,{query:this.findFieldEl.value,phraseSearch:!0,highlightAll:!0,findPrevious:t})}},{key:"updateUIState",value:function(e){switch(this.status="",e){case 1:this.findFieldEl.classList.add("bp-find-match-not-found");break;case 3:this.status="pending";break;case 0:this.findFieldEl.classList.remove("bp-find-match-not-found")}this.findFieldEl.setAttribute("data-status",this.status),this.updateUIResultsCount()}},{key:"updateUIResultsCount",value:function(){if(this.findResultsCountEl){if(!this.findController.matchCount)return void this.findResultsCountEl.classList.add(u.A);var e=this.findResultsCountEl.getBoundingClientRect().width+13;this.findFieldEl.style.paddingRight=e+"px",this.findResultsCountEl.textContent=this.currentMatch+" of "+this.findController.matchCount,this.findResultsCountEl.classList.remove(u.A)}}},{key:"setFindFieldElValue",value:function(e){this.findFieldEl.value=e}},{key:"bindDOMListeners",value:function(){this.bar.addEventListener("keydown",this.barKeyDownHandler),this.findFieldEl.addEventListener("input",this.findFieldHandler),this.findPreviousButtonEl.addEventListener("click",this.findPreviousHandler),this.findNextButtonEl.addEventListener("click",this.findNextHandler),this.findCloseButtonEl.addEventListener("click",this.close),document.addEventListener("keydown",this.displayFindBarHandler)}},{key:"unbindDOMListeners",value:function(){this.bar.removeEventListener("keydown",this.barKeyDownHandler),this.findFieldEl.removeEventListener("input",this.findFieldHandler),this.findPreviousButtonEl.removeEventListener("click",this.findPreviousHandler),this.findNextButtonEl.removeEventListener("click",this.findNextHandler),this.findCloseButtonEl.removeEventListener("click",this.close),document.removeEventListener("keydown",this.displayFindBarHandler)}},{key:"displayFindBarHandler",value:function(e){switch(Object(l.i)(e).toLowerCase()){case"meta+f":case"control+f":case"meta+g":case"control+g":case"f3":this.canDownload&&this.open(),e.preventDefault()}}},{key:"findFieldHandler",value:function(){this.dispatchFindEvent("find"),this.currentMatch=1}},{key:"barKeyDownHandler",value:function(e){switch(Object(l.i)(e).toLowerCase()){case"enter":this.findNextHandler(!1);break;case"shift+enter":this.findPreviousHandler(!1);break;case"escape":case"esc":if(!this.opened)return;this.close(),e.stopPropagation(),e.preventDefault();break;case"shift++":case"shift+_":case"[":case"]":e.stopPropagation()}}},{key:"findNextHandler",value:function(e){this.findFieldEl.value&&(e?(this.dispatchFindEvent("findagain",!1),this.currentMatch=this.currentMatch+1,this.currentMatch>this.findController.matchCount&&(this.currentMatch=1)):this.findNextButtonEl.focus())}},{key:"findPreviousHandler",value:function(e){this.findFieldEl.value&&(e?(this.dispatchFindEvent("findagain",!0),this.currentMatch=this.currentMatch-1,this.currentMatch<=0&&(this.currentMatch=this.findController.matchCount)):this.findPreviousButtonEl.focus())}},{key:"open",value:function(){this.prevSearchQuery&&(this.setFindFieldElValue(this.prevSearchQuery),this.findFieldHandler()),this.opened||(this.opened=!0,this.bar.classList.remove(u.A)),this.findFieldEl.select(),this.findFieldEl.focus()}},{key:"close",value:function(){this.prevSearchQuery=this.findFieldEl.value,this.setFindFieldElValue(""),this.findFieldHandler(),this.opened&&(this.opened=!1,this.bar.classList.add(u.A),this.findController.active=!1)}}]),t}(s.a);t.a=d},function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"a",function(){return a});var i=n(1),r="third-party/doc/"+i.K+"/",o=[r+"pdf.min.js",r+"pdf_viewer.min.js",r+"pdf.worker.min.js",r+"exif.min.js"],a=[r+"pdf_viewer.min.css"]},function(e,t){},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(24),s=n.n(a),l=n(71),u=n(190),c=n(1),h=n(4),d=n(191),p=(n.n(d),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),f=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},v=function(e){function t(e){i(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.mobileScrollHandler=n.mobileScrollHandler.bind(n),n.pagesinitHandler=n.pagesinitHandler.bind(n),n.pagechangeHandler=n.pagechangeHandler.bind(n),n.throttledWheelHandler=n.getWheelHandler().bind(n),n}return o(t,e),p(t,[{key:"setup",value:function(){var e=this;f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setup",this).call(this),this.docEl.classList.add("bp-doc-presentation"),this.preloader=new u.a(this.previewUI),this.preloader.addListener("preload",function(){e.options.logger.setPreloaded(),e.resetLoadTimeout()})}},{key:"destroy",value:function(){f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this.preloader.removeAllListeners("preload")}},{key:"setPage",value:function(e){this.checkOverflow();var n=this.docEl.querySelectorAll(".page");[].forEach.call(n,function(e){e.classList.add(c.B)}),f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setPage",this).call(this,e),this.docEl.querySelector('[data-page-number="'+this.pdfViewer.currentPageNumber+'"]').classList.remove(c.B),this.pdfViewer.update()}},{key:"onKeydown",value:function(e){return"ArrowUp"===e?(this.previousPage(),!0):"ArrowDown"===e?(this.nextPage(),!0):f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onKeydown",this).call(this,e)}},{key:"checkOverflow",value:function(){var e=this.docEl,t=this.docEl.querySelector('[data-page-number="'+this.pdfViewer.currentPageNumber+'"]'),n=t.clientWidth>e.clientWidth,i=t.clientHeight-30>e.clientHeight;return e.classList.remove("overflow-x"),e.classList.remove("overflow-y"),n&&e.classList.add("overflow-x"),i&&e.classList.add("overflow-y"),n||i}},{key:"initViewer",value:function(e){f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"initViewer",this).call(this,e),this.overwritePdfViewerBehavior()}},{key:"bindDOMListeners",value:function(){f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"bindDOMListeners",this).call(this),this.docEl.addEventListener("wheel",this.throttledWheelHandler),this.hasTouch&&(this.docEl.addEventListener("touchstart",this.mobileScrollHandler),this.docEl.addEventListener("touchmove",this.mobileScrollHandler),this.docEl.addEventListener("touchend",this.mobileScrollHandler))}},{key:"unbindDOMListeners",value:function(){f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"unbindDOMListeners",this).call(this),this.docEl.removeEventListener("wheel",this.throttledWheelHandler),this.hasTouch&&(this.docEl.removeEventListener("touchstart",this.mobileScrollHandler),this.docEl.removeEventListener("touchmove",this.mobileScrollHandler),this.docEl.removeEventListener("touchend",this.mobileScrollHandler))}},{key:"bindControlListeners",value:function(){f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"bindControlListeners",this).call(this),this.controls.add("Zoom out",this.zoomOut,"bp-exit-zoom-out-icon",h.v),this.controls.add("Zoom in",this.zoomIn,"bp-enter-zoom-in-icon",h.u),this.pageControls.add(this.pdfViewer.currentPageNumber,this.pdfViewer.pagesCount),this.controls.add("Enter fullscreen",this.toggleFullscreen,"bp-enter-fullscreen-icon",h.l),this.controls.add("Exit fullscreen",this.toggleFullscreen,"bp-exit-fullscreen-icon",h.m)}},{key:"mobileScrollHandler",value:function(e){if(!this.checkOverflow())if("touchstart"===e.type)this.scrollStart=e.changedTouches[0].clientY;else if("touchmove"===e.type)e.preventDefault();else{var t=e.changedTouches[0].clientY;this.scrollStart&&this.scrollStart>t+5?this.nextPage():this.scrollStart&&this.scrollStart<t-5&&this.previousPage()}}},{key:"pagesinitHandler",value:function(){[].slice.call(this.docEl.querySelectorAll(".pdfViewer .page"),0).forEach(function(e){"1"!==e.getAttribute("data-page-number")&&e.classList.add(c.B)}),f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"pagesinitHandler",this).call(this),this.pdfViewer.currentScaleValue="page-fit"}},{key:"pagechangeHandler",value:function(e){this.setPage(e.pageNumber),f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"pagechangeHandler",this).call(this,e)}},{key:"getWheelHandler",value:function(){var e=this;return s()(function(t){0===t.deltaY||0!==t.deltaX||e.checkOverflow()||(t.deltaY>0?e.nextPage():t.deltaY<0&&e.previousPage())},200)}},{key:"overwritePdfViewerBehavior",value:function(){var e=this;this.pdfViewer.scrollPageIntoView=function(t){var n=t;"number"!=typeof n&&(n=t.pageNumber||1),e.setPage(n)},this.pdfViewer._getVisiblePages=function(){var t=e.pdfViewer._pages[e.pdfViewer._currentPageNumber-1];return{first:t,last:t,views:[{id:t.id,view:t}]}}}}]),t}(l.a);t.a=v},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(72),s=n(1),l=n(2),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=function(e){function t(e){i(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.maxZoomScale=0,n.wrapperClassName=s.q,n}return o(t,e),u(t,[{key:"scaleAndShowPreload",value:function(e,t){this.checkDocumentLoaded()||(Object(l.y)(this.imageEl,e,t),Object(l.y)(this.overlayEl,e,t),this.previewUI.hideLoadingIndicator(),this.preloadEl.classList.remove(s.B),this.emit("preload"))}}]),t}(a.a);t.a=c},function(e,t){},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(8),s=n(5),l=n(2),u=n(193),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),h=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},d=[{NAME:"Model3d",CONSTRUCTOR:u.a,REP:"3d",EXT:["box3d","fbx","obj","dae","3ds","ply","stl"]}],p=function(e){function t(){i(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.viewers=d,e}return o(t,e),c(t,[{key:"determineViewer",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=h(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"determineViewer",this).call(this,e,n);if(i&&!s.a.supportsModel3D()){var r=Object(l.w)("We're sorry, your browser doesn't support preview for {1}.",["3D models"]);throw new Error(r)}return i}}]),t}(a.a);t.a=new p},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(63),s=n(194),l=n(197),u=n(19),c=n(14),h=n(200),d=(n.n(h),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),p=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},f=function(e){function t(e){i(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.instances=[],n.axes={up:null,forward:null},n.handleRotateOnAxis=n.handleRotateOnAxis.bind(n),n.handleSelectAnimationClip=n.handleSelectAnimationClip.bind(n),n.handleSetCameraProjection=n.handleSetCameraProjection.bind(n),n.handleSetRenderMode=n.handleSetRenderMode.bind(n),n.handleShowSkeletons=n.handleShowSkeletons.bind(n),n.handleShowWireframes=n.handleShowWireframes.bind(n),n.handleShowGrid=n.handleShowGrid.bind(n),n.handleToggleAnimation=n.handleToggleAnimation.bind(n),n.handleToggleHelpers=n.handleToggleHelpers.bind(n),n.handleCanvasClick=n.handleCanvasClick.bind(n),n.onMetadataError=n.onMetadataError.bind(n),n}return o(t,e),d(t,[{key:"setup",value:function(){p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setup",this).call(this),this.wrapperEl.classList.add(c.c),this.loadTimeout=18e4}},{key:"createSubModules",value:function(){this.controls=new s.a(this.wrapperEl),this.renderer=new l.a(this.wrapperEl,this.boxSdk)}},{key:"attachEventHandlers",value:function(){p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"attachEventHandlers",this).call(this),this.controls&&(this.controls.on(u.n,this.handleRotateOnAxis),this.controls.on(u.o,this.handleSelectAnimationClip),this.controls.on(u.p,this.handleSetCameraProjection),this.controls.on(u.r,this.handleSetRenderMode),this.controls.on(u.s,this.handleShowSkeletons),this.controls.on(u.t,this.handleShowWireframes),this.controls.on(u.q,this.handleShowGrid),this.controls.on(u.u,this.handleToggleAnimation),this.controls.on(u.v,this.handleToggleHelpers)),this.renderer&&this.renderer.on(u.l,this.handleCanvasClick)}},{key:"detachEventHandlers",value:function(){p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"detachEventHandlers",this).call(this),this.controls&&(this.controls.removeListener(u.n,this.handleRotateOnAxis),this.controls.removeListener(u.o,this.handleSelectAnimationClip),this.controls.removeListener(u.p,this.handleSetCameraProjection),this.controls.removeListener(u.r,this.handleSetRenderMode),this.controls.removeListener(u.s,this.handleShowSkeletons),this.controls.removeListener(u.t,this.handleShowWireframes),this.controls.removeListener(u.q,this.handleShowGrid),this.controls.removeListener(u.u,this.handleToggleAnimation),this.controls.removeListener(u.v,this.handleToggleHelpers)),this.renderer&&this.renderer.removeListener(u.l,this.handleCanvasClick)}},{key:"handleSelectAnimationClip",value:function(e){this.renderer.setAnimationClip(e)}},{key:"handleRotateOnAxis",value:function(e){this.renderer.rotateOnAxis(e)}},{key:"handleRotationAxisSet",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.renderer.setAxisRotation(e,t,n)}},{key:"handleSceneLoaded",value:function(){var e=this;return this.loaded=!0,this.boxSdk.getMetadataClient().get(this.options.file.id,"global","box3d").then(function(e){if(200!==e.status)throw new Error("Received unsuccessful response status: "+e.status);return e.response}).catch(this.onMetadataError).then(function(t){return e.controls&&e.controls.addUi(),e.axes.up=t.upAxis||"+Y",e.axes.forward=t.forwardAxis||"+Z",e.renderMode=t.defaultRenderMode||u.A,e.projection=t.cameraProjection||u.e,"true"===t.renderGrid?e.renderGrid=!0:"false"===t.renderGrid?e.renderGrid=!1:e.renderGrid=!0,"+Y"===e.axes.up&&"+Z"===e.axes.forward||e.handleRotationAxisSet(e.axes.up,e.axes.forward,!1),e.handleReset(),e.populateAnimationControls(),e.showWrapper(),e.emit(c.e),!0})}},{key:"onMetadataError",value:function(e){return{}}},{key:"populateAnimationControls",value:function(){var e=this;if(this.controls){var t=this.renderer.box3d.getEntitiesByType("animation");if(t.length>0){var n=t[0].getClipIds();n.forEach(function(n){var i=t[0].getClip(n),r=i.stop-i.start;e.controls.addAnimationClip(n,i.name,r)}),n.length>0&&(this.controls.showAnimationControls(),this.controls.selectAnimationClip(n[0]))}}}},{key:"handleToggleAnimation",value:function(e){this.renderer.toggleAnimation(e)}},{key:"handleCanvasClick",value:function(){this.controls.hidePullups()}},{key:"showWrapper",value:function(){this.wrapperEl.classList.remove(c.c)}},{key:"handleReset",value:function(){p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"handleReset",this).call(this),this.controls&&(this.controls.handleSetRenderMode(this.renderMode),this.controls.setCurrentProjectionMode(this.projection),this.controls.handleSetSkeletonsVisible(!1),this.controls.handleSetWireframesVisible(!1),this.controls.handleSetGridVisible(this.renderGrid)),this.renderer&&(this.handleRotationAxisSet(this.axes.up,this.axes.forward,!1),this.renderer.stopAnimation(),this.renderer.resetView())}},{key:"handleSetRenderMode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Lit";this.renderer.setRenderMode(e)}},{key:"handleToggleHelpers",value:function(e){this.renderer.toggleHelpers(e)}},{key:"handleSetCameraProjection",value:function(e){this.renderer.setCameraProjection(e)}},{key:"handleShowSkeletons",value:function(e){this.renderer.setSkeletonsVisible(e)}},{key:"handleShowWireframes",value:function(e){this.renderer.setWireframesVisible(e)}},{key:"handleShowGrid",value:function(e){this.renderer.setGridVisible(e)}}]),t}(a.a);t.a=f},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(37),s=n(195),l=n(196),u=n(19),c=n(14),h=n(4),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),p=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},f=function(e){function t(e){i(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.isAnimationPlaying=!1,n.animationClipsPullup=new s.a(e),n.settingsPullup=new l.a,n.handleSelectAnimationClip=n.handleSelectAnimationClip.bind(n),n.handleToggleAnimation=n.handleToggleAnimation.bind(n),n.handleToggleAnimationClips=n.handleToggleAnimationClips.bind(n),n.handleToggleSettings=n.handleToggleSettings.bind(n),n.handleSetRenderMode=n.handleSetRenderMode.bind(n),n.handleSetSkeletonsVisible=n.handleSetSkeletonsVisible.bind(n),n.handleSetWireframesVisible=n.handleSetWireframesVisible.bind(n),n.handleSetGridVisible=n.handleSetGridVisible.bind(n),n.handleSetCameraProjection=n.handleSetCameraProjection.bind(n),n.handleAxisRotation=n.handleAxisRotation.bind(n),n}return o(t,e),d(t,[{key:"addUi",value:function(){this.resetButtonEl=this.controls.add("Reset",this.handleReset,"",h.a),this.animationClipsPullup.addListener(u.o,this.handleSelectAnimationClip),this.animationToggleEl=this.controls.add("Play/pause animation",this.handleToggleAnimation,"",h.p),this.animationClipButtonEl=this.controls.add("Animation clips",this.handleToggleAnimationClips,"",h.c),this.animationClipButtonEl.parentNode.appendChild(this.animationClipsPullup.pullupEl),this.hideAnimationControls(),this.addVrButton(),this.settingsPullup.addListener(u.r,this.handleSetRenderMode),this.settingsPullup.addListener(u.s,this.handleSetSkeletonsVisible),this.settingsPullup.addListener(u.t,this.handleSetWireframesVisible),this.settingsPullup.addListener(u.q,this.handleSetGridVisible),this.settingsPullup.addListener(u.p,this.handleSetCameraProjection),this.settingsPullup.addListener(u.n,this.handleAxisRotation),this.settingsButtonEl=this.controls.add("Settings",this.handleToggleSettings,"",h.n),this.settingsButtonEl.parentNode.appendChild(this.settingsPullup.pullupEl),this.addFullscreenButton(),this.handleSetRenderMode(u.A)}},{key:"hidePullups",value:function(){this.animationClipsPullup.hide(),this.settingsPullup.hide(),this.emit(u.v,!1)}},{key:"handleToggleSettings",value:function(){this.animationClipsPullup.hide(),this.settingsPullup.toggle(),this.emit(u.v)}},{key:"handleSetRenderMode",value:function(e){this.emit(u.r,e),this.settingsPullup.setCurrentRenderMode(e)}},{key:"handleSetSkeletonsVisible",value:function(e){this.emit(u.s,e)}},{key:"handleSetWireframesVisible",value:function(e){this.emit(u.t,e)}},{key:"handleSetGridVisible",value:function(e){this.emit(u.q,e),this.settingsPullup.setGridVisible(e)}},{key:"handleSetCameraProjection",value:function(e){this.emit(u.p,e)}},{key:"handleAxisRotation",value:function(e){this.emit(u.n,e)}},{key:"showAnimationControls",value:function(){this.animationToggleEl&&this.animationClipButtonEl&&(this.animationToggleEl.classList.remove(c.b),this.animationClipButtonEl.classList.remove(c.b))}},{key:"hideAnimationControls",value:function(){this.animationToggleEl&&this.animationClipButtonEl&&(this.animationToggleEl.classList.add(c.b),this.animationClipButtonEl.classList.add(c.b))}},{key:"handleSelectAnimationClip",value:function(e){this.setAnimationPlaying(!1),this.emit(u.o,e)}},{key:"handleToggleAnimationClips",value:function(){this.settingsPullup.hide(),this.animationClipsPullup.toggle()}},{key:"handleToggleAnimation",value:function(){this.hidePullups(),this.setAnimationPlaying(!this.isAnimationPlaying)}},{key:"setAnimationPlaying",value:function(e){this.isAnimationPlaying=e,this.animationToggleEl.innerHTML=this.isAnimationPlaying?h.o:h.p,this.emit(u.u,this.isAnimationPlaying)}},{key:"addAnimationClip",value:function(e,t,n){this.animationClipsPullup.addClip(e,t,n)}},{key:"selectAnimationClip",value:function(e){this.animationClipsPullup.selectClip(e)}},{key:"handleToggleFullscreen",value:function(){p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"handleToggleFullscreen",this).call(this),this.hidePullups()}},{key:"setCurrentProjectionMode",value:function(e){this.settingsPullup.onProjectionSelected(e),this.settingsPullup.setCurrentProjectionMode(e)}},{key:"handleReset",value:function(){p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"handleReset",this).call(this),this.hidePullups(),this.settingsPullup.reset(),this.setAnimationPlaying(!1)}},{key:"destroy",value:function(){this.controls&&this.controls.controlsEl.removeEventListener("click",this.handleControlsClick),this.animationClipsPullup.removeListener(u.o,this.handleSelectAnimationClip),this.animationClipsPullup.destroy(),this.animationClipsPullup=null,this.settingsPullup.removeListener(u.r,this.handleSetRenderMode),this.settingsPullup.removeListener(u.s,this.handleSetSkeletonsVisible),this.settingsPullup.removeListener(u.t,this.handleSetWireframesVisible),this.settingsPullup.removeListener(u.q,this.handleSetGridVisible),this.settingsPullup.removeListener(u.p,this.handleSetCameraProjection),this.settingsPullup.removeListener(u.n,this.handleAxisRotation),this.settingsPullup.destroy(),this.settingsPullup=null,p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}}]),t}(a.a);t.a=f},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(6),s=n.n(a),l=n(19),u=n(38),c=n(4),h=n(2),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),p='\n    <div class="box3d-animation-clip" data-type="clip">\n        <div class="box3d-animation-clip-icon"></div>\n        <div class="box3d-animation-clip-value"></div>\n    </div>'.trim(),f=function(e){function t(){i(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.pullupEl=Object(u.e)(),e.pullupEl.classList.add(l.f),e.uiRegistry=new u.a,e.uiRegistry.registerItem("settings-pullup-el",e.pullupEl),e.clipEls={},e}return o(t,e),d(t,[{key:"addClip",value:function(e,t,n){var i=Object(h.g)(this.pullupEl,p),r=i.firstChild,o=this.formatDurationStr(n),a=r.querySelector(".box3d-animation-clip-value");a.setAttribute("data-value",e),a.textContent=o+" "+t,a.addEventListener("click",this.handleClipClick.bind(this)),this.pullupEl.appendChild(r),this.clipEls[e]=r}},{key:"destroy",value:function(){this.pullupEl=null,this.uiRegistry.unregisterAll(),this.uiRegistry=null}},{key:"formatDurationStr",value:function(e){var t=Math.floor(e),n=Math.floor(t/3600),i=this.padLeft(n.toString(),2);t-=3600*n;var r=Math.floor(t/60),o=this.padLeft(r.toString(),2);return t-=60*r,i+":"+o+":"+this.padLeft(t.toString(),2)}},{key:"getClipCount",value:function(){return Object.keys(this.clipEls).length}},{key:"getClipId",value:function(e){return Object.keys(this.clipEls)[e]}},{key:"handleClipClick",value:function(e){if(e.target){var t=e.target.getAttribute("data-value");this.selectClip(t)}}},{key:"hide",value:function(){this.pullupEl.classList.add(l.g)}},{key:"padLeft",value:function(e,t){return e.length>=t?e:new Array(t-e.length+1).join("0")+e}},{key:"reset",value:function(){this.getClipCount()>0&&this.selectClip(this.getClipId(0))}},{key:"selectClip",value:function(e){var t=this;Object.keys(this.clipEls).forEach(function(n){t.clipEls[n].querySelector(".box3d-animation-clip-icon").innerHTML=n===e?c.f:""}),this.emit(l.o,e)}},{key:"show",value:function(){this.pullupEl.classList.remove(l.g)}},{key:"toggle",value:function(){this.pullupEl.classList.toggle(l.g)}}]),t}(s.a);t.a=f},function(e,t,n){"use strict";function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(6),l=n.n(s),u=n(38),c=n(19),h=n(1),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),p=[{text:c.A,callback:"onRenderModeSelected",args:[c.A]},{text:c.D,callback:"onRenderModeSelected",args:[c.D]},{text:c.B,callback:"onRenderModeSelected",args:[c.B]},{text:c.C,callback:"onRenderModeSelected",args:[c.C]},{text:c.E,callback:"onRenderModeSelected",args:[c.E]}],f=[{text:"Perspective",callback:"onProjectionSelected",args:[c.e]},{text:"Orthographic",callback:"onProjectionSelected",args:[c.d]}],v=function(e){function t(){r(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.uiRegistry=new u.a,e.createUi(),e}return a(t,e),d(t,[{key:"convertToValidCallback",value:function(e){var t=e,n=t.callback;if("string"==typeof n&&this[n]){var r;t.callback=(r=this[n]).bind.apply(r,[this].concat(i(t.args)))}}},{key:"createUi",value:function(){var e=this;this.pullupEl=Object(u.e)(),this.uiRegistry.registerItem("settings-pullup-el",this.pullupEl);var t=p.map(function(t){var n=Object.assign({},t);return e.convertToValidCallback(n),n}),n=Object(u.c)("Render Mode","Lit",t);this.renderModeEl=n.querySelector("button"),this.pullupEl.appendChild(n);var i=Object(u.f)();this.showGridEl=Object(u.b)();var r=Object(u.d)("Show grid");i.appendChild(this.showGridEl),i.appendChild(r),this.pullupEl.appendChild(i),this.showGridEl.addEventListener("click",function(){e.onShowGridToggled()});var o=Object(u.f)();this.showWireframesEl=Object(u.b)();var a=Object(u.d)("Show wireframes");o.appendChild(this.showWireframesEl),o.appendChild(a),this.pullupEl.appendChild(o),this.showWireframesEl.addEventListener("click",function(){e.onShowWireframesToggled()});var s=Object(u.f)();this.showSkeletonsEl=Object(u.b)();var l=Object(u.d)("Show skeletons");s.appendChild(this.showSkeletonsEl),s.appendChild(l),this.pullupEl.appendChild(s),this.showSkeletonsEl.addEventListener("click",function(){e.onShowSkeletonsToggled()});var c=f.map(function(t){var n=Object.assign({},t);return e.convertToValidCallback(n),n}),d=Object(u.c)("Camera Projection","Perspective",c);this.projectionEl=d.querySelector("button"),this.pullupEl.appendChild(d),this.renderModeListEl=n.querySelector("."+h.l),this.projectionListEl=d.querySelector("."+h.l),this.uiRegistry.registerItem("settings-render-mode-selector-label",this.renderModeEl,"click",function(){e.projectionListEl.classList.remove(h.G)}),this.uiRegistry.registerItem("settings-projection-mode-selector-label",this.projectionEl,"click",function(){e.renderModeListEl.classList.remove(h.G)});var v=Object(u.f)("Rotate Model"),b=this.createAxisWidget();this.pullupEl.appendChild(v),this.pullupEl.appendChild(b)}},{key:"createAxisWidget",value:function(){var e=this,t=Object(u.f)();return t.appendChild(this.createRotationAxis(c.a,function(){return e.onAxisRotationSelected(c.a,-1)},function(){return e.onAxisRotationSelected(c.a,1)})),t.appendChild(this.createRotationAxis(c.b,function(){return e.onAxisRotationSelected(c.b,-1)},function(){return e.onAxisRotationSelected(c.b,1)})),t.appendChild(this.createRotationAxis(c.c,function(){return e.onAxisRotationSelected(c.c,1)},function(){return e.onAxisRotationSelected(c.c,-1)})),t}},{key:"createRotationAxis",value:function(e,t,n){var i=document.createElement("div");i.classList.add("box3d-settings-axis-widget"),i.classList.add("box3d-settings-axis-widget-"+e);var r=document.createElement("span");r.classList.add("box3d-setting-axis-rotate"),r.classList.add("box3d-setting-axis-rotate-left"),this.uiRegistry.registerItem("minus-"+e+"-axis-icon",r,"click",t),i.appendChild(r);var o=document.createElement("span");o.textContent=e.toUpperCase(),i.appendChild(o);var a=document.createElement("span");return a.classList.add("box3d-setting-axis-rotate"),a.classList.add("box3d-setting-axis-rotate-right"),this.uiRegistry.registerItem("plus-"+e+"-axis-icon",a,"click",n),i.appendChild(a),i}},{key:"onRenderModeSelected",value:function(e){this.emit(c.r,e)}},{key:"onAxisRotationSelected",value:function(e,t){var n={};n[e]=t*c.F,this.emit(c.n,n)}},{key:"onProjectionSelected",value:function(e){this.emit(c.p,e)}},{key:"onShowSkeletonsToggled",value:function(){this.emit(c.s,this.showSkeletonsEl.checked)}},{key:"hideSkeletons",value:function(){this.showSkeletonsEl.checked=!1,this.onShowSkeletonsToggled()}},{key:"onShowWireframesToggled",value:function(){this.emit(c.t,this.showWireframesEl.checked)}},{key:"onShowGridToggled",value:function(){this.emit(c.q,this.showGridEl.checked)}},{key:"hideWireframes",value:function(){this.showWireframesEl.checked=!1,this.onShowWireframesToggled()}},{key:"showGrid",value:function(){this.showGridEl.checked=!0,this.onShowGridToggled()}},{key:"reset",value:function(){this.hideWireframes(),this.hideSkeletons(),this.showGrid()}},{key:"setCurrentRenderMode",value:function(e){this.renderModeEl.textContent=e}},{key:"setCurrentProjectionMode",value:function(e){this.projectionEl.textContent=e}},{key:"setGridVisible",value:function(e){this.showGridEl.checked=e}},{key:"show",value:function(){this.pullupEl.classList.remove(c.g)}},{key:"hide",value:function(){this.pullupEl.classList.add(c.g),this.projectionListEl.classList.remove(h.G),this.renderModeListEl.classList.remove(h.G)}},{key:"toggle",value:function(){this.pullupEl.classList.toggle(c.g),this.projectionListEl.classList.remove(h.G),this.renderModeListEl.classList.remove(h.G)}},{key:"destroy",value:function(){this.uiRegistry.unregisterAll(),this.uiRegistry=null,this.renderModeEl=null,this.showWireframesEl=null,this.showGridEl=null,this.showSkeletonsEl=null,this.projectionEl=null,this.pullupEl=null}}]),t}(l.a);t.a=v},function(e,t,n){"use strict";function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(29),l=n(198),u=n(199),c=n(19),h=n(1),d=n(2),p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),v=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},b="third-party/model3d/"+h.N+"/box3d-player.json",m={x:0,y:0,z:0},y={x:0,y:0,z:0,w:1},g=function(e){function t(e,n){var a;r(this,t);var s=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return s.renderModeValues=(a={},i(a,c.A,Box3D.RenderMode.Lit),i(a,c.D,Box3D.RenderMode.Unlit),i(a,c.B,Box3D.RenderMode.Normals),i(a,c.C,Box3D.RenderMode.Shape),i(a,c.E,Box3D.RenderMode.UVOverlay),a),s.handleCanvasClick=s.handleCanvasClick.bind(s),s}return a(t,e),f(t,[{key:"destroy",value:function(){this.box3d&&(this.box3d.canvas.removeEventListener("click",this.handleCanvasClick),this.cleanupScene(),v(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this))}},{key:"load",value:function(e){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=p({},i),o=r.location;if(o&&(r.sceneEntities=Object(u.a)(o.staticBaseURI),!r.box3dApplication)){var a=Object(d.e)(o);r.box3dApplication=a(b)}return v(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"load",this).call(this,e,r).then(this.loadBox3dFile.bind(this,i.file.id)).catch(function(){return n.onUnsupportedRepresentation()})}},{key:"handleCanvasClick",value:function(e){this.emit(c.l,e)}},{key:"loadBox3dFile",value:function(e){var t=this;this.box3d.canvas.addEventListener("click",this.handleCanvasClick);var n=this.box3d.getApplication().getComponentByScriptId("render_modes");return n&&n.setAttribute("shapeTexture","MAT_CAP_TEX"),new Promise(function(n,i){var r=t.getScene();r||i(new Error("Provided Box3D application data contains no scene")),t.instance=r.getDescendantByName("Preview Model"),t.instance||i(new Error('Provided Box3D application must include node named "Preview Model"')),t.instance.getComponentByScriptId("remote_instance")?(t.instance.once("remoteInstanceCreated",function(){t.setupScene(),n()}),t.instance.trigger("createRemoteInstance",e)):t.instance.when("load",function(){t.setupScene(),n()})})}},{key:"setupScene",value:function(){var e=this,t=this.getScene();if(!t)return void this.onSceneLoad();this.instance.addComponent("axis_rotation",{},"axis_rotation_"+this.instance.id),this.instance.addComponent("animation",{},"animation_"+this.instance.id);var n=this.box3d.getAssetsByClass(Box3D.AnimationAsset);n.length>0&&this.setAnimationAsset(n[0]),this.addHelpersToScene(),t.when("load",function(){return e.onSceneLoad()})}},{key:"reset",value:function(){this.resetModel(),v(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"reset",this).call(this)}},{key:"resetModel",value:function(){if(this.instance){this.instance.getChildren().forEach(function(e){e.setPosition(m.x,m.y,m.z),e.setScale(1,1,1),e.setQuaternion(y.x,y.y,y.z,y.w),e.unsetProperty("bounds")}),this.instance.unsetProperty("bounds");var e=this.instance.getComponentByScriptId("scale_to_size");e&&e.enable();var t=this.instance.getComponentByScriptId("align_to_position");t&&t.enable(),this.vrEnabled&&this.disableAutoTransform()}}},{key:"resetView",value:function(){v(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"resetView",this).call(this);var e=this.getCamera();if(e){var n=e.getComponentByScriptId("orbit_camera");if(n&&this.instance.runtimeData){var i=this.instance.getBounds();this.instance.runtimeData.updateMatrixWorld(),i.min.applyMatrix4(this.instance.runtimeData.matrixWorld),i.max.applyMatrix4(this.instance.runtimeData.matrixWorld);var r=new THREE.Vector3;r.subVectors(i.max,i.min);var o=this.instance.getCenter();o.applyMatrix4(this.instance.runtimeData.matrixWorld),n.reset(),n.setPivotPosition(o);var a=1.5*Math.max(Math.max(r.x,r.y),r.z);n.setOrbitDistance(a)}}}},{key:"onSceneLoad",value:function(){v(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onSceneLoad",this).call(this),this.initVrGamepadControls(),this.resetSkeletons(),this.box3d.getEntitiesByType("video").forEach(function(e){return e.play()})}},{key:"setAnimationAsset",value:function(e){if(this.instance){var t=this.instance.getComponentByScriptId("animation");t.setAsset(e),t.setLoop(!0)}}},{key:"setAnimationClip",value:function(e){if(this.instance){this.instance.getComponentByScriptId("animation").setClipId(e)}}},{key:"toggleAnimation",value:function(e){var t=this;if(this.instance){var n=this.instance.getComponentByScriptId("animation"),i=n?n.asset:void 0;i&&i.when("load",function(){t.instance.when("load",function(){e?n.play():n.pause()})})}}},{key:"stopAnimation",value:function(){if(this.instance){var e=this.instance.getComponentByScriptId("animation");e&&e.stop()}}},{key:"onUnsupportedRepresentation",value:function(){this.emit("error",new Error("We're sorry, the preview didn't load. This file type may not be supported."))}},{key:"addHelpersToScene",value:function(){var e=this.getScene()?this.getScene().runtimeData:void 0;e&&(this.grid=new THREE.GridHelper(c.z,c.y,c.x,c.w),this.grid.material.transparent=!0,this.grid.material.blending=THREE.MultiplyBlending,e.add(this.grid),this.grid.visible=!0,this.axisDisplay=new THREE.AxisHelper(.5),e.add(this.axisDisplay),this.axisDisplay.visible=!1)}},{key:"cleanupHelpers",value:function(){var e=this.getScene()?this.getScene().runtimeData:void 0;e&&(this.grid&&(e.remove(this.grid),this.grid.material.dispose(),this.grid.geometry.dispose()),this.axisDisplay&&(e.remove(this.axisDisplay),this.axisDisplay.material.dispose(),this.axisDisplay.geometry.dispose()))}},{key:"toggleHelpers",value:function(e){var t=void 0!==e?e:!this.axisDisplay.visible;this.axisDisplay.visible=t,this.box3d.needsRender=!0}},{key:"cleanupScene",value:function(){this.cleanupHelpers(),this.resetSkeletons()}},{key:"resetSkeletons",value:function(){this.box3d&&Box3D.globalEvents.trigger(c.m)}},{key:"setRenderMode",value:function(e){this.box3d&&Box3D.globalEvents.trigger(c.r,this.renderModeValues[e])}},{key:"setCameraProjection",value:function(e){var t=this.getCamera();if(t){switch(e){case c.d:t.setProperty("cameraType","orthographic");break;case c.e:t.setProperty("cameraType","perspective")}this.resetView()}}},{key:"rotateOnAxis",value:function(e){this.instance&&this.box3d&&this.instance.trigger("rotate_on_axis",e,!0)}},{key:"setAxisRotation",value:function(e,t,n){this.instance&&this.instance.trigger("set_axes_orientation",e,t,n)}},{key:"setSkeletonsVisible",value:function(e){this.box3d&&Box3D.globalEvents.trigger(c.s,e)}},{key:"setWireframesVisible",value:function(e){this.box3d&&Box3D.globalEvents.trigger(c.t,e)}},{key:"setGridVisible",value:function(e){this.box3d&&(this.grid.visible=e)}},{key:"enableVr",value:function(){if(!this.vrEnabled){v(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"enableVr",this).call(this);var e=this.box3d.getVrDisplay();this.vrDeviceHasPosition=e?e.capabilities.hasPosition:void 0,this.vrDeviceHasPosition?this.grid.visible=!0:this.box3d.on("update",this.updateNonPositionalVrControls,this),this.disableAutoTransform()}}},{key:"onDisableVr",value:function(){this.vrDeviceHasPosition||this.box3d.off("update",this.updateNonPositionalVrControls,this),v(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onDisableVr",this).call(this)}},{key:"disableAutoTransform",value:function(){if(this.instance){var e=this.instance.getComponentByScriptId("scale_to_size");if(e){var t=this.instance.getScale();e.disable(),this.instance.setScale(t.x,t.y,t.z)}var n=this.instance.getComponentByScriptId("align_to_position");if(n){var i=this.instance.getPosition();n.disable(),this.instance.setPosition(i.x,i.y,i.z)}}}},{key:"updateNonPositionalVrControls",value:function(){var e=this.getCamera(),t=e.getComponentByScriptId("orbit_camera");if(t){var n=e.runtimeData;n.position.set(0,0,t.getOrbitDistance()),n.position.applyQuaternion(n.quaternion),n.position.add(t.pivotPoint.position)}}},{key:"initVrGamepadControls",value:function(){this.vrControls=new l.a(this.vrGamepads,this.box3d)}}]),t}(s.a);t.a=g},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o={None:0,Translation:1,Scale:2},a={grabObject:1,grabWorld:2},s=function(){function e(t,n){var r=this;i(this,e),this.initialScaleDistance=0,this.initialScale=new THREE.Vector3,this.vrWorkVector1=new THREE.Vector3,this.vrWorkVector2=new THREE.Vector3,this.vrWorkMatrix=new THREE.Matrix4,this.vrGamepads=t,this.box3d=n,this.onScaleUpdate=this.onScaleUpdate.bind(this),this.onGamepadButtonDown=this.onGamepadButtonDown.bind(this),this.onGamepadButtonUp=this.onGamepadButtonUp.bind(this),this.vrGamepads.forEach(function(e){e.listenTo(e,"gamepadButtonDown",r.onGamepadButtonDown),e.listenTo(e,"gamepadButtonUp",r.onGamepadButtonUp)}),this.controllerState={initiatingController:null,selectedObject:null,previousParent:null,controlType:o.None}}return r(e,[{key:"destroy",value:function(){this.vrGamepads.forEach(function(e){return e.stopListening()})}},{key:"changeParent",value:function(e,t){var n=t.runtimeData,i=e.runtimeData;n&&i&&(i.matrix.premultiply(i.parent.matrixWorld),this.vrWorkMatrix.getInverse(n.matrixWorld),i.applyMatrix(this.vrWorkMatrix),e.setPosition(i.position.x,i.position.y,i.position.z),e.setQuaternion(i.quaternion.x,i.quaternion.y,i.quaternion.z,i.quaternion.w),e.setScale(i.scale.x,i.scale.y,i.scale.z),t.addChild(e))}},{key:"startTranslation",value:function(){this.changeParent(this.controllerState.selectedObject,this.controllerState.initiatingController)}},{key:"endTranslation",value:function(){this.changeParent(this.controllerState.selectedObject,this.controllerState.previousParent)}},{key:"onScaleUpdate",value:function(){this.vrGamepads[0].getPosition(this.vrWorkVector1),this.vrGamepads[1].getPosition(this.vrWorkVector2);var e=this.vrWorkVector1.sub(this.vrWorkVector2).length(),t=e/this.initialScaleDistance;this.vrWorkVector1.copy(this.initialScale).multiplyScalar(t),this.controllerState.selectedObject.setScale(this.vrWorkVector1.x,this.vrWorkVector1.y,this.vrWorkVector1.z)}},{key:"startScale",value:function(){this.vrGamepads[0].getPosition(this.vrWorkVector1),this.vrGamepads[1].getPosition(this.vrWorkVector2),this.controllerState.selectedObject.getScale(this.initialScale),this.initialScaleDistance=this.vrWorkVector1.sub(this.vrWorkVector2).length(),this.box3d.listenTo(this.box3d,"update",this.onScaleUpdate)}},{key:"endScale",value:function(){this.box3d.stopListening(this.box3d,"update",this.onScaleUpdate)}},{key:"onGamepadButtonUp",value:function(e,t){if(t===a.grabObject)if(this.controllerState.controlType===o.Translation)this.endTranslation(),this.controllerState.controlType=o.None,this.controllerState.selectedObject=null;else if(this.controllerState.controlType===o.Scale){this.controllerState.controlType=o.Translation,this.endScale();var n=this.vrGamepads.find(function(t){var n=t.getComponentByScriptId("motion_gamepad_device");return n&&n.getGamepad()!==e});this.controllerState.initiatingController=n,this.startTranslation()}}},{key:"onGamepadButtonDown",value:function(e,t){if(t===a.grabObject){if(this.controllerState.controlType===o.Translation)return this.controllerState.controlType=o.Scale,this.endTranslation(),void this.startScale();var n=this.vrGamepads.find(function(t){var n=t.getComponentByScriptId("motion_gamepad_device");return n&&n.getGamepad()===e}),i=n.getComponentByScriptId("intersection_checker"),r=i.checkIntersection(),s=void 0,l=Object.keys(r);if(l.length&&(s=r[l[0]].getInstanceTop()),s){if(this.vrGamepads.find(function(e){return s===e.getChild()}))return;this.controllerState.controlType=o.Translation,this.controllerState.selectedObject=s,this.controllerState.previousParent=s.getParentObject(),this.controllerState.initiatingController=n,this.startTranslation()}}}}]),e}();t.a=s},function(e,t,n){"use strict";function i(e){return[{id:"MAT_CAP_TEX",type:"texture2D",properties:{name:"Mat Cap Texture",imageId:"MAT_CAP_IMG",wrapModeU:"clampToEdge",wrapModeV:"clampToEdge",flipY:!0}},{id:"MAT_CAP_IMG",type:"image",properties:{name:"Mat Cap Image",width:256,height:256,stream:!1},representations:[{src:e+"third-party/model3d/"+r.N+"/matcap.png",isExternal:!0,contentType:"image/png",contentEncoding:"identity",width:256,height:256,compression:"zip"}]}]}var r=n(1);t.a=i},function(e,t){},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(8),s=n(202),l=n(1),u=[{NAME:"IFrame",CONSTRUCTOR:s.a,REP:l.O,EXT:["boxnote","boxdicom"]}],c=function(e){function t(){i(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.viewers=u,e}return o(t,e),t}(a.a);t.a=new c},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(9),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},u=function(e){function t(){return i(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"setup",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setup",this).call(this),this.iframeEl=this.containerEl.appendChild(document.createElement("iframe")),this.iframeEl.setAttribute("width","100%"),this.iframeEl.setAttribute("height","100%"),this.iframeEl.setAttribute("frameborder",0),this.loadTimeout=12e4}},{key:"load",value:function(){this.setup();var e="",n=this.options,i=n.file,r=n.sharedLink,o=void 0===r?"":r,a=n.appHost,s=i.extension;if("boxnote"===s){e=a+"/notes/"+i.id+"?isReadonly=1&is_preview=1";var u=o.indexOf("/s/");if(-1!==u){e=e+"&s="+o.substr(u+3)}}else"boxdicom"===s&&(e=a+"/dicom_viewer/"+i.id);this.iframeEl.src=e,this.loaded=!0,this.emit("load"),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"load",this).call(this)}}]),t}(a.a);t.a=u},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(8),s=n(204),l=n(11),u=n(1),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),h=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},d=[{NAME:"Office",CONSTRUCTOR:s.a,REP:u.O,EXT:["xlsx"]}],p=function(e){function t(){i(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.viewers=d,e}return o(t,e),c(t,[{key:"determineViewer",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=e.shared_link&&e.shared_link.is_password_enabled;return(!Object(l.d)(e,u.T)||e.size>5242880||i)&&n.push("Office"),h(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"determineViewer",this).call(this,e,n)}}]),t}(a.a);t.a=new p},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(9),s=n(5),l=n(39),u=n(1),c=n(11),h=n(4),d=n(2),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),f=function(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var r=Object.getPrototypeOf(e);return null===r?void 0:Object(d.k)(r,t,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},v=function(e){function t(e){i(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.print=n.print.bind(n),n}return o(t,e),p(t,[{key:"setup",value:function(){f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setup",this).call(this),this.platformSetup=!1,this.setupIframe(),this.initPrint(),this.setupPDFUrl(),this.loadTimeout=12e4}},{key:"destroy",value:function(){this.printBlob=null,this.printPopup&&this.printPopup.destroy(),this.printURL&&URL.revokeObjectURL(this.printURL),f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"load",value:function(){this.setup(),f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"load",this).call(this),this.loaded=!0,this.emit("load")}},{key:"print",value:function(){var e=this;if(!this.printBlob)return this.fetchPrintBlob(this.pdfUrl).then(this.print),void(this.printDialogTimeout=setTimeout(function(){e.printPopup.show("Preparing to print...","Print",function(){e.printPopup.hide(),e.browserPrint()}),e.printPopup.disableButton(),e.printDialogTimeout=null},500));this.printDialogTimeout||!this.printPopup.isVisible()?(clearTimeout(this.printDialogTimeout),this.browserPrint()):(this.printPopup.enableButton(),this.printPopup.messageEl.textContent="Ready to print.",this.printPopup.loadingIndicator.classList.add(u.A),this.printPopup.printCheckmark.classList.remove(u.A))}},{key:"initPrint",value:function(){this.printPopup=new l.a(this.containerEl);var e=document.createElement("div");e.className="bp-print-check "+u.A,e.innerHTML=h.r.trim();var t=document.createElement("div");t.classList.add("bp-crawler"),t.innerHTML="\n            <div></div>\n            <div></div>\n            <div></div>".trim(),this.printPopup.addContent(t,!0),this.printPopup.addContent(e,!0),this.printPopup.loadingIndicator=t,this.printPopup.printCheckmark=e}},{key:"setupPDFUrl",value:function(){var e=this.options.file,t=Object(c.f)(e,"pdf"),n=t.content.url_template;this.pdfUrl=this.createContentUrlWithAuthParams(n)}},{key:"setupIframe",value:function(){var e=this.options,t=e.appHost,n=e.apiHost,i=e.file,r=e.sharedLink,o=e.location.locale,a=this.createIframeElement();if(this.containerEl.appendChild(a),this.platformSetup){this.createFormElement(n,i.id,r,o).submit(),a.contentWindow.postMessage("Host_PostmessageReady",window.location.origin)}else a.src=this.setupRunmodeURL(t,i.id,r)}},{key:"setupRunmodeURL",value:function(e,t,n){var i="/integrations/officeonline/openExcelOnlinePreviewer",r=document.createElement("a");if(r.href=n,n){i=""+(r.protocol+"//"+r.hostname)+i;var o=n.split("/s/")[1];if(o)i=i+"?s="+o+"&fileId="+t;else{var a=r.hostname.split(".")[0];i=i+"?v="+r.href.split("/v/")[1]+"&vanity_subdomain="+a+"&fileId="+t}}else i=""+e+i+"?fileId="+t;return i}},{key:"setupWOPISrc",value:function(e,t,n){var i=e+"/wopi/files/";if(n){var r=n.split("/s/")[1];r&&(i=i+"s_"+r+"_f_")}return""+i+t}},{key:"createIframeElement",value:function(){var e=document.createElement("iframe");return e.setAttribute("width","100%"),e.setAttribute("height","100%"),e.setAttribute("frameborder",0),e.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms allow-popups"),this.platformSetup&&(e.setAttribute("allowfullscreen","true"),e.name="office-online-iframe",e.id="office-online-iframe"),e}},{key:"createFormElement",value:function(e,t,n,i){var r=this.setupWOPISrc(e,t,n),o={origin:window.location.origin},a=this.containerEl.appendChild(document.createElement("form"));a.setAttribute("action","https://excel.officeapps.live.com/x/_layouts/xlembed.aspx?ui="+i+"&rs="+i+"&WOPISrc="+r+"&sc="+JSON.stringify(o)),a.setAttribute("method","POST"),a.setAttribute("target","office-online-iframe");var s=document.createElement("input");s.setAttribute("name","access_token"),s.setAttribute("value",""+this.options.token),s.setAttribute("type","hidden");var l=document.createElement("input");return l.setAttribute("name","access_token_TTL"),l.setAttribute("value",0),l.setAttribute("type","hidden"),a.appendChild(s),a.appendChild(l),a}},{key:"fetchPrintBlob",value:function(e){var t=this;return Object(d.k)(e,"blob").then(function(e){t.printBlob=e})}},{key:"browserPrint",value:function(){if("function"==typeof window.navigator.msSaveOrOpenBlob){window.navigator.msSaveOrOpenBlob(this.printBlob,"print.pdf")?this.emit("printsuccess"):this.emit("printerror")}else{this.printURL||(this.printURL=URL.createObjectURL(this.printBlob));var e=window.open(this.printURL);if(e&&"function"==typeof e.print){var t=s.a.getName();"Chrome"===t?e.addEventListener("load",function(){e.print()}):"Safari"===t&&setTimeout(function(){e.print()},1e3)}!e||e.closed||void 0===e.closed?this.emit("printerror"):this.emit("printsuccess")}}}]),t}(a.a);t.a=v},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(){i(this,e),this.cache={}}return r(e,[{key:"set",value:function(e,t,n){this.cache[e]=t,n&&this.localStorageAvailable()&&localStorage.setItem(this.generateKey(e),JSON.stringify(t))}},{key:"unset",value:function(e){this.localStorageAvailable()&&localStorage.removeItem(this.generateKey(e)),delete this.cache[e]}},{key:"has",value:function(e){return this.inCache(e)||this.inLocalStorage(e)}},{key:"get",value:function(e){if(this.inCache(e))return this.cache[e];if(this.inLocalStorage(e)){var t=localStorage.getItem(this.generateKey(e));if(t)return t=JSON.parse(t),this.cache[e]=t,t}}},{key:"inCache",value:function(e){return{}.hasOwnProperty.call(this.cache,e)}},{key:"inLocalStorage",value:function(e){return!!this.localStorageAvailable()&&!!localStorage.getItem(this.generateKey(e))}},{key:"localStorageAvailable",value:function(){if(void 0===this.available)try{var e="__storage_test__";localStorage.setItem(e,e),localStorage.removeItem(e),this.available=!0}catch(e){this.available=!1}return this.available}},{key:"generateKey",value:function(e){return"bp-"+e}}]),e}();t.a=o},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(9),s=n(11),l=n(5),u=n(1),c=n(4),h=n(207),d=(n.n(h),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),p=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},f=function(e){function t(e){i(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.download=n.download.bind(n),n}return o(t,e),d(t,[{key:"setup",value:function(){p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setup",this).call(this),this.infoEl=this.containerEl.appendChild(document.createElement("div")),this.iconEl=this.infoEl.appendChild(document.createElement("div")),this.iconEl.className="bp-icon bp-icon-file",this.messageEl=this.infoEl.appendChild(document.createElement("div")),this.infoEl.className="bp-error"}},{key:"finishLoadingSetup",value:function(){}},{key:"destroy",value:function(){this.downloadBtnEl&&this.downloadBtnEl.removeEventListener("click",this.download),p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"load",value:function(e){this.setup();var t=this.options,n=t.file,i=t.showDownload;if(this.icon=Object(c.x)("FILE_DEFAULT"),n)switch(n.extension){case"zip":case"tgz":case"flv":this.icon=Object(c.w)(n.extension)}e=e instanceof Error?e:new Error("We're sorry, the preview didn't load. This file type may not be supported.");var r=e.displayMessage||e.message;r="string"==typeof r?r:"We're sorry, the preview didn't load. This file type may not be supported.",this.iconEl.innerHTML=this.icon,this.messageEl.textContent=r,Object(s.d)(n,u.T)&&i&&l.a.canDownload()&&this.addDownloadButton(),this.loaded=!0,this.emit("load",{error:e.message||r})}},{key:"addDownloadButton",value:function(){this.downloadEl=this.infoEl.appendChild(document.createElement("div")),this.downloadEl.classList.add("bp-error-download"),this.downloadBtnEl=this.downloadEl.appendChild(document.createElement("button")),this.downloadBtnEl.classList.add("bp-btn"),this.downloadBtnEl.classList.add("bp-btn-primary"),this.downloadBtnEl.textContent="Download",this.downloadBtnEl.addEventListener("click",this.download)}},{key:"download",value:function(){this.emit("download")}}]),t}(a.a);t.a=f},function(e,t){},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=n(209),o=n(210),a=n.n(o),s=n(64),l=n(2),u=n(1),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),h=function(){function e(){i(this,e)}return c(e,[{key:"cleanup",value:function(){this.progressBar&&this.progressBar.destroy(),this.contentContainer&&this.contentContainer.removeEventListener("mousemove",this.mousemoveHandler),this.container&&(this.container.innerHTML=""),document.removeEventListener("keydown",this.keydownHandler)}},{key:"setup",value:function(e,t,n,i,o){return this.container=e.container,this.leftHandler=n,this.rightHandler=i,this.mousemoveHandler=o,this.keydownHandler=t,"string"==typeof this.container?this.container=document.querySelector(this.container):this.container||(this.container=document.body),this.cleanup(),Object(l.m)(this.container,a.a),this.container=this.container.querySelector(u._3),this.contentContainer=this.container.querySelector(u.X),"none"!==e.header&&this.setupHeader(e.header,e.logoUrl),this.progressBar=new r.a(this.container),this.setupLoading(),document.addEventListener("keydown",this.keydownHandler),this.container}},{key:"showNavigation",value:function(e,t){if(this.container){var n=this.container.querySelector(u._10),i=this.container.querySelector(u._11);if(n&&i&&(n.title="Previous file",i.title="Next file",n.classList.add(u.A),i.classList.add(u.A),n.removeEventListener("click",this.leftHandler),i.removeEventListener("click",this.rightHandler),this.contentContainer.removeEventListener("mousemove",this.mousemoveHandler),!(t.length<2))){this.contentContainer.addEventListener("mousemove",this.mousemoveHandler);var r=t.indexOf(e);r>0&&(n.addEventListener("click",this.leftHandler),n.classList.remove(u.A)),r<t.length-1&&(i.addEventListener("click",this.rightHandler),i.classList.remove(u.A))}}}},{key:"showPrintButton",value:function(e){var t=this.container.querySelector(u._2);t&&(t.title="Print",t.classList.remove(u.A),t.addEventListener("click",e))}},{key:"showDownloadButton",value:function(e){var t=this.container.querySelector(u._0);t&&(t.title="Download",t.classList.remove(u.A),t.addEventListener("click",e))}},{key:"showLoadingDownloadButton",value:function(e){var t=this.container.querySelector(u._1);t&&(t.title="Download",t.classList.remove(u.B),t.addEventListener("click",e))}},{key:"showLoadingIndicator",value:function(){this.contentContainer&&this.contentContainer.classList.remove(u.I)}},{key:"hideLoadingIndicator",value:function(){if(this.contentContainer){this.contentContainer.classList.add(u.I);var e=this.contentContainer.querySelector(u._4);e&&e.classList.remove(u.A),this.notification=new s.a(this.contentContainer)}}},{key:"startProgressBar",value:function(){this.progressBar.start()}},{key:"finishProgressBar",value:function(){this.progressBar.finish()}},{key:"showNotification",value:function(e,t){this.notification.show(e,t)}},{key:"hideNotification",value:function(){this.notification.hide()}},{key:"replaceHeader",value:function(e){var t=this.container.querySelectorAll("."+u.g);[].forEach.call(t,function(e){e.classList.add(u.A)}),this.container.querySelector(e).classList.remove(u.A)}},{key:"setupHeader",value:function(e,t){var n=this.container.firstElementChild;if(n.className=u.g+" "+u.c,this.contentContainer.classList.add(u.f),"dark"===e&&this.container.classList.add(u.t),t){n.querySelector(u._9).classList.add(u.A);var i=n.querySelector(u._8);i.src=t,i.classList.remove(u.A)}}},{key:"setupLoading",value:function(){var e=this.container.querySelector(u._7);if(e){e.querySelector(u._6).textContent="Loading Preview...";e.querySelector(u._1).textContent="Download File"}}}]),e}();t.a=h},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=n(1),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(t){i(this,e),this.mountEl=t,this.containerEl=document.createElement("div"),this.containerEl.classList.add(r.s),this.progressBarEl=document.createElement("div"),this.progressBarEl.classList.add(r.r),this.containerEl.appendChild(this.progressBarEl),this.mountEl.appendChild(this.containerEl)}return o(e,[{key:"destroy",value:function(){this.progressBarEl&&(clearInterval(this.progressInterval),this.mountEl&&this.mountEl.removeChild(this.containerEl),this.containerEl=null,this.progressBarEl=null)}},{key:"start",value:function(){var e=this;this.showProgress(),this.progress=0,this.progressInterval=setInterval(function(){if(e.progress>=95)return void clearInterval(e.progressInterval);e.progress>=80?e.progress+=Math.random():e.progress+=5*Math.random(),e.updateProgress(e.progress)},150)}},{key:"finish",value:function(){this.hideProgress(),clearInterval(this.progressInterval),this.updateProgress(100)}},{key:"updateProgress",value:function(e){this.progressBarEl&&(this.progressBarEl.style.width=e+"%")}},{key:"showProgress",value:function(){this.progressBarEl&&this.progressBarEl.classList.add(r.G)}},{key:"hideProgress",value:function(){this.progressBarEl&&this.progressBarEl.classList.remove(r.G)}}]),e}();t.a=a},function(e,t){e.exports='<div class="bp-container">\n    <div class="bp-is-hidden">\n        <span class="bp-default-logo">\n            <svg height="25" width="45" viewBox="0 0 98 52" focusable="false">\n                <path d="M95.34 44.7c1.1 1.53.8 3.66-.75 4.8-1.56 1.13-3.74.84-4.93-.64l-7.8-10.23-7.82 10.23c-1.2 1.48-3.36 1.77-4.9.63-1.55-1.15-1.87-3.28-.75-4.8l9.06-11.86L68.4 21c-1.1-1.54-.8-3.67.75-4.8 1.55-1.14 3.72-.85 4.9.63l7.82 10.23 7.8-10.23c1.2-1.48 3.38-1.77 4.92-.63 1.52 1.13 1.84 3.26.73 4.8L86.3 32.84l9.04 11.85zM53.9 43.22c-5.86 0-10.6-4.65-10.6-10.4 0-5.72 4.74-10.37 10.6-10.37 5.85 0 10.6 4.65 10.6 10.38 0 5.74-4.75 10.4-10.6 10.4zm-31.23 0c-5.85 0-10.6-4.65-10.6-10.4 0-5.72 4.75-10.37 10.6-10.37 5.86 0 10.6 4.65 10.6 10.38 0 5.74-4.74 10.4-10.6 10.4zm31.22-27.7c-6.78 0-12.66 3.73-15.63 9.2-2.97-5.47-8.84-9.2-15.6-9.2-4 0-7.66 1.3-10.6 3.46V4.38C12.02 2.52 10.45 1 8.53 1 6.6 1 5.03 2.5 5 4.4v28.7c.16 9.43 8 17.03 17.67 17.03 6.77 0 12.64-3.73 15.6-9.2 2.98 5.47 8.86 9.2 15.62 9.2 9.74 0 17.66-7.75 17.66-17.32 0-9.55-7.92-17.3-17.68-17.3z"></path>\n            </svg>\n        </span>\n        <img class="bp-is-hidden bp-custom-logo"></img>\n        <div class="bp-header-btns">\n            <button class="bp-btn-plain bp-btn-annotate-draw bp-is-hidden">\n                <svg class="bp-btn-annotate-draw-enter" width="22" height="21" viewBox="0 0 14.88 14.88" focusable="false">\n                  <path d="M11.65,6.64,5.11,13.17.06,14.94,1.83,9.89,8.37,3.35Zm1.41-1.41L9.78,1.94,11.37.35a1,1,0,0,1,1.41,0l1.87,1.87a1,1,0,0,1,0,1.41Z" transform="translate(-0.06 -0.06)" fill-rule="evenodd"/>\n                </svg>\n            </button>\n            <button class="bp-btn-plain bp-btn-annotate-point bp-is-hidden">\n                <svg width="22" height="21" viewBox="0 0 22 21" focusable="false">\n                  <path d="M11 21l-4-4H1.99C.89 17 0 16.11 0 15V2C0 .895.89 0 1.99 0h18.02C21.11 0 22 .89 22 2v13c0 1.105-.89 2-1.99 2H15l-4 4zm-7-9.5c0-.276.228-.5.51-.5h8.98c.282 0 .51.232.51.5 0 .276-.228.5-.51.5H4.51c-.282 0-.51-.232-.51-.5zm0-3c0-.276.23-.5.5-.5h11c.276 0 .5.232.5.5 0 .276-.23.5-.5.5h-11c-.276 0-.5-.232-.5-.5zm0-3c0-.276.22-.5.498-.5h13.004c.275 0 .498.232.498.5 0 .276-.22.5-.498.5H4.498C4.223 6 4 5.768 4 5.5z" fill-rule="evenodd"/>\n                </svg>\n            </button>\n            <button class="bp-btn-plain bp-btn-print bp-is-hidden">\n                <svg height="24" viewBox="0 0 24 24" width="24" focusable="false">\n                    <path d="M19 8H5c-1.66 0-3 1.34-3 3v6h4v4h12v-4h4v-6c0-1.66-1.34-3-3-3zm-3 11H8v-5h8v5zm3-7c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm-1-9H6v4h12V3z"/>\n                    <path d="M0 0h24v24H0z" fill="none"/>\n                </svg>\n            </button>\n            <button class="bp-btn-plain bp-btn-download bp-is-hidden">\n                <svg height="24" viewBox="0 0 24 24" width="24" focusable="false">\n                    <path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/>\n                    <path d="M0 0h24v24H0z" fill="none"/>\n                </svg>\n            </button>\n        </div>\n    </div>\n    <div class="bp">\n        <div class="bp-loading-wrapper">\n            <div class="bp-loading">\n                <div class="bp-icon bp-icon-file"></div>\n                <div class="bp-crawler-wrapper">\n                    <div class="bp-crawler">\n                        <div></div>\n                        <div></div>\n                        <div></div>\n                    </div>\n                </div>\n                <span class="bp-loading-text"></span>\n            </div>\n            <div class="bp-loading-btn-container">\n                <button class="bp-btn-plain bp-btn-loading-download bp-is-invisible"></button>\n            </div>\n        </div>\n    </div>\n    <button class="bp-btn-plain bp-navigate bp-navigate-left bp-is-hidden">\n        <svg viewBox="0 0 48 48" focusable="false">\n            <path fill="#494949" stroke="#DCDCDC" stroke-miterlimit="10" d="M30.8,33.2L21.7,24l9.2-9.2L28,12L16,24l12,12L30.8,33.2z"/>\n            <path display="none" fill="none" d="M0,0h48v48H0V0z"/>\n        </svg>\n    </button>\n    <button class="bp-btn-plain bp-navigate bp-navigate-right bp-is-hidden">\n        <svg viewBox="0 0 48 48" focusable="false">\n            <path fill="#494949" stroke="#DCDCDC" stroke-miterlimit="10" d="M17.2,14.8l9.2,9.2l-9.2,9.2L20,36l12-12L20,12L17.2,14.8z"/>\n            <path display="none" fill="none" d="M48,48H0L0,0l48,0V48z"/>\n        </svg>\n    </button>\n</div>\n'},function(e,t,n){"use strict";function i(e){return"file_"+e}function r(e,t){var n={};return e.forEach(function(e){var r=i(e);if(t&&"string"!=typeof t)if("object"===(void 0===t?"undefined":a(t))&&t[r])n[e]=t[r];else{if("object"!==(void 0===t?"undefined":a(t))||!t[e])throw s;n[e]=t[e]}else n[e]=t}),n}function o(e,t){if(!e)return Promise.reject(s);var n=void 0;return n=Array.isArray(e)?e:[e],t&&"string"!=typeof t?new Promise(function(e,o){var a=n.map(function(e){return i(e)});t(a).then(function(t){try{e(r(n,t))}catch(e){o(e)}})}):Promise.resolve(r(n,t))}t.a=o;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=new Error("Bad Auth Token!")},function(e,t){}]);