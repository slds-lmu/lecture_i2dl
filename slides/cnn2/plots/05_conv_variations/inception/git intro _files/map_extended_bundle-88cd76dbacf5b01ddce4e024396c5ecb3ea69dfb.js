webpackJsonp([157],{"+X7E":function(module,exports,__webpack_require__){var content=__webpack_require__("8D2L");"string"==typeof content&&(content=[[module.i,content,""]]);var options={hmr:!0};options.transform=void 0;__webpack_require__("0tV6")(content,options);content.locals&&(module.exports=content.locals)},"0tV6":function(module,exports,__webpack_require__){function addStylesToDom(styles,options){for(var i=0;i<styles.length;i++){var item=styles[i],domStyle=stylesInDom[item.id];if(domStyle){domStyle.refs++;for(var j=0;j<domStyle.parts.length;j++)domStyle.parts[j](item.parts[j]);for(;j<item.parts.length;j++)domStyle.parts.push(addStyle(item.parts[j],options))}else{for(var parts=[],j=0;j<item.parts.length;j++)parts.push(addStyle(item.parts[j],options));stylesInDom[item.id]={id:item.id,refs:1,parts:parts}}}}function listToStyles(list,options){for(var styles=[],newStyles={},i=0;i<list.length;i++){var item=list[i],id=options.base?item[0]+options.base:item[0],css=item[1],media=item[2],sourceMap=item[3],part={css:css,media:media,sourceMap:sourceMap};newStyles[id]?newStyles[id].parts.push(part):styles.push(newStyles[id]={id:id,parts:[part]})}return styles}function insertStyleElement(options,style){var target=getElement(options.insertInto);if(!target)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var lastStyleElementInsertedAtTop=stylesInsertedAtTop[stylesInsertedAtTop.length-1];if("top"===options.insertAt)lastStyleElementInsertedAtTop?lastStyleElementInsertedAtTop.nextSibling?target.insertBefore(style,lastStyleElementInsertedAtTop.nextSibling):target.appendChild(style):target.insertBefore(style,target.firstChild),stylesInsertedAtTop.push(style);else if("bottom"===options.insertAt)target.appendChild(style);else{if("object"!=typeof options.insertAt||!options.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var nextSibling=getElement(options.insertInto+" "+options.insertAt.before);target.insertBefore(style,nextSibling)}}function removeStyleElement(style){if(null===style.parentNode)return!1;style.parentNode.removeChild(style);var idx=stylesInsertedAtTop.indexOf(style);idx>=0&&stylesInsertedAtTop.splice(idx,1)}function createStyleElement(options){var style=document.createElement("style");return options.attrs.type="text/css",addAttrs(style,options.attrs),insertStyleElement(options,style),style}function createLinkElement(options){var link=document.createElement("link");return options.attrs.type="text/css",options.attrs.rel="stylesheet",addAttrs(link,options.attrs),insertStyleElement(options,link),link}function addAttrs(el,attrs){Object.keys(attrs).forEach(function(key){el.setAttribute(key,attrs[key])})}function addStyle(obj,options){var style,update,remove,result;if(options.transform&&obj.css){if(!(result=options.transform(obj.css)))return function(){};obj.css=result}if(options.singleton){var styleIndex=singletonCounter++;style=singleton||(singleton=createStyleElement(options)),update=applyToSingletonTag.bind(null,style,styleIndex,!1),remove=applyToSingletonTag.bind(null,style,styleIndex,!0)}else obj.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(style=createLinkElement(options),update=updateLink.bind(null,style,options),remove=function(){removeStyleElement(style),style.href&&URL.revokeObjectURL(style.href)}):(style=createStyleElement(options),update=applyToTag.bind(null,style),remove=function(){removeStyleElement(style)});return update(obj),function(newObj){if(newObj){if(newObj.css===obj.css&&newObj.media===obj.media&&newObj.sourceMap===obj.sourceMap)return;update(obj=newObj)}else remove()}}function applyToSingletonTag(style,index,remove,obj){var css=remove?"":obj.css;if(style.styleSheet)style.styleSheet.cssText=replaceText(index,css);else{var cssNode=document.createTextNode(css),childNodes=style.childNodes;childNodes[index]&&style.removeChild(childNodes[index]),childNodes.length?style.insertBefore(cssNode,childNodes[index]):style.appendChild(cssNode)}}function applyToTag(style,obj){var css=obj.css,media=obj.media;if(media&&style.setAttribute("media",media),style.styleSheet)style.styleSheet.cssText=css;else{for(;style.firstChild;)style.removeChild(style.firstChild);style.appendChild(document.createTextNode(css))}}function updateLink(link,options,obj){var css=obj.css,sourceMap=obj.sourceMap,autoFixUrls=void 0===options.convertToAbsoluteUrls&&sourceMap;(options.convertToAbsoluteUrls||autoFixUrls)&&(css=fixUrls(css)),sourceMap&&(css+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))))+" */");var blob=new Blob([css],{type:"text/css"}),oldSrc=link.href;link.href=URL.createObjectURL(blob),oldSrc&&URL.revokeObjectURL(oldSrc)}var stylesInDom={},isOldIE=function(fn){var memo;return function(){return void 0===memo&&(memo=fn.apply(this,arguments)),memo}}(function(){return window&&document&&document.all&&!window.atob}),getElement=function(fn){var memo={};return function(selector){if(void 0===memo[selector]){var styleTarget=fn.call(this,selector);if(styleTarget instanceof window.HTMLIFrameElement)try{styleTarget=styleTarget.contentDocument.head}catch(e){styleTarget=null}memo[selector]=styleTarget}return memo[selector]}}(function(target){return document.querySelector(target)}),singleton=null,singletonCounter=0,stylesInsertedAtTop=[],fixUrls=__webpack_require__("LxwL");module.exports=function(list,options){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");options=options||{},options.attrs="object"==typeof options.attrs?options.attrs:{},options.singleton||"boolean"==typeof options.singleton||(options.singleton=isOldIE()),options.insertInto||(options.insertInto="head"),options.insertAt||(options.insertAt="bottom");var styles=listToStyles(list,options);return addStylesToDom(styles,options),function(newList){for(var mayRemove=[],i=0;i<styles.length;i++){var item=styles[i],domStyle=stylesInDom[item.id];domStyle.refs--,mayRemove.push(domStyle)}if(newList){addStylesToDom(listToStyles(newList,options),options)}for(var i=0;i<mayRemove.length;i++){var domStyle=mayRemove[i];if(0===domStyle.refs){for(var j=0;j<domStyle.parts.length;j++)domStyle.parts[j]();delete stylesInDom[domStyle.id]}}}};var replaceText=function(){var textStore=[];return function(index,replacement){return textStore[index]=replacement,textStore.filter(Boolean).join("\n")}}()},"8D2L":function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__("Vmy+")(void 0),exports.push([module.i,'/* Chat Window Styles */\n/* Settings - imports, globals, colors */\n/* Grey Tones (Font Colors) */\n/* default font-color */\n/* border-color; placeholder-color; separator */\n/* Other Colors */\n/* used for selected items with light blue bg*/\n/* Global Settings */\n/* Font Sizes */\n/* Font Colors */\n/* Font Weights */\n/* Sketch: Black */\n/* Sketch: Roman */\n/* Line Heights */\n/* Border Colors */\n/* Border Radii */\n/* Box Shadows */\n/* Tools - mixins, global helpers */\n/* Transitions and Animations */\n/* Other */\n/* hyphenation lets firefox use word-break: break-all */\n/* on retina  */\n/* standard popover arrow - color can be customized in subclasses */\n.chat {\n  width: 320px;\n  overflow: hidden; }\n  .chat .bubble {\n    word-wrap: break-word;\n    max-width: 250px;\n    position: relative;\n    padding: 5px 15px;\n    border-radius: 15px;\n    margin-bottom: 5px;\n    display: inline-block; }\n    .chat .bubble p {\n      word-break: break-word; }\n      .chat .bubble p a {\n        color: white;\n        text-decoration: underline; }\n    .chat .bubble img {\n      width: 20px;\n      height: 20px;\n      display: inline-block;\n      vertical-align: text-bottom; }\n  .chat .from-me {\n    -ms-flex-item-align: end;\n        align-self: flex-end; }\n  .chat .from-me .bubble {\n    color: white;\n    background: #00AAFF; }\n    .chat .from-me .bubble:before {\n      content: "";\n      position: absolute;\n      z-index: -1;\n      bottom: -2px;\n      right: -5px;\n      height: 15px;\n      width: 20px;\n      background-color: #00AAFF;\n      border-bottom-left-radius: 15px; }\n    .chat .from-me .bubble:after {\n      content: "";\n      position: absolute;\n      z-index: 1;\n      bottom: -4px;\n      right: -56px;\n      width: 26px;\n      height: 15px;\n      background: white;\n      border-bottom-left-radius: 5px;\n      -webkit-transform: translate(-30px, -2px);\n              transform: translate(-30px, -2px); }\n  .chat .from-them .bubble {\n    color: #3D474D;\n    background: #F0F5F7; }\n    .chat .from-them .bubble:before {\n      content: "";\n      position: absolute;\n      z-index: 2;\n      bottom: -2px;\n      left: -7px;\n      height: 15px;\n      width: 20px;\n      background-color: #F0F5F7;\n      border-bottom-right-radius: 15px; }\n    .chat .from-them .bubble:after {\n      content: "";\n      position: absolute;\n      z-index: 3;\n      bottom: -2px;\n      left: -26px;\n      width: 26px;\n      height: 15px;\n      background: white;\n      border-bottom-right-radius: 5px; }\n\n#chat_messages img {\n  width: 24px;\n  height: 24px;\n  display: inline-block; }\n',""])},BS4b:function(module,__webpack_exports__,__webpack_require__){"use strict";(function(React){var __WEBPACK_IMPORTED_MODULE_0__chatMessage__=__webpack_require__("gcQM"),MessageList=function(props){var messages=props.messages,height=props.height,resendMessage=props.resendMessage;return React.createElement("div",{className:"pt-16 h-flex-column"},messages.map(function(message,index){return React.createElement(__WEBPACK_IMPORTED_MODULE_0__chatMessage__.a,{key:index,message:message,height:height,resendMessage:resendMessage})}))};__webpack_exports__.a=MessageList}).call(__webpack_exports__,__webpack_require__("nakD"))},CgDZ:function(module,exports,__webpack_require__){function webpackAsyncContext(req){var ids=map[req];return ids?Promise.all(ids.slice(1).map(__webpack_require__.e)).then(function(){return __webpack_require__(ids[0])}):Promise.reject(new Error("Cannot find module '"+req+"'."))}var map={"./app":["hqmG"],"./app.js":["hqmG"],"./canvas/canvas":["gp2O",62],"./canvas/canvas.js":["gp2O",62],"./canvas/contextMenu":["1M8a",147],"./canvas/contextMenu.js":["1M8a",147],"./canvas/copyPaste":["d407"],"./canvas/copyPaste.js":["d407"],"./canvas/layout":["TEdV",111],"./canvas/layout.js":["TEdV",111],"./canvas/mapView":["Rq/x",63],"./canvas/mapView.js":["Rq/x",63],"./canvas/views/block":["cQwG",76],"./canvas/views/block.js":["cQwG",76],"./canvas/views/draggable":["wQol",146],"./canvas/views/draggable.js":["wQol",146],"./canvas/views/editable":["2UzH",82],"./canvas/views/editable.js":["2UzH",82],"./canvas/views/editableBlock":["fGk7",145],"./canvas/views/editableBlock.js":["fGk7",145],"./canvas/views/graphics":["t8zp"],"./canvas/views/graphics.js":["t8zp"],"./canvas/views/imageBlock":["7RHa"],"./canvas/views/imageBlock.js":["7RHa"],"./canvas/views/resizable":["2J63",144],"./canvas/views/resizable.js":["2J63",144],"./canvas/views/selectable":["tCwE",143],"./canvas/views/selectable.js":["tCwE",143],"./canvas/views/vboundary":["7DNH"],"./canvas/views/vboundary.js":["7DNH"],"./canvas/views/vconnection":["xAzy",59],"./canvas/views/vconnection.js":["xAzy",59],"./canvas/views/vconnectionEditor":["vxEF",142],"./canvas/views/vconnectionEditor.js":["vxEF",142],"./canvas/views/vconnectionHandler":["VQwZ",59],"./canvas/views/vconnectionHandler.js":["VQwZ",59],"./canvas/views/vgenericNode":["Vw2l",58],"./canvas/views/vgenericNode.js":["Vw2l",58],"./canvas/views/vnode":["NCMo",58],"./canvas/views/vnode.js":["NCMo",58],"./canvas/views/vnodeIcon":["UeFO",141],"./canvas/views/vnodeIcon.js":["UeFO",141],"./canvas/views/vnodeImage":["HM34"],"./canvas/views/vnodeImage.js":["HM34"],"./canvas/views/vnodeVideo":["Qy9x",140],"./canvas/views/vnodeVideo.js":["Qy9x",140],"./canvas/views/vroot":["Wp5U",69],"./canvas/views/vroot.js":["Wp5U",69],"./canvas/views/vrootChild":["rX76",139],"./canvas/views/vrootChild.js":["rX76",139],"./mm/plugins/wundermap":["boRQ",55],"./mm/plugins/wundermap.js":["boRQ",55],"./models/attachment":["j1ii",138],"./models/attachment.js":["j1ii",138],"./models/boundary":["qlsV"],"./models/boundary.js":["qlsV"],"./models/boundaryStyle":["xfYt"],"./models/boundaryStyle.js":["xfYt"],"./models/buffer":["1cfn"],"./models/buffer.js":["1cfn"],"./models/change":["TKta",66],"./models/change.js":["TKta",66],"./models/chatModel":["9Oqg"],"./models/chatModel.js":["9Oqg"],"./models/connectionModel":["/dW8",87],"./models/connectionModel.js":["/dW8",87],"./models/font":["6bYh"],"./models/font.js":["6bYh"],"./models/iconModel":["q3Rn",137],"./models/iconModel.js":["q3Rn",137],"./models/ideaComment":["ZfKP",136],"./models/ideaComment.js":["ZfKP",136],"./models/ideaImage":["oMUV",135],"./models/ideaImage.js":["oMUV",135],"./models/ideaProperty":["3Kh2",134],"./models/ideaProperty.js":["3Kh2",134],"./models/ideaVideo":["Kh9o",133],"./models/ideaVideo.js":["Kh9o",133],"./models/ideaVote":["00kP"],"./models/ideaVote.js":["00kP"],"./models/mapTheme":["r+xB"],"./models/mapTheme.js":["r+xB"],"./models/node":["HqoD",73],"./models/node.js":["HqoD",73],"./models/poller":["ahzF",132],"./models/poller.js":["ahzF",132],"./models/server":["jmxU",110],"./models/server.js":["jmxU",110],"./models/style":["FKf5"],"./models/style.js":["FKf5"],"./models/task":["AGfX",131],"./models/task.js":["AGfX",131],"./models/tree":["fSlT",71],"./models/tree.js":["fSlT",71],"./models/userModel":["gz1n"],"./models/userModel.js":["gz1n"],"./ui/attachmentViewer/view":["jMx0",112],"./ui/attachmentViewer/view.js":["jMx0",112],"./ui/boundaries":["1umx",54],"./ui/boundaries.js":["1umx",54],"./ui/customizeBoundary":["1QqJ",90],"./ui/customizeBoundary.js":["1QqJ",90],"./ui/customizeStyle":["UObq",78],"./ui/customizeStyle.js":["UObq",78],"./ui/doodling":["rg7Z",100],"./ui/doodling.js":["rg7Z",100],"./ui/filter":["QHRq",67],"./ui/filter.js":["QHRq",67],"./ui/footer":["k1IG"],"./ui/footer.js":["k1IG"],"./ui/footerPublic":["geal",130],"./ui/footerPublic.js":["geal",130],"./ui/header":["WGdr",65],"./ui/header.js":["WGdr",65],"./ui/hints":["qNKU"],"./ui/hints.js":["qNKU"],"./ui/history/history":["tt9h",72],"./ui/history/history.js":["tt9h",72],"./ui/history/revisionsBrowser":["i9TI",57],"./ui/history/revisionsBrowser.js":["i9TI",57],"./ui/history/revisionsSlider":["Lggz",57],"./ui/history/revisionsSlider.js":["Lggz",57],"./ui/history/slider":["Dxm5",129],"./ui/history/slider.js":["Dxm5",129],"./ui/history/utils":["OgPf",57],"./ui/history/utils.js":["OgPf",57],"./ui/menu":["qlDW"],"./ui/menu.js":["qlDW"],"./ui/message":["62Jj",128],"./ui/message.js":["62Jj",128],"./ui/onboarding/hintsPopover":["Hnw4",70],"./ui/onboarding/hintsPopover.js":["Hnw4",70],"./ui/onboarding/progressPopover":["fGUG",109],"./ui/onboarding/progressPopover.js":["fGUG",109],"./ui/onboarding/tutorial":["FlJR",68],"./ui/onboarding/tutorial.js":["FlJR",68],"./ui/options":["4KFD"],"./ui/options.js":["4KFD"],"./ui/presentation/controls":["INsm",127],"./ui/presentation/controls.js":["INsm",127],"./ui/presentation/player":["izkM",126],"./ui/presentation/player.js":["izkM",126],"./ui/presentation/presentation":["yj88",101],"./ui/presentation/presentation.js":["yj88",101],"./ui/presentation/slideshow":["qQu+",81],"./ui/presentation/slideshow.js":["qQu+",81],"./ui/preview":["/t6o",92],"./ui/preview.js":["/t6o",92],"./ui/print/print":["7Qzd",125],"./ui/print/print.js":["7Qzd",125],"./ui/sidebar":["qmQO",64],"./ui/sidebar.js":["qmQO",64],"./ui/sidebar/attachmentsWidget":["iy3A",93],"./ui/sidebar/attachmentsWidget.js":["iy3A",93],"./ui/sidebar/boundariesWidget":["49TO",108],"./ui/sidebar/boundariesWidget.js":["49TO",108],"./ui/sidebar/colorsWidget":["zDP6",99],"./ui/sidebar/colorsWidget.js":["zDP6",99],"./ui/sidebar/commentsWidget":["L/YL",86],"./ui/sidebar/commentsWidget.js":["L/YL",86],"./ui/sidebar/formatWidget":["6B3d",98],"./ui/sidebar/formatWidget.js":["6B3d",98],"./ui/sidebar/iconsWidget":["3sJ7",77],"./ui/sidebar/iconsWidget.js":["3sJ7",77],"./ui/sidebar/iconsWidgetExpanded/icon":["PlM2",124],"./ui/sidebar/iconsWidgetExpanded/icon.js":["PlM2",124],"./ui/sidebar/iconsWidgetExpanded/iconLibrary":["j0/H",107],"./ui/sidebar/iconsWidgetExpanded/iconLibrary.js":["j0/H",107],"./ui/sidebar/iconsWidgetExpanded/iconsWidgetExpanded":["ugn0",84],"./ui/sidebar/iconsWidgetExpanded/iconsWidgetExpanded.js":["ugn0",84],"./ui/sidebar/imagesWidget":["ZjT+",74],"./ui/sidebar/imagesWidget.js":["ZjT+",74],"./ui/sidebar/linksWidget":["079/",97],"./ui/sidebar/linksWidget.js":["079/",97],"./ui/sidebar/notesWidget":["G8SJ",83],"./ui/sidebar/notesWidget.js":["G8SJ",83],"./ui/sidebar/stylesWidget":["YQ4/",106],"./ui/sidebar/stylesWidget.js":["YQ4/",106],"./ui/sidebar/tabbedWidgetContainer":["twRW",105],"./ui/sidebar/tabbedWidgetContainer.js":["twRW",105],"./ui/sidebar/tasksWidget":["UWmw",91],"./ui/sidebar/tasksWidget.js":["UWmw",91],"./ui/sidebar/videosWidget":["cdGT",75],"./ui/sidebar/videosWidget.js":["cdGT",75],"./ui/sidebar/widget":["A9ap",123],"./ui/sidebar/widget.js":["A9ap",123],"./ui/slide":["GgL9",122],"./ui/slide.js":["GgL9",122],"./ui/styles":["H+A+",52],"./ui/styles.js":["H+A+",52],"./ui/teaser":["3R9V",121],"./ui/teaser.js":["3R9V",121],"./ui/themes":["uiuD",51],"./ui/themes.js":["uiuD",51],"./ui/users":["ePfb",120],"./ui/users.js":["ePfb",120],"./ui/wheelScroll":["vQBY",96],"./ui/wheelScroll.js":["vQBY",96],"./ui/zoom":["sNkp",89],"./ui/zoom.js":["sNkp",89],"./utils/constants":["67vC"],"./utils/constants.js":["67vC"],"./utils/customEvents":["xUHV"],"./utils/customEvents.js":["xUHV"],"./utils/googleSearch":["vLs6",119],"./utils/googleSearch.js":["vLs6",119],"./utils/imageSearch":["aVfQ",80],"./utils/imageSearch.js":["aVfQ",80],"./utils/images":["+ptD",118],"./utils/images.js":["+ptD",118],"./utils/layouter":["oxsE",117],"./utils/layouter.js":["oxsE",117],"./utils/math":["3Ox4"],"./utils/math.js":["3Ox4"],"./utils/meistertask/helpers":["H1Wq",116],"./utils/meistertask/helpers.js":["H1Wq",116],"./utils/meistertask/meistertask":["MSez",79],"./utils/meistertask/meistertask.js":["MSez",79],"./utils/meistertask/meistertask_picker":["e4gE",115],"./utils/meistertask/meistertask_picker.js":["e4gE",115],"./utils/meistertask/project_creator":["r3wk",95],"./utils/meistertask/project_creator.js":["r3wk",95],"./utils/searchWrapper":["wvK4",114],"./utils/searchWrapper.js":["wvK4",114],"./utils/skoletube/attachments/attachments":["PXir",53],"./utils/skoletube/attachments/attachments.js":["PXir",53],"./utils/skoletube/attachments/search":["4B9/",104],"./utils/skoletube/attachments/search.js":["4B9/",104],"./utils/skoletube/attachments/searchWrapper":["WvAO",88],"./utils/skoletube/attachments/searchWrapper.js":["WvAO",88],"./utils/skoletube/images/search":["MQVt",103],"./utils/skoletube/images/search.js":["MQVt",103],"./utils/skoletube/mediaSearch":["Z6lC",113],"./utils/skoletube/mediaSearch.js":["Z6lC",113],"./utils/skoletube/skoletube":["TMGa",94],"./utils/skoletube/skoletube.js":["TMGa",94],"./utils/skoletube/videos/search":["i5N/",102],"./utils/skoletube/videos/search.js":["i5N/",102],"./utils/videoHelpers":["vu0f"],"./utils/videoHelpers.js":["vu0f"],"./utils/videoSearch":["HTWB",85],"./utils/videoSearch.js":["HTWB",85]};webpackAsyncContext.keys=function(){return Object.keys(map)},webpackAsyncContext.id="CgDZ",module.exports=webpackAsyncContext},DrJx:function(module,__webpack_exports__,__webpack_require__){"use strict";(function(React){function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var __WEBPACK_IMPORTED_MODULE_0__userIcon__=__webpack_require__("yviC"),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),UserNotification=function(_React$Component){function UserNotification(props){_classCallCheck(this,UserNotification);var _this=_possibleConstructorReturn(this,(UserNotification.__proto__||Object.getPrototypeOf(UserNotification)).call(this,props));return _this.state={user:users.findByID(_this.props.userId)},_this}return _inherits(UserNotification,_React$Component),_createClass(UserNotification,[{key:"componentWillReceiveProps",value:function(nextProps){this.setState({user:users.findByID(nextProps.userId)})}},{key:"render",value:function(){var className="rad-100% justify-center h-flex-row p-r "+this.props.className,userUserIconClassName=this.state.user.isOnline()?"s-24":"o-40 o-hover-100 s-24",tooltip=null;return this.props.enabled?(userUserIconClassName+=" h-cp",tooltip=(this.state.user.isOnline()?" (online)":" (offline)")+" - "+I18n.t("js.click_to_send_message")):userUserIconClassName+=" h-cd",React.createElement("div",{className:className},this.props.unread>0?React.createElement("span",{className:"chat-alert"},this.props.unread):null,React.createElement(__WEBPACK_IMPORTED_MODULE_0__userIcon__.a,{user:this.state.user,className:userUserIconClassName,tooltip:tooltip}))}}]),UserNotification}(React.Component);UserNotification.defaultProps={className:""},__webpack_exports__.a=UserNotification}).call(__webpack_exports__,__webpack_require__("nakD"))},"HJ+y":function(module,__webpack_exports__,__webpack_require__){"use strict";(function(React){function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var __WEBPACK_IMPORTED_MODULE_0_ui_components_generic_userNotification__=__webpack_require__("DrJx"),__WEBPACK_IMPORTED_MODULE_1_ui_components_generic_popover__=__webpack_require__("aEw3"),__WEBPACK_IMPORTED_MODULE_2_ui_components_generic_list_list__=__webpack_require__("worM"),__WEBPACK_IMPORTED_MODULE_3_ui_components_chat_chatWidget__=__webpack_require__("Z8UF"),__WEBPACK_IMPORTED_MODULE_4_app_models_chatModel__=__webpack_require__("9Oqg"),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),UserPopover=function(_React$Component){function UserPopover(props){_classCallCheck(this,UserPopover);var _this=_possibleConstructorReturn(this,(UserPopover.__proto__||Object.getPrototypeOf(UserPopover)).call(this,props));return props.users.each(function(user){App.subscribe(CustomEvents.CHAT_UPDATE+"_"+user.id,function(){_this.forceUpdate()}),__WEBPACK_IMPORTED_MODULE_4_app_models_chatModel__.default.getOlderMessages(user.id)},0),_this.state={activeChat:0},_this.unsetActiveChat=_this.unsetActiveChat.bind(_this),_this}return _inherits(UserPopover,_React$Component),_createClass(UserPopover,[{key:"setActiveChat",value:function(id,e){e.preventDefault(),e.stopPropagation(),this.setState({activeChat:id}),__WEBPACK_IMPORTED_MODULE_4_app_models_chatModel__.default.markAsRead(id)}},{key:"unsetActiveChat",value:function(){this.setState({activeChat:null})}},{key:"componentWillReceiveProps",value:function(nextProps){var _this2=this;this.props.users.each(function(user){App.unsubscribe(CustomEvents.CHAT_UPDATE+"_"+user.id,function(){_this2.forceUpdate()})},0),nextProps.users.each(function(user){App.subscribe(CustomEvents.CHAT_UPDATE+"_"+user.id,function(){_this2.forceUpdate()})},0)}},{key:"componentWillUnmount",value:function(){var _this3=this;this.props.users.each(function(user){App.unsubscribe(CustomEvents.CHAT_UPDATE+"_"+user.id,function(){_this3.forceUpdate()})},0)}},{key:"render",value:function(){var _this4=this,notification=void 0,unread=this.props.users.reduce(function(count,user){return count+__WEBPACK_IMPORTED_MODULE_4_app_models_chatModel__.default.getUnreadMessages(user.id).length},0),users=this.props.users.map(function(user){var unread=__WEBPACK_IMPORTED_MODULE_4_app_models_chatModel__.default.getUnreadMessages(user.id).length;return{icon:React.createElement(__WEBPACK_IMPORTED_MODULE_0_ui_components_generic_userNotification__.a,{className:"mr-8px",unread:unread,userId:user.id}),label:user.name,onClick:_this4.setActiveChat.bind(_this4,user.id)}});unread>0&&(notification=React.createElement("span",{className:"chat-alert"},unread));var popoverContent=void 0;if(this.state.activeChat){var chat=__WEBPACK_IMPORTED_MODULE_4_app_models_chatModel__.default.getChat(this.state.activeChat);popoverContent=React.createElement(__WEBPACK_IMPORTED_MODULE_3_ui_components_chat_chatWidget__.a,{messages:chat.messages,userID:this.state.activeChat})}else popoverContent=React.createElement(__WEBPACK_IMPORTED_MODULE_2_ui_components_generic_list_list__.a,{items:users,closePopoverOnItemClick:!1});return React.createElement(__WEBPACK_IMPORTED_MODULE_1_ui_components_generic_popover__.a,{position:"above",canAutoPosition:!1,className:"sections",opener:React.createElement("div",{className:"h-flex-row justify-center s-24 fs-10 b-1 rad-100% bc-grey3 c-grey-light mh-4px h-cp"},notification,"+"+this.props.users.length),onClose:this.unsetActiveChat},popoverContent)}}]),UserPopover}(React.Component);__webpack_exports__.a=UserPopover}).call(__webpack_exports__,__webpack_require__("nakD"))},LxwL:function(module,exports){module.exports=function(css){var location="undefined"!=typeof window&&window.location;if(!location)throw new Error("fixUrls requires window.location");if(!css||"string"!=typeof css)return css;var baseUrl=location.protocol+"//"+location.host,currentDir=baseUrl+location.pathname.replace(/\/[^\/]*$/,"/");return css.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(fullMatch,origUrl){var unquotedOrigUrl=origUrl.trim().replace(/^"(.*)"$/,function(o,$1){return $1}).replace(/^'(.*)'$/,function(o,$1){return $1});if(/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(unquotedOrigUrl))return fullMatch;var newUrl;return newUrl=0===unquotedOrigUrl.indexOf("//")?unquotedOrigUrl:0===unquotedOrigUrl.indexOf("/")?baseUrl+unquotedOrigUrl:currentDir+unquotedOrigUrl.replace(/^\.\//,""),"url("+JSON.stringify(newUrl)+")"})}},QWVU:function(module,__webpack_exports__,__webpack_require__){"use strict";(function(React){function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var __WEBPACK_IMPORTED_MODULE_0__messageList__=__webpack_require__("BS4b"),__WEBPACK_IMPORTED_MODULE_1_ui_components_generic_loadingSpinner__=__webpack_require__("atEJ"),__WEBPACK_IMPORTED_MODULE_2_lib_waypoint__=__webpack_require__("ky7I"),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),MessageArea=function(_React$Component){function MessageArea(props){_classCallCheck(this,MessageArea);var _this=_possibleConstructorReturn(this,(MessageArea.__proto__||Object.getPrototypeOf(MessageArea)).call(this,props));return _this.height=0,_this.stick=!0,_this.stickToBottom=!0,_this.state={loadingMessages:!0},_this}return _inherits(MessageArea,_React$Component),_createClass(MessageArea,[{key:"componentDidMount",value:function(){this.wrapper.scrollTop=this.chat.offsetHeight,this.scrollToBottom(),this.setState({loadingMessages:!1})}},{key:"componentDidUpdate",value:function(){if(this.stick){if(this.height!==this.chat.offsetHeight&&!this.state.loadingMessages){var offset=this.chat.offsetHeight-this.height;this.wrapper.scrollTop=offset,this.stick=!1}}else this.stickToBottom&&(this.wrapper.scrollTop=this.chat.offsetHeight,this.stickToBottom=!1);this.height=this.chat.offsetHeight}},{key:"componentWillReceiveProps",value:function(){this.setState({loadingMessages:!1})}},{key:"scrollToBottom",value:function(){this.stickToBottom=!0}},{key:"render",value:function(){var _this2=this,loadingSpinner=this.props.loading?React.createElement(__WEBPACK_IMPORTED_MODULE_1_ui_components_generic_loadingSpinner__.a,{size:24}):null;return React.createElement("div",{ref:function(el){return _this2.wrapper=el},className:"ph-5 bt-1 bb-1 bc-grey3  ph-12  h-overflow-y h-275"},React.createElement("div",{ref:function(el){return _this2.chat=el}},React.createElement(__WEBPACK_IMPORTED_MODULE_2_lib_waypoint__.a,{onEnter:function(_ref){var previousPosition=_ref.previousPosition;_ref.currentPosition,_ref.event;null!==previousPosition&&"invisible"!==previousPosition&&(_this2.props.onScrollTop()?(_this2.stick=!0,_this2.setState({loadingMessages:!0})):_this2.setState({loadingMessages:!1}))}}),loadingSpinner,React.createElement(__WEBPACK_IMPORTED_MODULE_0__messageList__.a,{resendMessage:this.props.resendMessage,messages:this.props.messages,height:275})))}}]),MessageArea}(React.Component);__webpack_exports__.a=MessageArea}).call(__webpack_exports__,__webpack_require__("nakD"))},"Vmy+":function(module,exports){function cssWithMappingToString(item,useSourceMap){var content=item[1]||"",cssMapping=item[3];if(!cssMapping)return content;if(useSourceMap&&"function"==typeof btoa){var sourceMapping=toComment(cssMapping);return[content].concat(cssMapping.sources.map(function(source){return"/*# sourceURL="+cssMapping.sourceRoot+source+" */"})).concat([sourceMapping]).join("\n")}return[content].join("\n")}function toComment(sourceMap){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))))+" */"}module.exports=function(useSourceMap){var list=[];return list.toString=function(){return this.map(function(item){var content=cssWithMappingToString(item,useSourceMap);return item[2]?"@media "+item[2]+"{"+content+"}":content}).join("")},list.i=function(modules,mediaQuery){"string"==typeof modules&&(modules=[[null,modules,""]]);for(var alreadyImportedModules={},i=0;i<this.length;i++){var id=this[i][0];"number"==typeof id&&(alreadyImportedModules[id]=!0)}for(i=0;i<modules.length;i++){var item=modules[i];"number"==typeof item[0]&&alreadyImportedModules[item[0]]||(mediaQuery&&!item[2]?item[2]=mediaQuery:mediaQuery&&(item[2]="("+item[2]+") and ("+mediaQuery+")"),list.push(item))}},list}},Z8UF:function(module,__webpack_exports__,__webpack_require__){"use strict";(function(React){function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var __WEBPACK_IMPORTED_MODULE_0_ui_components_generic_userIcon__=__webpack_require__("yviC"),__WEBPACK_IMPORTED_MODULE_1__messageArea__=__webpack_require__("QWVU"),__WEBPACK_IMPORTED_MODULE_2_app_models_chatModel__=__webpack_require__("9Oqg"),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),ChatWidget=function(_React$Component){function ChatWidget(props){_classCallCheck(this,ChatWidget);var _this=_possibleConstructorReturn(this,(ChatWidget.__proto__||Object.getPrototypeOf(ChatWidget)).call(this,props));return _this.markAsRead=_this.markAsRead.bind(_this),_this.onFocus=_this.onFocus.bind(_this),_this.keydown=_this.keydown.bind(_this),_this.onBlur=_this.onBlur.bind(_this),_this.submitMessage=_this.submitMessage.bind(_this),_this.resendMessage=_this.resendMessage.bind(_this),_this.update=_this.update.bind(_this),_this.fetchOlderMessages=_this.fetchOlderMessages.bind(_this),_this}return _inherits(ChatWidget,_React$Component),_createClass(ChatWidget,[{key:"markAsRead",value:function(){__WEBPACK_IMPORTED_MODULE_2_app_models_chatModel__.default.markAsRead(this.props.userID)}},{key:"onFocus",value:function(){this.keymap.enable()}},{key:"keydown",value:function(event){event.shiftKey||this.submitMessage(event.browserEvent)}},{key:"onBlur",value:function(){this.keymap.disable()}},{key:"submitMessage",value:function(event){Event.stop(event);var val=this.input.value;if(val.trim().length>0){var message={text:val,source:"me",user:users.selfUser,user_id:users.selfUser.id};this.input.value="",this.messages.scrollToBottom(),__WEBPACK_IMPORTED_MODULE_2_app_models_chatModel__.default.send(message,this.props.userID)}}},{key:"resendMessage",value:function(message){__WEBPACK_IMPORTED_MODULE_2_app_models_chatModel__.default.send(message,this.props.userID)}},{key:"update",value:function(){this.setState({chat:__WEBPACK_IMPORTED_MODULE_2_app_models_chatModel__.default.getChat(this.state.chat.targetId)})}},{key:"fetchOlderMessages",value:function(){return __WEBPACK_IMPORTED_MODULE_2_app_models_chatModel__.default.getOlderMessages(this.props.userID)}},{key:"onNewMessage",value:function(){this.messages.scrollToBottom()}},{key:"componentWillMount",value:function(){var K=MM.utils.KeyEvent;this.keymap=new MM.utils.KeyMap(document,"chat_keymap",[{key:[K.RETURN],fn:this.keydown,withEvent:!0,stopEvent:!1}]),this.keymap.disable()}},{key:"render",value:function(){var _this2=this,user=users.findByID(this.props.userID),loading=__WEBPACK_IMPORTED_MODULE_2_app_models_chatModel__.default.getChat(this.props.userID).loading,userIconClassName=user.isOnline()?"":"o-40",userIconTooltip=user.isOnline()?" (online)":" (offline)";return React.createElement("div",{onClick:this.markAsRead,className:"chat"},React.createElement("div",{className:"h-flex-row justify-sb ph-24 h-64"},React.createElement("div",{className:"h-flex-row"},React.createElement(__WEBPACK_IMPORTED_MODULE_0_ui_components_generic_userIcon__.a,{user:user,className:userIconClassName,tooltip:userIconTooltip}),React.createElement("span",{className:"fs-18 ml-13"},user.name.unescapeHTML()))),React.createElement(__WEBPACK_IMPORTED_MODULE_1__messageArea__.a,{ref:function(el){return _this2.messages=el},loading:loading,resendMessage:this.resendMessage,onScrollTop:this.fetchOlderMessages,messages:this.props.messages}),React.createElement("div",{className:"is-stretched ph-24 h-84 bt-1"},React.createElement("form",{className:"h-100% h-flex-row justify-sb",onSubmit:this.submitMessage},React.createElement("textarea",{ref:function(el){return _this2.input=el},className:"content-visible h-100% h-flex-grow h-overflow-y lh-160% pr-20 pt-20 pb-10 b-0",placeholder:I18n.t("js.your_message"),maxLength:"255",autoFocus:!0,onFocus:this.onFocus,onBlur:this.onBlur}),React.createElement("input",{type:"submit",className:"button default",value:I18n.t("js.say_it")}))))}}]),ChatWidget}(React.Component);__webpack_exports__.a=ChatWidget}).call(__webpack_exports__,__webpack_require__("nakD"))},aYvJ:function(module,__webpack_exports__,__webpack_require__){"use strict";(function(React){function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var __WEBPACK_IMPORTED_MODULE_0__userPopover__=__webpack_require__("HJ+y"),__WEBPACK_IMPORTED_MODULE_1_ui_components_chat_chat__=__webpack_require__("jRmw"),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),UserList=function(_React$Component){function UserList(props){_classCallCheck(this,UserList);var _this=_possibleConstructorReturn(this,(UserList.__proto__||Object.getPrototypeOf(UserList)).call(this,props));return _this._openDialog=_this._openDialog.bind(_this),_this}return _inherits(UserList,_React$Component),_createClass(UserList,[{key:"sortUsers",value:function(users){return users.sort(function(userA,userB){return userA.isOnline()===userB.isOnline()?0:userA.isOnline()?-1:1})}},{key:"usersExcludingSelfAndAnonymus",value:function(usersArray){var _this2=this;return usersArray.filter(function(user){return user.id!==_this2.props.selfUser.id&&(!user.anonymous||user.isOnline())})}},{key:"_openDialog",value:function(){if(!this.props.selfUser.anonymous)return MM.ui.dialogs.dialogSharing(this.props.mapId);MM.ui.dialogs.dialogLogin(this.props.selfUser)}},{key:"render",value:function(){var _props=this.props,users=_props.users,currentUsers=_props.currentUsers,selfUser=_props.selfUser,visibleUsersCount=_props.visibleUsersCount,renderLink=_props.renderLink,allUsersExcludingSelf=this.usersExcludingSelfAndAnonymus(users),currentUsersExcludingSelf=this.usersExcludingSelfAndAnonymus(currentUsers);if(0===allUsersExcludingSelf.length&&0===currentUsersExcludingSelf.length)return null;var sortedUsers=this.sortUsers(allUsersExcludingSelf),visibleUsers=sortedUsers.slice(0,visibleUsersCount),enableChat=!selfUser.anonymous||2===selfUser.permission,peopleCountAttr=renderLink?{onClick:this._openDialog,className:"c-blue td-underline h-cp lh-120%"}:{};return React.createElement("div",{className:"h-flex-row"},React.createElement("div",{className:"h-flex-column mr-10"},React.createElement("span",{className:"fs-10 c-lighter"},I18n.t("js.shared_with")),React.createElement("span",peopleCountAttr,I18n.t("js.count_people",{count:allUsersExcludingSelf.length}))),React.createElement("div",{className:"h-flex-row mr-10"},visibleUsers.map(function(user,index){return React.createElement(__WEBPACK_IMPORTED_MODULE_1_ui_components_chat_chat__.a,{key:user.id,userID:user.id,enabled:enableChat})}),sortedUsers.length>visibleUsers.length?React.createElement(__WEBPACK_IMPORTED_MODULE_0__userPopover__.a,{users:sortedUsers.slice(visibleUsers.length,sortedUsers.length)}):null))}}]),UserList}(React.Component);__webpack_exports__.a=UserList}).call(__webpack_exports__,__webpack_require__("nakD"))},fti0:function(module,__webpack_exports__,__webpack_require__){"use strict";(function(React){function _objectWithoutProperties(obj,keys){var target={};for(var i in obj)keys.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(obj,i)&&(target[i]=obj[i]);return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var __WEBPACK_IMPORTED_MODULE_0_ui_components_generic_svgIcon__=__webpack_require__("YmTu"),__WEBPACK_IMPORTED_MODULE_1_ui_components_shareLinkWidget_shareLinkWidget__=__webpack_require__("SO8C"),__WEBPACK_IMPORTED_MODULE_2_ui_components_invitationWidget_form__=__webpack_require__("uJpZ"),__WEBPACK_IMPORTED_MODULE_3_ui_components_generic_list_list__=__webpack_require__("worM"),__WEBPACK_IMPORTED_MODULE_4_ui_components_generic_skimmableList_skimmableList__=__webpack_require__("jR5l"),__WEBPACK_IMPORTED_MODULE_5_ui_components_generic_popover__=__webpack_require__("aEw3"),__WEBPACK_IMPORTED_MODULE_6_utils_teamPreferences__=__webpack_require__("xY9N"),_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),PLATFORMS=["Facebook","Twitter","Pinterest"],noop=function(){return null},onSocialMediaShare=function(_ref){var platform=_ref.platform,isPublicMap=_ref.isPublicMap,mapId=_ref.mapId,onPublish=_ref.onPublish;if(isPublicMap)socialMediaHandler(platform);else{var popup=void 0;MM.ui.dialogs.dialogPublishConfirmation(mapId,{okCallback:function(){return popup=socialMediaHandler(platform,!0)},successCallback:function(){onPublish(),popup.win.location.href=popup.shareUrl}})}},socialMediaHandler=function(platform,async){var title=tree.root.getRawTitle(),rootId=App.tree.root.id;return MM.utils.Social.share(platform,{async:async,rootId:rootId,title:title,url:document.location.origin+"/"+rootId+"/"+App.titleToURI(title)})},renderSocialMediaList=function(_ref2){var isPublicMap=_ref2.isPublicMap,canShare=_ref2.canShare,mapId=_ref2.mapId,onPublish=_ref2.onPublish;if(isPublicMap||canShare){var items=PLATFORMS.map(function(platform){return{icon:React.createElement(__WEBPACK_IMPORTED_MODULE_0_ui_components_generic_svgIcon__.a,{opts:{name:"service-"+platform.toLowerCase(),size:20,parentClasses:"rad-5px mr-8px"}}),label:platform,onClick:function(){return onSocialMediaShare({platform:platform,isPublicMap:isPublicMap,mapId:mapId,onPublish:onPublish})}}});return React.createElement(__WEBPACK_IMPORTED_MODULE_3_ui_components_generic_list_list__.a,{header:{title:I18n.t("js.social_media")},items:items,className:"mt-10 mb-15"})}return React.createElement("div",null)},renderSharingItems=function(_ref3){var isPublicMap=_ref3.isPublicMap,isPublishMapAllowed=_ref3.isPublishMapAllowed,isAnonymous=_ref3.isAnonymous,mapId=_ref3.mapId,onPublish=_ref3.onPublish;if(!isAnonymous){var items=[];if(isPublishMapAllowed){var label=isPublicMap?I18n.t("js.publishing_settings"):I18n.t("js.publish_map"),publicItem={icon:React.createElement(__WEBPACK_IMPORTED_MODULE_0_ui_components_generic_svgIcon__.a,{opts:{name:"publish",color:"white",size:12,consize:20,parentClasses:"bg-blue rad-5px mr-8px"}}),label:label+"...",onClick:function(){isPublicMap?MM.ui.dialogs.dialogPublish(mapId):MM.ui.dialogs.dialogPublishConfirmation(mapId,{successCallback:function(){onPublish(),MM.ui.dialogs.dialogPublish(mapId)}})}};items.push(publicItem)}return items.push({icon:React.createElement(__WEBPACK_IMPORTED_MODULE_0_ui_components_generic_svgIcon__.a,{opts:{name:"sharing",color:"white",size:12,consize:20,parentClasses:"bg-green rad-5px mr-8px"}}),label:I18n.t("js.sharing_settings")+"...",onClick:function(){return MM.ui.dialogs.dialogSharing(mapId)}}),React.createElement(__WEBPACK_IMPORTED_MODULE_3_ui_components_generic_list_list__.a,{header:{title:I18n.t("js.more")},items:items,className:"mv-10"})}return React.createElement("div",null)},renderContent=function(props){var currentUser=props.currentUser,isPublicMap=props.isPublicMap,mapId=props.mapId,onPublish=props.onPublish,isLinkShareAllowed=props.isLinkShareAllowed,isPublishMapAllowed=props.isPublishMapAllowed,canShare=currentUser.canShare(),readOnly=currentUser.anonymous||!canShare;return React.createElement("div",null,React.createElement("div",{className:"fs-18 fw-500 m-20px mt-10px"},I18n.t("js.share_this_map")),readOnly?null:React.createElement(__WEBPACK_IMPORTED_MODULE_2_ui_components_invitationWidget_form__.a,{title:I18n.t("js.invite_people"),hideTokenizerHeader:!0}),isLinkShareAllowed?React.createElement(__WEBPACK_IMPORTED_MODULE_1_ui_components_shareLinkWidget_shareLinkWidget__.a,{className:"mb-20",readOnly:readOnly,mapId:mapId,on:App.config.linkShare,link:App.config.shareLink,onChange:readOnly?noop:App.changeLinkSharing.bind(App)}):null,React.createElement(__WEBPACK_IMPORTED_MODULE_4_ui_components_generic_skimmableList_skimmableList__.a,null,renderSocialMediaList({isPublicMap:isPublicMap,canShare:canShare,mapId:mapId,onPublish:onPublish}),renderSharingItems({isPublicMap:isPublicMap,isPublishMapAllowed:isPublishMapAllowed&&canShare,isAnonymous:currentUser.anonymous,mapId:mapId,onPublish:onPublish})))},Component=function(_React$Component){function Component(props){_classCallCheck(this,Component);var _this=_possibleConstructorReturn(this,(Component.__proto__||Object.getPrototypeOf(Component)).call(this,props));return _this.state={isLinkShareAllowed:!0,isPublishMapAllowed:!0},_this}return _inherits(Component,_React$Component),_createClass(Component,[{key:"componentWillMount",value:function(){var _this2=this;Object(__WEBPACK_IMPORTED_MODULE_6_utils_teamPreferences__.b)(function(){return _this2.setState({isLinkShareAllowed:Object(__WEBPACK_IMPORTED_MODULE_6_utils_teamPreferences__.c)(__WEBPACK_IMPORTED_MODULE_6_utils_teamPreferences__.a.ALLOW_LINK_SHARE),isPublishMapAllowed:Object(__WEBPACK_IMPORTED_MODULE_6_utils_teamPreferences__.c)(__WEBPACK_IMPORTED_MODULE_6_utils_teamPreferences__.a.ALLOW_PUBLISH)})})}},{key:"render",value:function(){var _props=this.props,onShow=_props.onShow,onClose=_props.onClose,rest=_objectWithoutProperties(_props,["onShow","onClose"]);return React.createElement(__WEBPACK_IMPORTED_MODULE_5_ui_components_generic_popover__.a,{position:"above",canAutoPosition:!1,className:"sections",opener:React.createElement("btn",{id:"btn_share",className:"h-flex-row h-32px lh-32px"},React.createElement("span",null,I18n.t("js.share")),React.createElement(__WEBPACK_IMPORTED_MODULE_0_ui_components_generic_svgIcon__.a,{className:"c-blue pl-5px",opts:{name:"triangle",color:"blue",size:8}})),onShow:onShow,onClose:onClose},renderContent(_extends({},rest,this.state)))}}]),Component}(React.Component);__webpack_exports__.a=Component}).call(__webpack_exports__,__webpack_require__("nakD"))},gcQM:function(module,__webpack_exports__,__webpack_require__){"use strict";(function(React){var __WEBPACK_IMPORTED_MODULE_0_ui_components_generic_svgIcon__=__webpack_require__("YmTu"),ChatMessage=function(props){var message=props.message,resendMessage=props.resendMessage,text=message.text.strip().escapeHTML().replace(/\n/gi,"<br/>"),time=(message.timestamp?new Date(1e3*message.timestamp):new Date).toUIString(),source=message.user_id!==users.selfUser.id?"them":"me",error=void 0;return message.failed&&(error=React.createElement("div",{className:"ta-center mv-10"},React.createElement(__WEBPACK_IMPORTED_MODULE_0_ui_components_generic_svgIcon__.a,{className:"mb-5 h-iblock",opts:{name:"warning",size:30}}),React.createElement("span",{className:"h-block mb-10"},"Message could not be sent"),React.createElement("a",{onClick:function(){return resendMessage(message)},className:"button h-iblock mb-10"},"Resend"))),React.createElement("div",{className:"msg from-"+source},React.createElement("div",{className:"bubble",title:time},React.createElement("p",{dangerouslySetInnerHTML:{__html:EmojiArea.getHTMLContent(text)}}),error))};__webpack_exports__.a=ChatMessage}).call(__webpack_exports__,__webpack_require__("nakD"))},jRmw:function(module,__webpack_exports__,__webpack_require__){"use strict";(function(React){function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var __WEBPACK_IMPORTED_MODULE_0_css_ui_components_chat__=__webpack_require__("+X7E"),__WEBPACK_IMPORTED_MODULE_1__chatWidget__=(__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_css_ui_components_chat__),__webpack_require__("Z8UF")),__WEBPACK_IMPORTED_MODULE_2_ui_components_generic_popover__=__webpack_require__("aEw3"),__WEBPACK_IMPORTED_MODULE_3_ui_components_generic_userNotification__=__webpack_require__("DrJx"),__WEBPACK_IMPORTED_MODULE_4_app_models_chatModel__=__webpack_require__("9Oqg"),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),Chat=function(_React$Component){function Chat(props){_classCallCheck(this,Chat);var _this=_possibleConstructorReturn(this,(Chat.__proto__||Object.getPrototypeOf(Chat)).call(this,props));return __WEBPACK_IMPORTED_MODULE_4_app_models_chatModel__.default.getOlderMessages(_this.props.userID),_this.state={open:!1},_this.markAsRead=_this.markAsRead.bind(_this),_this.setOpen=_this.setOpen.bind(_this),_this.setClosed=_this.setClosed.bind(_this),_this.update=_this.update.bind(_this),_this}return _inherits(Chat,_React$Component),_createClass(Chat,[{key:"markAsRead",value:function(){__WEBPACK_IMPORTED_MODULE_4_app_models_chatModel__.default.markAsRead(this.props.userID)}},{key:"setOpen",value:function(){this.setState({open:!0}),this.markAsRead()}},{key:"setClosed",value:function(){this.setState({open:!1})}},{key:"update",value:function(){__WEBPACK_IMPORTED_MODULE_4_app_models_chatModel__.default.getUnreadMessages(this.props.userID).length>0&&this.state.open&&(this.markAsRead(),this.widget.onNewMessage()),this.forceUpdate()}},{key:"componentDidMount",value:function(){App.subscribe(CustomEvents.CHAT_UPDATE+"_"+this.props.userID,this.update)}},{key:"componentWillReceiveProps",value:function(nextProps){this.props.userID!==nextProps.userID&&(__WEBPACK_IMPORTED_MODULE_4_app_models_chatModel__.default.getOlderMessages(nextProps.userID),App.unsubscribe(CustomEvents.CHAT_UPDATE+"_"+this.props.userID,this.update),App.subscribe(CustomEvents.CHAT_UPDATE+"_"+nextProps.userID,this.update))}},{key:"componentWillUnmount",value:function(){App.unsubscribe(CustomEvents.CHAT_UPDATE+"_"+this.props.userID,this.update),__WEBPACK_IMPORTED_MODULE_4_app_models_chatModel__.default.getOlderMessages(this.props.userID)}},{key:"render",value:function(){var _this2=this,chat=__WEBPACK_IMPORTED_MODULE_4_app_models_chatModel__.default.getChat(this.props.userID),unread=__WEBPACK_IMPORTED_MODULE_4_app_models_chatModel__.default.getUnreadMessages(this.props.userID).length;return React.createElement(__WEBPACK_IMPORTED_MODULE_2_ui_components_generic_popover__.a,{position:"above",canAutoPosition:!1,className:"p-0",onShow:this.setOpen,onClose:this.setClosed,disabled:!this.props.enabled,opener:React.createElement(__WEBPACK_IMPORTED_MODULE_3_ui_components_generic_userNotification__.a,{unread:unread,userId:this.props.userID,className:"mh-4",enabled:this.props.enabled})},React.createElement(__WEBPACK_IMPORTED_MODULE_1__chatWidget__.a,{ref:function(el){return _this2.widget=el},messages:chat.messages,userID:this.props.userID}))}}]),Chat}(React.Component);__webpack_exports__.a=Chat}).call(__webpack_exports__,__webpack_require__("nakD"))},k1IG:function(module,__webpack_exports__,__webpack_require__){"use strict";Object.defineProperty(__webpack_exports__,"__esModule",{value:!0}),function(ReactDOM,React){var __WEBPACK_IMPORTED_MODULE_1_ui_components_userList_userList__=(__webpack_require__("67vC"),__webpack_require__("aYvJ")),__WEBPACK_IMPORTED_MODULE_2_ui_components_generic_svgIcon__=__webpack_require__("YmTu"),__WEBPACK_IMPORTED_MODULE_3_ui_components_popovers_sharingPopover__=__webpack_require__("fti0"),__WEBPACK_IMPORTED_MODULE_4_lodash_capitalize__=__webpack_require__("8RG9"),__WEBPACK_IMPORTED_MODULE_4_lodash_capitalize___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_lodash_capitalize__),Footer={visibleUsers:0,bars:{history:{height:168,permissions:"write",path:"ui/history/history"},slideshow:{height:150,permissions:"write",path:"ui/presentation/slideshow"},print:{height:77,permissions:"read",path:"ui/print/print"},meistertask:{height:150,permissions:"write",path:"utils/meistertask/meistertask"}},init:function(){this.el=$("map_footer"),this.els={bar:$("footerbar"),collaborators:$("collaborators-list"),collaboratorsContainer:$("collaboration-container")},this.enable(),Element.bindOnClick("btn_present",Presentation.togglePresenter.bind(Presentation)),Element.bindOnClick("btn_export",this._onExportClick.bind(this)),this.setViewportOffset(),UI.Registry.add(this),UI.Registry.notify(this,"show"),MM.ui.ToolTips.touchSafe({el:this.el}),this.els.collaborators&&this.els.collaboratorsContainer&&this._renderSharingButton(),this.calculateVisibleUsers(),App.subscribe(CustomEvents.COLLABORATORS_UPDATED,this._renderUsers.bind(this))},_onExportClick:function(){users.selfUser.anonymous?MM.ui.dialogs.dialogLogin(users.selfUser):MM.ui.dialogs.dialogExportMap(App.config.map_id,null,{onShow:function(){return App.trigger(CustomEvents.EXPORT_DLG_OPENED)},onClose:function(){return App.trigger(CustomEvents.EXPORT_DLG_CLOSED)}})},_onPrintClick:function(){users.selfUser.anonymous?MM.ui.dialogs.dialogLogin(users.selfUser):this.toggleBar("print")},_renderSharingButton:function(){var _this=this;ReactDOM.render(React.createElement(__WEBPACK_IMPORTED_MODULE_3_ui_components_popovers_sharingPopover__.a,{currentUser:users.selfUser,mapId:App.config.map_id,isPublicMap:App.config.isPublic,onShow:function(){return App.trigger(CustomEvents.SHARING_POPOVER_OPENED)},onClose:function(){return App.trigger(CustomEvents.SHARING_POPOVER_CLOSED)},onPublish:function(){App.config.isPublic=!0,_this._renderSharingButton()}}),mm$("btn-share-container"))},_renderUsers:function(){if("phantomjs"!==App.config.environment&&this.els.collaborators)if(MM.ua.isPhone||MM.ua.isTablet)ReactDOM.render(React.createElement("div",{className:"h-flex-row p-r mr-10"},React.createElement(__WEBPACK_IMPORTED_MODULE_2_ui_components_generic_svgIcon__.a,{opts:{name:"service-android",size:32,parentClasses:"rad-100%"}}),React.createElement(__WEBPACK_IMPORTED_MODULE_2_ui_components_generic_svgIcon__.a,{opts:{name:"service-ios",size:32,parentClasses:"rad-100% bc-grey3 b-1 p-a h-v-center al-24"}}),React.createElement("p",{className:"fs-12 pl-30",dangerouslySetInnerHTML:{__html:I18n.t("js.app_teaser_map_view_html")}})),this.els.collaborators);else{var collaborators=users.collaborators();ReactDOM.render(React.createElement(__WEBPACK_IMPORTED_MODULE_1_ui_components_userList_userList__.a,{mapId:App.config.map_id,renderLink:"embedded_full"!==App.config.viewMode,users:collaborators,currentUsers:users.currentUsers,selfUser:users.selfUser,visibleUsersCount:Math.min(this.visibleUsers,collaborators.length)}),this.els.collaborators)}},setViewportOffset:function(){this.viewportSpace={bottom:this.el.offsetHeight+(this.activeBar?this.els.bar.offsetHeight:0)}},calculateVisibleUsers:function(){if(this.els.collaboratorsContainer){var availableWidth=this.els.collaboratorsContainer.clientWidth-280,maxUsers=Math.floor(availableWidth/32);this.visibleUsers=Math.min(maxUsers,5)}},onResize:function(){this.setViewportOffset();var oldVisibleUsers=this.visibleUsers;this.calculateVisibleUsers(),this.visibleUsers!==oldVisibleUsers&&this._renderUsers()},show:function(useEffect){var _this2=this,animationDuration=(useEffect?500:0)+"ms";CSS.set(this.el,{bottom:"0px",transitionDuration:animationDuration}),this.hiddenBar&&(this.showBar(this.hiddenBar),this.hiddenBar=null),setTimeout(function(){return UI.Registry.notify(_this2,"show")},useEffect?500:10)},hide:function(use_effect){var transitionDuration=use_effect?"500ms":"0ms";CSS.set(this.el,{bottom:-this.el.getHeight()+"px",transitionDuration:transitionDuration}),this.activeBar&&(this.hiddenBar=this.activeBar,this.hideBar(this.activeBar)),UI.Registry.notify(this,"hide")},enable:function(){Object.keys(this.bars).each(function(bar){var listenerName=bar+"Listener",btn=$("btn_toggle"+bar);if(!this.hasOwnProperty(listenerName)){var clickHandler=this["_on"+__WEBPACK_IMPORTED_MODULE_4_lodash_capitalize___default()(bar)+"Click"];this[listenerName]=clickHandler?clickHandler.bind(this):this.toggleBar.bind(this,bar)}btn&&("write"===this.bars[bar].permissions&&App.config.editable||"read"===this.bars[bar].permissions?(btn.observe("click",this[listenerName]),MM.ui.enableButton(btn)):(btn.stopObserving("click",this[listenerName]),btn.title=I18n.t("js.you_are_in_view_only_mode"),MM.ui.disableButton(btn)))}.bind(this))},disable:function(){Object.keys(this.bars).each(function(bar){mm$("btn_toggle"+bar)&&$("btn_toggle"+bar).stopObserving("click",this[bar+"Listener"])}.bind(this))},toggleBar:function(type){return!!this.els.bar&&("write"!==this.bars[type].permissions||App.config.editable?(this.activeBar===type?this.hideBar(type):this.showBar(type),!1):(App.ui.Message.show(I18n.t("js.you_are_in_view_only_mode"),Message.NOTICE),!1))},showBar:function(type){if(this.els.bar){this.activeBar&&(this.hideBar(this.activeBar,!0),this.els.bar.innerHTML=""),this.actions.hasOwnProperty("onBeforeShow"+type.capitalize())&&this.actions["onBeforeShow"+type.capitalize()](),addClassName(mm$("btn_toggle"+type),"active");var loadAjaxFunc=function(){new Ajax.Request("/toolbar/"+type,{parameters:{id:App.config.map_id},evalScripts:!0,asynchronous:!0,onComplete:function(transport){var response=transport.responseJSON;response?(this.hideBar(type),removeClassName(mm$("btn_toggle"+type),"active"),MM.ui.enableButton("btn_toggle"+type),response.error?Message.show(response.error,Message.ERROR):response.info&&Message.show(response.info,Message.INFO)):("meistertask"===type&&this._prepareBar(type),this.activeBar&&this._doShowBar(type))}.bind(this)})}.bind(this),path=this.bars[type].path;__webpack_require__("CgDZ")("./"+path).then(function(){return loadAjaxFunc()}),"meistertask"!==type&&(this._prepareBar(type),Amplitude.logEvent("toolbar_"+type)),App.hideAnonymousHint()}},_prepareBar:function(type){this.activeBar=type,this.els.bar.style.bottom="",this.els.bar.morph("height:"+this.bars[type].height+"px",{afterFinish:function(){UI.Registry.onResize(),this.onShowBarComplete(type),this.actions.hasOwnProperty("onShow"+type.capitalize())&&this.actions["onShow"+type.capitalize()]()}.bind(this)})},_doShowBar:function(type){this.actions.hasOwnProperty("doStart"+type.capitalize())?this.actions["doStart"+type.capitalize()]():this.enable(),MM.utils.siteLocation.setLoc(type),this.els.bar.select(".js-close-footerbar")[0].onclick=this.toggleBar.bind(this,type),MM.ui.enableButton("btn_toggle"+type)},onShowBarComplete:function(type){this.els.bar.addClassName("active"),"info"==type&&(this.els.bar.style.height="auto")},hideBar:function(type,noEffects){this.els.bar&&(MM.utils.siteLocation.reset(),this.activeBar=null,removeClassName(this.els.bar,"active"),noEffects?this._doHideBar(type):this.els.bar.morph("height: 0;",{afterFinish:this._doHideBar.bind(this,type)}),removeClassName(mm$("btn_toggle"+type),"active"),App.showAnonymousHint())},_doHideBar:function(type){this.els.bar.style.bottom="0",UI.Registry.onResize(),this.actions.hasOwnProperty("doStop"+type.capitalize())&&this.actions["doStop"+type.capitalize()](),new Ajax.Request("/toolbar/hide",{parameters:{id:App.config.map_id},evalScripts:!0,asynchronous:!0}),MM.ui.enableButton("btn_toggle"+type)}};Footer.Meistertask={updateIcon:function(connected){var el=mm$("btn_togglemeistertask");el&&(connected?(removeClassName(el,"icon-path"),addClassName(el,"icon-bg"),el.setAttribute("data-icon","mt-checkmark")):(removeClassName(el,"icon-bg"),addClassName(el,"icon-path"),el.setAttribute("data-icon","mt-checkmark-border")),MM.ui.svgIcons(el))}},Footer.actions={onBeforeShowPrint:function(){App.config.currentlyEditable=!1,UI.Registry.toggleMode("view")},doStartPrint:function(){App.ui.Print.init()},doStopPrint:function(){App.config.editable&&(App.config.currentlyEditable=!0,UI.Registry.toggleMode("edit")),App.ui.Print.exit()},doStartMeistertask:function(){App.trigger(CustomEvents.MEISTERTASK_BAR_OPENED)},doStopMeistertask:function(){MM.utils.Meistertask.exit();var popover=GeneralPopover.get("mt_project_footer");popover&&popover.destroy()},onBeforeShowHistory:function(){App.config.showRevisions=!0,App.config.currentlyEditable=!1,UI.Registry.toggleMode("view"),App.showMapLoading()},doStartHistory:function(){var autoload=App.config.autoStart&&"changes"===App.config.autoStart;RevisionBrowser.start(this.startHistoryView,autoload,!0),App.trigger(CustomEvents.HISTORY_MODE_STARTED)},doStopHistory:function(){App.showMapLoading(),"undefined"!=typeof RevisionsSlider&&RevisionsSlider.highlightNodes(!1),"undefined"!=typeof RevisionBrowser&&RevisionBrowser.stop(),App.config.editable&&(App.config.currentlyEditable=!0,UI.Registry.toggleMode("edit")),mm$("canvas_container").style.opacity=1,App.config.showRevisions=!1,App.hideMapLoading(),App.trigger(CustomEvents.HISTORY_MODE_CLOSED)},doStartSlideshow:function(viewOnly){Presentation.Slideshow.prepare(viewOnly)},doStopSlideshow:function(){Presentation.on||Presentation.Slideshow.exit()},historyRevert:function(){var revertTo=RevisionBrowser.revision+1;ServerConnection.historyRevert(revertTo)},startHistoryView:function(){mm$("canvas_container").style.opacity=.7,App.hideMapLoading()}},__webpack_exports__.default=Footer}.call(__webpack_exports__,__webpack_require__("x9tB"),__webpack_require__("nakD"))},sWsi:function(module,__webpack_exports__,__webpack_require__){"use strict";Object.defineProperty(__webpack_exports__,"__esModule",{value:!0});var __WEBPACK_IMPORTED_MODULE_1__app_ui_footer__=(__webpack_require__("hqmG"),__webpack_require__("k1IG")),__WEBPACK_IMPORTED_MODULE_2__app_ui_options__=__webpack_require__("4KFD"),__WEBPACK_IMPORTED_MODULE_3__app_models_userModel__=__webpack_require__("gz1n"),__WEBPACK_IMPORTED_MODULE_4_app_models_ideaVote__=__webpack_require__("00kP"),__WEBPACK_IMPORTED_MODULE_5_tools_emojiArea__=(__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_app_models_ideaVote__),__webpack_require__("Bp4Y"));window.sideBar=null,App.ui.Footer=__WEBPACK_IMPORTED_MODULE_1__app_ui_footer__.default,App.ui.Options=__WEBPACK_IMPORTED_MODULE_2__app_ui_options__.default,window.EmojiArea=__WEBPACK_IMPORTED_MODULE_5_tools_emojiArea__.a,window.User=__WEBPACK_IMPORTED_MODULE_3__app_models_userModel__.UserModel,window.users=__WEBPACK_IMPORTED_MODULE_3__app_models_userModel__.users},uJpZ:function(module,__webpack_exports__,__webpack_require__){"use strict";(function(React){function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var __WEBPACK_IMPORTED_MODULE_0__widget__=__webpack_require__("fOgc"),__WEBPACK_IMPORTED_MODULE_1_ui_components_generic_sectionHeader__=__webpack_require__("zISO"),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),Form=function(_React$Component){function Form(props){_classCallCheck(this,Form);var _this=_possibleConstructorReturn(this,(Form.__proto__||Object.getPrototypeOf(Form)).call(this,props));return _this.submit=_this.submit.bind(_this),_this}return _inherits(Form,_React$Component),_createClass(Form,[{key:"submit",value:function(e){var _this2=this;e.preventDefault(),e.stopPropagation();var members=this.widget.getMembers(),teams=this.widget.getMembers("share_groups"),collaboratorsCount=this.widget.getTokenCount();if(0!==collaboratorsCount){var viewOnly=this.widget.isViewOnly();MM.ui.disableButton(this.submitButton),new Ajax.Request("/sharing/invite/"+App.config.map_id,{parameters:{collaborators:members,groups:teams,send_invitations:!0,permission:viewOnly?1:2,message:""},onSuccess:function(transport){MM.ui.enableButton(_this2.submitButton),_this2.widget.clearTokens(),Message.show(collaboratorsCount+" "+I18n.t("js.invitations_sent",{count:collaboratorsCount}),Message.INFO),_this2.props.onSubmit()},onFailure:function(response){MM.ui.enableButton(_this2.submitButton),429==response.status?Message.show(I18n.t("js.error_on_invitations_rate_exceeded"),Message.ERROR):Message.show(I18n.t("js.error_on_invitations_try_again_later"),Message.ERROR)}})}}},{key:"render",value:function(){var _this3=this;return React.createElement("div",{className:"widget-container invitation-widget "+this.props.className},React.createElement(__WEBPACK_IMPORTED_MODULE_1_ui_components_generic_sectionHeader__.a,{title:this.props.title,className:"mt-10 mb-5"}),React.createElement("form",{className:"mb-20",onSubmit:this.submit},React.createElement("div",{className:"h-flex-start"},React.createElement(__WEBPACK_IMPORTED_MODULE_0__widget__.a,{ref:function(el){return _this3.widget=el},className:"w-200 mr-10",placeholder:I18n.t("js.email_or_name"),hideTokenizerHeader:this.props.hideTokenizerHeader}),React.createElement("input",{ref:function(el){return _this3.submitButton=el},type:"submit",className:"button default",value:I18n.t("js.invite")}))))}}]),Form}(React.Component);Form.defaultProps={className:"",onSubmit:function(){}},__webpack_exports__.a=Form}).call(__webpack_exports__,__webpack_require__("nakD"))},xY9N:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return TEAM_PREFERENCES}),__webpack_require__.d(__webpack_exports__,"c",function(){return isEnabled}),__webpack_require__.d(__webpack_exports__,"b",function(){return get});var state={isFetched:!1,preferences:[]},fetch=function(){var callback=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return null};new Ajax.Request("/team_preferences.json",{method:"GET",onSuccess:function(transport){state.isFetched=!0,state.preferences=transport.responseJSON,callback(state.preferences)}})},TEAM_PREFERENCES={ALLOW_LINK_SHARE:"allow_link_share",ALLOW_PUBLISH:"allow_publish",ALLOW_ACTIVITY:"allow_activity"},isEnabled=function(name){var preference=state.preferences.find(function(p){return p.name===name});return!preference||"0"!==preference.value},get=function(callback){state.isFetched?callback(state.preferences):fetch(callback)}}},["sWsi"]);